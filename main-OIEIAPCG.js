var JE=Object.defineProperty,XE=Object.defineProperties;var eC=Object.getOwnPropertyDescriptors;var ao=Object.getOwnPropertySymbols;var Qp=Object.prototype.hasOwnProperty,Zp=Object.prototype.propertyIsEnumerable;var Kp=(t,e,n)=>e in t?JE(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,_=(t,e)=>{for(var n in e||={})Qp.call(e,n)&&Kp(t,n,e[n]);if(ao)for(var n of ao(e))Zp.call(e,n)&&Kp(t,n,e[n]);return t},ee=(t,e)=>XE(t,eC(e));var Jp=(t,e)=>{var n={};for(var r in t)Qp.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&ao)for(var r of ao(t))e.indexOf(r)<0&&Zp.call(t,r)&&(n[r]=t[r]);return n};var v=(t,e,n)=>new Promise((r,i)=>{var s=c=>{try{a(n.next(c))}catch(l){i(l)}},o=c=>{try{a(n.throw(c))}catch(l){i(l)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(s,o);a((n=n.apply(t,e)).next())});var Xp=null;var ol=1,eg=Symbol("SIGNAL");function V(t){let e=Xp;return Xp=t,e}var tg={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function tC(t){if(!(ll(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===ol)){if(!t.producerMustRecompute(t)&&!al(t)){t.dirty=!1,t.lastCleanEpoch=ol;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=ol}}function ng(t){return t&&(t.nextProducerIndex=0),V(t)}function rg(t,e){if(V(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(ll(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)cl(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function al(t){co(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(tC(n),r!==n.version))return!0}return!1}function ig(t){if(co(t),ll(t))for(let e=0;e<t.producerNode.length;e++)cl(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function cl(t,e){if(nC(t),co(t),t.liveConsumerNode.length===1)for(let r=0;r<t.producerNode.length;r++)cl(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];co(i),i.producerIndexOfThis[r]=e}}function ll(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function co(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function nC(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function rC(){throw new Error}var iC=rC;function sg(t){iC=t}function b(t){return typeof t=="function"}function or(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var lo=or(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Cn(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var ie=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let s of n)s.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(b(r))try{r()}catch(s){e=s instanceof lo?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{og(s)}catch(o){e=e??[],o instanceof lo?e=[...e,...o.errors]:e.push(o)}}if(e)throw new lo(e)}}add(e){var n;if(e&&e!==this)if(this.closed)og(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Cn(n,e)}remove(e){let{_finalizers:n}=this;n&&Cn(n,e),e instanceof t&&e._removeParent(this)}};ie.EMPTY=(()=>{let t=new ie;return t.closed=!0,t})();var ul=ie.EMPTY;function uo(t){return t instanceof ie||t&&"closed"in t&&b(t.remove)&&b(t.add)&&b(t.unsubscribe)}function og(t){b(t)?t():t.unsubscribe()}var nt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var ar={setTimeout(t,e,...n){let{delegate:r}=ar;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=ar;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function fo(t){ar.setTimeout(()=>{let{onUnhandledError:e}=nt;if(e)e(t);else throw t})}function pi(){}var ag=dl("C",void 0,void 0);function cg(t){return dl("E",void 0,t)}function lg(t){return dl("N",t,void 0)}function dl(t,e,n){return{kind:t,value:e,error:n}}var Dn=null;function cr(t){if(nt.useDeprecatedSynchronousErrorHandling){let e=!Dn;if(e&&(Dn={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=Dn;if(Dn=null,n)throw r}}else t()}function ug(t){nt.useDeprecatedSynchronousErrorHandling&&Dn&&(Dn.errorThrown=!0,Dn.error=t)}var bn=class extends ie{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,uo(e)&&e.add(this)):this.destination=aC}static create(e,n,r){return new lr(e,n,r)}next(e){this.isStopped?hl(lg(e),this):this._next(e)}error(e){this.isStopped?hl(cg(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?hl(ag,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},sC=Function.prototype.bind;function fl(t,e){return sC.call(t,e)}var pl=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){ho(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){ho(r)}else ho(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){ho(n)}}},lr=class extends bn{constructor(e,n,r){super();let i;if(b(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&nt.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&fl(e.next,s),error:e.error&&fl(e.error,s),complete:e.complete&&fl(e.complete,s)}):i=e}this.destination=new pl(i)}};function ho(t){nt.useDeprecatedSynchronousErrorHandling?ug(t):fo(t)}function oC(t){throw t}function hl(t,e){let{onStoppedNotification:n}=nt;n&&ar.setTimeout(()=>n(t,e))}var aC={closed:!0,next:pi,error:oC,complete:pi};var ur=typeof Symbol=="function"&&Symbol.observable||"@@observable";function xe(t){return t}function gl(...t){return ml(t)}function ml(t){return t.length===0?xe:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var $=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let s=lC(n)?n:new lr(n,r,i);return cr(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=dg(r),new r((i,s)=>{let o=new lr({next:a=>{try{n(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[ur](){return this}pipe(...n){return ml(n)(this)}toPromise(n){return n=dg(n),new n((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function dg(t){var e;return(e=t??nt.Promise)!==null&&e!==void 0?e:Promise}function cC(t){return t&&b(t.next)&&b(t.error)&&b(t.complete)}function lC(t){return t&&t instanceof bn||cC(t)&&uo(t)}function vl(t){return b(t?.lift)}function j(t){return e=>{if(vl(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function U(t,e,n,r,i){return new yl(t,e,n,r,i)}var yl=class extends bn{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function dr(){return j((t,e)=>{let n=null;t._refCount++;let r=U(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var fr=class extends ${constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,vl(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new ie;let n=this.getSubject();e.add(this.source.subscribe(U(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=ie.EMPTY)}return e}refCount(){return dr()(this)}};var fg=or(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ie=(()=>{class t extends ${constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new po(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new fg}next(n){cr(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){cr(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){cr(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:s}=this;return r||i?ul:(this.currentObservers=null,s.push(n),new ie(()=>{this.currentObservers=null,Cn(s,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){let n=new $;return n.source=this,n}}return t.create=(e,n)=>new po(e,n),t})(),po=class extends Ie{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:ul}};var ge=class extends Ie{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var _l={now(){return(_l.delegate||Date).now()},delegate:void 0};var go=class extends ie{constructor(e,n){super()}schedule(e,n=0){return this}};var gi={setInterval(t,e,...n){let{delegate:r}=gi;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=gi;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var hr=class extends go{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,r=0){return gi.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&gi.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Cn(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var pr=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};pr.now=_l.now;var gr=class extends pr{constructor(e,n=pr.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var wl=new gr(hr);var mo=class extends hr{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var vo=class extends gr{};var Il=new vo(mo);var Pe=new $(t=>t.complete());function hg(t){return t&&b(t.schedule)}function pg(t){return t[t.length-1]}function gg(t){return b(pg(t))?t.pop():void 0}function Qt(t){return hg(pg(t))?t.pop():void 0}function El(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function vg(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function mg(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Tn(t){return this instanceof Tn?(this.v=t,this):new Tn(t)}function yg(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i={},a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(h){return function(p){return Promise.resolve(p).then(h,d)}}function a(h,p){r[h]&&(i[h]=function(y){return new Promise(function(w,A){s.push([h,y,w,A])>1||c(h,y)})},p&&(i[h]=p(i[h])))}function c(h,p){try{l(r[h](p))}catch(y){f(s[0][3],y)}}function l(h){h.value instanceof Tn?Promise.resolve(h.value.v).then(u,d):f(s[0][2],h)}function u(h){c("next",h)}function d(h){c("throw",h)}function f(h,p){h(p),s.shift(),s.length&&c(s[0][0],s[0][1])}}function _g(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof mg=="function"?mg(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,c){o=t[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}}var yo=t=>t&&typeof t.length=="number"&&typeof t!="function";function _o(t){return b(t?.then)}function wo(t){return b(t[ur])}function Io(t){return Symbol.asyncIterator&&b(t?.[Symbol.asyncIterator])}function Eo(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function uC(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Co=uC();function Do(t){return b(t?.[Co])}function bo(t){return yg(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield Tn(n.read());if(i)return yield Tn(void 0);yield yield Tn(r)}}finally{n.releaseLock()}})}function To(t){return b(t?.getReader)}function fe(t){if(t instanceof $)return t;if(t!=null){if(wo(t))return dC(t);if(yo(t))return fC(t);if(_o(t))return hC(t);if(Io(t))return wg(t);if(Do(t))return pC(t);if(To(t))return gC(t)}throw Eo(t)}function dC(t){return new $(e=>{let n=t[ur]();if(b(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function fC(t){return new $(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function hC(t){return new $(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,fo)})}function pC(t){return new $(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function wg(t){return new $(e=>{mC(t,e).catch(n=>e.error(n))})}function gC(t){return wg(bo(t))}function mC(t,e){var n,r,i,s;return vg(this,void 0,void 0,function*(){try{for(n=_g(t);r=yield n.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})}function Se(t,e,n,r=0,i=!1){let s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function Zt(t,e=0){return j((n,r)=>{n.subscribe(U(r,i=>Se(r,t,()=>r.next(i),e),()=>Se(r,t,()=>r.complete(),e),i=>Se(r,t,()=>r.error(i),e)))})}function Jt(t,e=0){return j((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function Ig(t,e){return fe(t).pipe(Jt(e),Zt(e))}function Eg(t,e){return fe(t).pipe(Jt(e),Zt(e))}function Cg(t,e){return new $(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function Dg(t,e){return new $(n=>{let r;return Se(n,e,()=>{r=t[Co](),Se(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){n.error(o);return}s?n.complete():n.next(i)},0,!0)}),()=>b(r?.return)&&r.return()})}function So(t,e){if(!t)throw new Error("Iterable cannot be null");return new $(n=>{Se(n,e,()=>{let r=t[Symbol.asyncIterator]();Se(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function bg(t,e){return So(bo(t),e)}function Tg(t,e){if(t!=null){if(wo(t))return Ig(t,e);if(yo(t))return Cg(t,e);if(_o(t))return Eg(t,e);if(Io(t))return So(t,e);if(Do(t))return Dg(t,e);if(To(t))return bg(t,e)}throw Eo(t)}function ae(t,e){return e?Tg(t,e):fe(t)}function D(...t){let e=Qt(t);return ae(t,e)}function mr(t,e){let n=b(t)?t:()=>t,r=i=>i.error(n());return new $(e?i=>e.schedule(r,0,i):r)}function Cl(t){return!!t&&(t instanceof $||b(t.lift)&&b(t.subscribe))}var Ut=or(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function F(t,e){return j((n,r)=>{let i=0;n.subscribe(U(r,s=>{r.next(t.call(e,s,i++))}))})}var{isArray:vC}=Array;function yC(t,e){return vC(e)?t(...e):t(e)}function Sg(t){return F(e=>yC(t,e))}var{isArray:_C}=Array,{getPrototypeOf:wC,prototype:IC,keys:EC}=Object;function Ag(t){if(t.length===1){let e=t[0];if(_C(e))return{args:e,keys:null};if(CC(e)){let n=EC(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function CC(t){return t&&typeof t=="object"&&wC(t)===IC}function Ng(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function Ao(...t){let e=Qt(t),n=gg(t),{args:r,keys:i}=Ag(t);if(r.length===0)return ae([],e);let s=new $(DC(r,e,i?o=>Ng(i,o):xe));return n?s.pipe(Sg(n)):s}function DC(t,e,n=xe){return r=>{Mg(e,()=>{let{length:i}=t,s=new Array(i),o=i,a=i;for(let c=0;c<i;c++)Mg(e,()=>{let l=ae(t[c],e),u=!1;l.subscribe(U(r,d=>{s[c]=d,u||(u=!0,a--),a||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function Mg(t,e,n){t?Se(n,t,e):e()}function Rg(t,e,n,r,i,s,o,a){let c=[],l=0,u=0,d=!1,f=()=>{d&&!c.length&&!l&&e.complete()},h=y=>l<r?p(y):c.push(y),p=y=>{s&&e.next(y),l++;let w=!1;fe(n(y,u++)).subscribe(U(e,A=>{i?.(A),s?h(A):e.next(A)},()=>{w=!0},void 0,()=>{if(w)try{for(l--;c.length&&l<r;){let A=c.shift();o?Se(e,o,()=>p(A)):p(A)}f()}catch(A){e.error(A)}}))};return t.subscribe(U(e,h,()=>{d=!0,f()})),()=>{a?.()}}function le(t,e,n=1/0){return b(e)?le((r,i)=>F((s,o)=>e(r,s,i,o))(fe(t(r,i))),n):(typeof e=="number"&&(n=e),j((r,i)=>Rg(r,i,t,n)))}function Dl(t=1/0){return le(xe,t)}function xg(){return Dl(1)}function vr(...t){return xg()(ae(t,Qt(t)))}function No(t){return new $(e=>{fe(t()).subscribe(e)})}function Ve(t,e){return j((n,r)=>{let i=0;n.subscribe(U(r,s=>t.call(e,s,i++)&&r.next(s)))})}function Xt(t){return j((e,n)=>{let r=null,i=!1,s;r=e.subscribe(U(n,void 0,void 0,o=>{s=fe(t(o,Xt(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function Pg(t,e,n,r,i){return(s,o)=>{let a=n,c=e,l=0;s.subscribe(U(o,u=>{let d=l++;c=a?t(c,u,d):(a=!0,u),r&&o.next(c)},i&&(()=>{a&&o.next(c),o.complete()})))}}function Sn(t,e){return b(e)?le(t,e,1):le(t,1)}function en(t){return j((e,n)=>{let r=!1;e.subscribe(U(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function Vt(t){return t<=0?()=>Pe:j((e,n)=>{let r=0;e.subscribe(U(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function bl(t){return F(()=>t)}function Mo(t=bC){return j((e,n)=>{let r=!1;e.subscribe(U(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function bC(){return new Ut}function yr(t){return j((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function rt(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Ve((i,s)=>t(i,s,r)):xe,Vt(1),n?en(e):Mo(()=>new Ut))}function _r(t){return t<=0?()=>Pe:j((e,n)=>{let r=[];e.subscribe(U(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function Tl(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Ve((i,s)=>t(i,s,r)):xe,_r(1),n?en(e):Mo(()=>new Ut))}function Sl(t,e){return j(Pg(t,e,arguments.length>=2,!0))}function Al(...t){let e=Qt(t);return j((n,r)=>{(e?vr(t,n,e):vr(t,n)).subscribe(r)})}function $e(t,e){return j((n,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();n.subscribe(U(r,c=>{i?.unsubscribe();let l=0,u=s++;fe(t(c,u)).subscribe(i=U(r,d=>r.next(e?e(c,d,u,l++):d),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Nl(t){return j((e,n)=>{fe(t).subscribe(U(n,()=>n.complete(),pi)),!n.closed&&e.subscribe(n)})}function se(t,e,n){let r=b(t)||e||n?{next:t,error:e,complete:n}:t;return r?j((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(U(s,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),s.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),s.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),s.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):xe}var TC="https://g.co/ng/security#xss",C=class extends Error{constructor(e,n){super(la(e,n)),this.code=e}};function la(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function ua(t){return{toString:t}.toString()}var Ro="__parameters__";function SC(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function AC(t,e,n){return ua(()=>{let r=SC(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(c,l,u){let d=c.hasOwnProperty(Ro)?c[Ro]:Object.defineProperty(c,Ro,{value:[]})[Ro];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(o),c}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var mi=globalThis;function K(t){for(let e in t)if(t[e]===K)return e;throw Error("Could not find renamed property on target object.")}function Ne(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(Ne).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function Og(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var NC=K({__forward_ref__:K});function ym(t){return t.__forward_ref__=ym,t.toString=function(){return Ne(this())},t}function He(t){return _m(t)?t():t}function _m(t){return typeof t=="function"&&t.hasOwnProperty(NC)&&t.__forward_ref__===ym}function I(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function da(t){return kg(t,Im)||kg(t,Em)}function wm(t){return da(t)!==null}function kg(t,e){return t.hasOwnProperty(e)?t[e]:null}function MC(t){let e=t&&(t[Im]||t[Em]);return e||null}function Lg(t){return t&&(t.hasOwnProperty(Fg)||t.hasOwnProperty(RC))?t[Fg]:null}var Im=K({\u0275prov:K}),Fg=K({\u0275inj:K}),Em=K({ngInjectableDef:K}),RC=K({ngInjectorDef:K}),S=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=I({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Cm(t){return t&&!!t.\u0275providers}var xC=K({\u0275cmp:K}),PC=K({\u0275dir:K}),OC=K({\u0275pipe:K}),kC=K({\u0275mod:K}),Bo=K({\u0275fac:K}),vi=K({__NG_ELEMENT_ID__:K}),jg=K({__NG_ENV_ID__:K});function Dm(t){return typeof t=="string"?t:t==null?"":String(t)}function LC(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Dm(t)}function FC(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new C(-200,t)}function Vu(t,e){throw new C(-201,!1)}var R=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(R||{}),ql;function bm(){return ql}function Be(t){let e=ql;return ql=t,e}function Tm(t,e,n){let r=da(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&R.Optional)return null;if(e!==void 0)return e;Vu(t,"Injector")}var jC={},yi=jC,Gl="__NG_DI_FLAG__",Ho="ngTempTokenPath",UC="ngTokenPath",VC=/\n/gm,$C="\u0275",Ug="__source",Cr;function BC(){return Cr}function tn(t){let e=Cr;return Cr=t,e}function HC(t,e=R.Default){if(Cr===void 0)throw new C(-203,!1);return Cr===null?Tm(t,void 0,e):Cr.get(t,e&R.Optional?null:void 0,e)}function k(t,e=R.Default){return(bm()||HC)(He(t),e)}function m(t,e=R.Default){return k(t,fa(e))}function fa(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Yl(t){let e=[];for(let n=0;n<t.length;n++){let r=He(t[n]);if(Array.isArray(r)){if(r.length===0)throw new C(900,!1);let i,s=R.Default;for(let o=0;o<r.length;o++){let a=r[o],c=zC(a);typeof c=="number"?c===-1?i=a.token:s|=c:i=a}e.push(k(i,s))}else e.push(k(r))}return e}function WC(t,e){return t[Gl]=e,t.prototype[Gl]=e,t}function zC(t){return t[Gl]}function qC(t,e,n,r){let i=t[Ho];throw e[Ug]&&i.unshift(e[Ug]),t.message=GC(`
`+t.message,i,n,r),t[UC]=i,t[Ho]=null,t}function GC(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==$C?t.slice(2):t;let i=Ne(e);if(Array.isArray(e))i=e.map(Ne).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):Ne(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(VC,`
  `)}`}var _t=WC(AC("Optional"),8);function br(t,e){let n=t.hasOwnProperty(Bo);return n?t[Bo]:null}function YC(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],s=e[r];if(n&&(i=n(i),s=n(s)),s!==i)return!1}return!0}function KC(t){return t.flat(Number.POSITIVE_INFINITY)}function $u(t,e){t.forEach(n=>Array.isArray(n)?$u(n,e):e(n))}function Sm(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Wo(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function QC(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let s=i-2;t[i]=t[s],i--}t[e]=n,t[e+1]=r}}function ZC(t,e,n){let r=Oi(t,e);return r>=0?t[r|1]=n:(r=~r,QC(t,r,e,n)),r}function Ml(t,e){let n=Oi(t,e);if(n>=0)return t[n|1]}function Oi(t,e){return JC(t,e,1)}function JC(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let s=r+(i-r>>1),o=t[s<<n];if(e===o)return s<<n;o>e?i=s:r=s+1}return~(i<<n)}var _i={},sn=[],Nn=new S(""),Am=new S("",-1),Nm=new S(""),zo=class{get(e,n=yi){if(n===yi){let r=new Error(`NullInjectorError: No provider for ${Ne(e)}!`);throw r.name="NullInjectorError",r}return n}},Mm=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(Mm||{}),vt=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(vt||{}),on=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(on||{});function XC(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}function Kl(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let s=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,s)}else{let s=i,o=n[++r];tD(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function eD(t){return t===3||t===4||t===6}function tD(t){return t.charCodeAt(0)===64}function Bu(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?Vg(t,n,i,null,e[++r]):Vg(t,n,i,null,null))}}return t}function Vg(t,e,n,r,i){let s=0,o=t.length;if(e===-1)o=-1;else for(;s<t.length;){let a=t[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<t.length;){let a=t[s];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[s+1]=i);return}else if(r===t[s+1]){t[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),r!==null&&t.splice(s++,0,r),i!==null&&t.splice(s++,0,i)}var Rm="ng-template";function nD(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&XC(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(Hu(t))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===n)return!0}return!1}function Hu(t){return t.type===4&&t.value!==Rm}function rD(t,e,n){let r=t.type===4&&!n?Rm:t.value;return e===r}function iD(t,e,n){let r=4,i=t.attrs,s=i!==null?aD(i):0,o=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!o&&!it(r)&&!it(c))return!1;if(o&&it(c))continue;o=!1,r=c|r&1;continue}if(!o)if(r&4){if(r=2|r&1,c!==""&&!rD(t,c,n)||c===""&&e.length===1){if(it(r))return!1;o=!0}}else if(r&8){if(i===null||!nD(t,i,c,n)){if(it(r))return!1;o=!0}}else{let l=e[++a],u=sD(c,i,Hu(t),n);if(u===-1){if(it(r))return!1;o=!0;continue}if(l!==""){let d;if(u>s?d="":d=i[u+1].toLowerCase(),r&2&&l!==d){if(it(r))return!1;o=!0}}}}return it(r)||o}function it(t){return(t&1)===0}function sD(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){let o=e[i];if(o===t)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return cD(e,t)}function oD(t,e,n=!1){for(let r=0;r<e.length;r++)if(iD(t,e[r],n))return!0;return!1}function aD(t){for(let e=0;e<t.length;e++){let n=t[e];if(eD(n))return e}return t.length}function cD(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function $g(t,e){return t?":not("+e.trim()+")":e}function lD(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if(typeof o=="string")if(r&2){let a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!it(o)&&(e+=$g(s,i),i=""),r=o,s=s||!it(r);n++}return i!==""&&(e+=$g(s,i)),e}function uD(t){return t.map(lD).join(",")}function dD(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let s=t[r];if(typeof s=="string")i===2?s!==""&&e.push(s,t[++r]):i===8&&n.push(s);else{if(!it(i))break;i=s}r++}return{attrs:e,classes:n}}function wt(t){return ua(()=>{let e=Lm(t),n=ee(_({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Mm.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||vt.Emulated,styles:t.styles||sn,_:null,schemas:t.schemas||null,tView:null,id:""});Fm(n);let r=t.dependencies;return n.directiveDefs=Hg(r,!1),n.pipeDefs=Hg(r,!0),n.id=pD(n),n})}function fD(t){return Mn(t)||xm(t)}function hD(t){return t!==null}function Bg(t,e){if(t==null)return _i;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],s,o,a=on.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(n[s]=a!==on.None?[r,a]:r,e[s]=o):n[s]=r}return n}function Wu(t){return ua(()=>{let e=Lm(t);return Fm(e),e})}function Mn(t){return t[xC]||null}function xm(t){return t[PC]||null}function Pm(t){return t[OC]||null}function Om(t){let e=Mn(t)||xm(t)||Pm(t);return e!==null?e.standalone:!1}function km(t,e){let n=t[kC]||null;if(!n&&e===!0)throw new Error(`Type ${Ne(t)} does not have '\u0275mod' property.`);return n}function Lm(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||_i,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||sn,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Bg(t.inputs,e),outputs:Bg(t.outputs),debugInfo:null}}function Fm(t){t.features?.forEach(e=>e(t))}function Hg(t,e){if(!t)return null;let n=e?Pm:fD;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(hD)}function pD(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function at(t){return{\u0275providers:t}}function gD(...t){return{\u0275providers:jm(!0,t),\u0275fromNgModule:!0}}function jm(t,...e){let n=[],r=new Set,i,s=o=>{n.push(o)};return $u(e,o=>{let a=o;Ql(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&Um(i,s),n}function Um(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];zu(i,s=>{e(s,r)})}}function Ql(t,e,n,r){if(t=He(t),!t)return!1;let i=null,s=Lg(t),o=!s&&Mn(t);if(!s&&!o){let c=t.ngModule;if(s=Lg(c),s)i=c;else return!1}else{if(o&&!o.standalone)return!1;i=t}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let l of c)Ql(l,e,n,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let l;try{$u(s.imports,u=>{Ql(u,e,n,r)&&(l||=[],l.push(u))})}finally{}l!==void 0&&Um(l,e)}if(!a){let l=br(i)||(()=>new i);e({provide:i,useFactory:l,deps:sn},i),e({provide:Nm,useValue:i,multi:!0},i),e({provide:Nn,useValue:()=>k(i),multi:!0},i)}let c=s.providers;if(c!=null&&!a){let l=t;zu(c,u=>{e(u,l)})}}else return!1;return i!==t&&t.providers!==void 0}function zu(t,e){for(let n of t)Cm(n)&&(n=n.\u0275providers),Array.isArray(n)?zu(n,e):e(n)}var mD=K({provide:String,useValue:K});function Vm(t){return t!==null&&typeof t=="object"&&mD in t}function vD(t){return!!(t&&t.useExisting)}function yD(t){return!!(t&&t.useFactory)}function Zl(t){return typeof t=="function"}var ha=new S(""),Lo={},_D={},Rl;function qu(){return Rl===void 0&&(Rl=new zo),Rl}var We=class{},wi=class extends We{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Xl(e,o=>this.processProvider(o)),this.records.set(Am,wr(void 0,this)),i.has("environment")&&this.records.set(We,wr(void 0,this));let s=this.records.get(ha);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(Nm,sn,R.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=V(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),V(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=tn(this),r=Be(void 0),i;try{return e()}finally{tn(n),Be(r)}}get(e,n=yi,r=R.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(jg))return e[jg](this);r=fa(r);let i,s=tn(this),o=Be(void 0);try{if(!(r&R.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=bD(e)&&da(e);l&&this.injectableDefInScope(l)?c=wr(Jl(e),Lo):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&R.Self?qu():this.parent;return n=r&R.Optional&&n===yi?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[Ho]=a[Ho]||[]).unshift(Ne(e)),s)throw a;return qC(a,e,"R3InjectorError",this.source)}else throw a}finally{Be(o),tn(s)}}resolveInjectorInitializers(){let e=V(null),n=tn(this),r=Be(void 0),i;try{let s=this.get(Nn,sn,R.Self);for(let o of s)o()}finally{tn(n),Be(r),V(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(Ne(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new C(205,!1)}processProvider(e){e=He(e);let n=Zl(e)?e:He(e&&e.provide),r=ID(e);if(!Zl(e)&&e.multi===!0){let i=this.records.get(n);i||(i=wr(void 0,Lo,!0),i.factory=()=>Yl(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=V(null);try{return n.value===Lo&&(n.value=_D,n.value=n.factory()),typeof n.value=="object"&&n.value&&DD(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{V(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=He(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Jl(t){let e=da(t),n=e!==null?e.factory:br(t);if(n!==null)return n;if(t instanceof S)throw new C(204,!1);if(t instanceof Function)return wD(t);throw new C(204,!1)}function wD(t){if(t.length>0)throw new C(204,!1);let n=MC(t);return n!==null?()=>n.factory(t):()=>new t}function ID(t){if(Vm(t))return wr(void 0,t.useValue);{let e=ED(t);return wr(e,Lo)}}function ED(t,e,n){let r;if(Zl(t)){let i=He(t);return br(i)||Jl(i)}else if(Vm(t))r=()=>He(t.useValue);else if(yD(t))r=()=>t.useFactory(...Yl(t.deps||[]));else if(vD(t))r=()=>k(He(t.useExisting));else{let i=He(t&&(t.useClass||t.provide));if(CD(t))r=()=>new i(...Yl(t.deps));else return br(i)||Jl(i)}return r}function wr(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function CD(t){return!!t.deps}function DD(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function bD(t){return typeof t=="function"||typeof t=="object"&&t instanceof S}function Xl(t,e){for(let n of t)Array.isArray(n)?Xl(n,e):n&&Cm(n)?Xl(n.\u0275providers,e):e(n)}function ln(t,e){t instanceof wi&&t.assertNotDestroyed();let n,r=tn(t),i=Be(void 0);try{return e()}finally{tn(r),Be(i)}}function TD(){return bm()!==void 0||BC()!=null}function SD(t){return typeof t=="function"}var Oe=0,T=1,E=2,he=3,st=4,ct=5,ze=6,Ii=7,Me=8,Tr=9,yt=10,oe=11,Ei=12,Wg=13,ki=14,ke=15,Li=16,Ir=17,$t=18,pa=19,$m=20,nn=21,xl=22,Rn=23,Re=25,Bm=1,Ci=6,Bt=7,qo=8,Sr=9,me=10,Gu=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(Gu||{});function rn(t){return Array.isArray(t)&&typeof t[Bm]=="object"}function It(t){return Array.isArray(t)&&t[Bm]===!0}function Hm(t){return(t.flags&4)!==0}function Fi(t){return t.componentOffset>-1}function Yu(t){return(t.flags&1)===1}function ji(t){return!!t.template}function Wm(t){return(t[E]&512)!==0}var eu=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function zm(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function ga(){return qm}function qm(t){return t.type.prototype.ngOnChanges&&(t.setInput=ND),AD}ga.ngInherit=!0;function AD(){let t=Ym(this),e=t?.current;if(e){let n=t.previous;if(n===_i)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function ND(t,e,n,r,i){let s=this.declaredInputs[r],o=Ym(t)||MD(t,{previous:_i,current:null}),a=o.current||(o.current={}),c=o.previous,l=c[s];a[s]=new eu(l&&l.currentValue,n,c===_i),zm(t,e,i,n)}var Gm="__ngSimpleChanges__";function Ym(t){return t[Gm]||null}function MD(t,e){return t[Gm]=e}var zg=null;var gt=function(t,e,n){zg?.(t,e,n)},RD="svg",xD="math",PD=!1;function OD(){return PD}function ot(t){for(;Array.isArray(t);)t=t[Oe];return t}function Km(t,e){return ot(e[t])}function qe(t,e){return ot(e[t.index])}function Ku(t,e){return t.data[e]}function Ln(t,e){let n=e[t];return rn(n)?n:n[Oe]}function kD(t){return(t[E]&4)===4}function Qu(t){return(t[E]&128)===128}function LD(t){return It(t[he])}function Go(t,e){return e==null?null:t[e]}function Qm(t){t[Ir]=0}function FD(t){t[E]&1024||(t[E]|=1024,Qu(t)&&Di(t))}function Zu(t){return!!(t[E]&9216||t[Rn]?.dirty)}function tu(t){t[yt].changeDetectionScheduler?.notify(1),Zu(t)?Di(t):t[E]&64&&(OD()?(t[E]|=1024,Di(t)):t[yt].changeDetectionScheduler?.notify())}function Di(t){t[yt].changeDetectionScheduler?.notify();let e=bi(t);for(;e!==null&&!(e[E]&8192||(e[E]|=8192,!Qu(e)));)e=bi(e)}function Zm(t,e){if((t[E]&256)===256)throw new C(911,!1);t[nn]===null&&(t[nn]=[]),t[nn].push(e)}function jD(t,e){if(t[nn]===null)return;let n=t[nn].indexOf(e);n!==-1&&t[nn].splice(n,1)}function bi(t){let e=t[he];return It(e)?e[he]:e}var L={lFrame:iv(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function UD(){return L.lFrame.elementDepthCount}function VD(){L.lFrame.elementDepthCount++}function $D(){L.lFrame.elementDepthCount--}function Jm(){return L.bindingsEnabled}function Ui(){return L.skipHydrationRootTNode!==null}function BD(t){return L.skipHydrationRootTNode===t}function HD(t){L.skipHydrationRootTNode=t}function WD(){L.skipHydrationRootTNode=null}function X(){return L.lFrame.lView}function Et(){return L.lFrame.tView}function Ge(t){return L.lFrame.contextLView=t,t[Me]}function Ye(t){return L.lFrame.contextLView=null,t}function Ct(){let t=Xm();for(;t!==null&&t.type===64;)t=t.parent;return t}function Xm(){return L.lFrame.currentTNode}function zD(){let t=L.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Vi(t,e){let n=L.lFrame;n.currentTNode=t,n.isParent=e}function ev(){return L.lFrame.isParent}function qD(){L.lFrame.isParent=!1}function GD(t){return L.lFrame.bindingIndex=t}function Ju(){return L.lFrame.bindingIndex++}function YD(t){let e=L.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function KD(){return L.lFrame.inI18n}function QD(t,e){let n=L.lFrame;n.bindingIndex=n.bindingRootIndex=t,nu(e)}function ZD(){return L.lFrame.currentDirectiveIndex}function nu(t){L.lFrame.currentDirectiveIndex=t}function JD(t){let e=L.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function tv(){return L.lFrame.currentQueryIndex}function Xu(t){L.lFrame.currentQueryIndex=t}function XD(t){let e=t[T];return e.type===2?e.declTNode:e.type===1?t[ct]:null}function nv(t,e,n){if(n&R.SkipSelf){let i=e,s=t;for(;i=i.parent,i===null&&!(n&R.Host);)if(i=XD(s),i===null||(s=s[ki],i.type&10))break;if(i===null)return!1;e=i,t=s}let r=L.lFrame=rv();return r.currentTNode=e,r.lView=t,!0}function ed(t){let e=rv(),n=t[T];L.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function rv(){let t=L.lFrame,e=t===null?null:t.child;return e===null?iv(t):e}function iv(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function sv(){let t=L.lFrame;return L.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var ov=sv;function td(){let t=sv();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Fn(){return L.lFrame.selectedIndex}function xn(t){L.lFrame.selectedIndex=t}function eb(){let t=L.lFrame;return Ku(t.tView,t.selectedIndex)}function av(){return L.lFrame.currentNamespace}var cv=!0;function nd(){return cv}function Dt(t){cv=t}function tb(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=qm(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}function rd(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),u!=null&&(t.destroyHooks??=[]).push(n,u)}}function Fo(t,e,n){lv(t,e,3,n)}function jo(t,e,n,r){(t[E]&3)===n&&lv(t,e,n,r)}function Pl(t,e){let n=t[E];(n&3)===e&&(n&=16383,n+=1,t[E]=n)}function lv(t,e,n,r){let i=r!==void 0?t[Ir]&65535:0,s=r??-1,o=e.length-1,a=0;for(let c=i;c<o;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(t[Ir]+=65536),(a<s||s==-1)&&(nb(t,n,e,c),t[Ir]=(t[Ir]&4294901760)+c+2),c++}function qg(t,e){gt(4,t,e);let n=V(null);try{e.call(t)}finally{V(n),gt(5,t,e)}}function nb(t,e,n,r){let i=n[r]<0,s=n[r+1],o=i?-n[r]:n[r],a=t[o];i?t[E]>>14<t[Ir]>>16&&(t[E]&3)===e&&(t[E]+=16384,qg(a,s)):qg(a,s)}var Dr=-1,Ti=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function rb(t){return t instanceof Ti}function ib(t){return(t.flags&8)!==0}function sb(t){return(t.flags&16)!==0}function uv(t){return t!==Dr}function Yo(t){return t&32767}function ob(t){return t>>16}function Ko(t,e){let n=ob(t),r=e;for(;n>0;)r=r[ki],n--;return r}var ru=!0;function Gg(t){let e=ru;return ru=t,e}var ab=256,dv=ab-1,fv=5,cb=0,mt={};function lb(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(vi)&&(r=n[vi]),r==null&&(r=n[vi]=cb++);let i=r&dv,s=1<<i;e.data[t+(i>>fv)]|=s}function hv(t,e){let n=pv(t,e);if(n!==-1)return n;let r=e[T];r.firstCreatePass&&(t.injectorIndex=e.length,Ol(r.data,t),Ol(e,null),Ol(r.blueprint,null));let i=id(t,e),s=t.injectorIndex;if(uv(i)){let o=Yo(i),a=Ko(i,e),c=a[T].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|c[o+l]}return e[s+8]=i,s}function Ol(t,e){t.push(0,0,0,0,0,0,0,0,e)}function pv(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function id(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=_v(i),r===null)return Dr;if(n++,i=i[ki],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Dr}function ub(t,e,n){lb(t,e,n)}function gv(t,e,n){if(n&R.Optional||t!==void 0)return t;Vu(e,"NodeInjector")}function mv(t,e,n,r){if(n&R.Optional&&r===void 0&&(r=null),!(n&(R.Self|R.Host))){let i=t[Tr],s=Be(void 0);try{return i?i.get(e,r,n&R.Optional):Tm(e,r,n&R.Optional)}finally{Be(s)}}return gv(r,e,n)}function vv(t,e,n,r=R.Default,i){if(t!==null){if(e[E]&2048&&!(r&R.Self)){let o=pb(t,e,n,r,mt);if(o!==mt)return o}let s=yv(t,e,n,r,mt);if(s!==mt)return s}return mv(e,n,r,i)}function yv(t,e,n,r,i){let s=fb(n);if(typeof s=="function"){if(!nv(e,t,r))return r&R.Host?gv(i,n,r):mv(e,n,r,i);try{let o;if(o=s(r),o==null&&!(r&R.Optional))Vu(n);else return o}finally{ov()}}else if(typeof s=="number"){let o=null,a=pv(t,e),c=Dr,l=r&R.Host?e[ke][ct]:null;for((a===-1||r&R.SkipSelf)&&(c=a===-1?id(t,e):e[a+8],c===Dr||!Kg(r,!1)?a=-1:(o=e[T],a=Yo(c),e=Ko(c,e)));a!==-1;){let u=e[T];if(Yg(s,a,u.data)){let d=db(a,e,n,o,r,l);if(d!==mt)return d}c=e[a+8],c!==Dr&&Kg(r,e[T].data[a+8]===l)&&Yg(s,a,e)?(o=u,a=Yo(c),e=Ko(c,e)):a=-1}}return i}function db(t,e,n,r,i,s){let o=e[T],a=o.data[t+8],c=r==null?Fi(a)&&ru:r!=o&&(a.type&3)!==0,l=i&R.Host&&s===a,u=Uo(a,o,n,c,l);return u!==null?Ar(e,o,u,a):mt}function Uo(t,e,n,r,i){let s=t.providerIndexes,o=e.data,a=s&1048575,c=t.directiveStart,l=t.directiveEnd,u=s>>20,d=r?a:a+u,f=i?a+u:l;for(let h=d;h<f;h++){let p=o[h];if(h<c&&n===p||h>=c&&p.type===n)return h}if(i){let h=o[c];if(h&&ji(h)&&h.type===n)return c}return null}function Ar(t,e,n,r){let i=t[n],s=e.data;if(rb(i)){let o=i;o.resolving&&FC(LC(s[n]));let a=Gg(o.canSeeViewProviders);o.resolving=!0;let c,l=o.injectImpl?Be(o.injectImpl):null,u=nv(t,r,R.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&tb(n,s[n],e)}finally{l!==null&&Be(l),Gg(a),o.resolving=!1,ov()}}return i}function fb(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(vi)?t[vi]:void 0;return typeof e=="number"?e>=0?e&dv:hb:e}function Yg(t,e,n){let r=1<<t;return!!(n[e+(t>>fv)]&r)}function Kg(t,e){return!(t&R.Self)&&!(t&R.Host&&e)}var An=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return vv(this._tNode,this._lView,e,fa(r),n)}};function hb(){return new An(Ct(),X())}function sd(t){return ua(()=>{let e=t.prototype.constructor,n=e[Bo]||iu(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let s=i[Bo]||iu(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function iu(t){return _m(t)?()=>{let e=iu(He(t));return e&&e()}:br(t)}function pb(t,e,n,r,i){let s=t,o=e;for(;s!==null&&o!==null&&o[E]&2048&&!(o[E]&512);){let a=yv(s,o,n,r|R.Self,mt);if(a!==mt)return a;let c=s.parent;if(!c){let l=o[$m];if(l){let u=l.get(n,mt,r);if(u!==mt)return u}c=_v(o),o=o[ki]}s=c}return i}function _v(t){let e=t[T],n=e.type;return n===2?e.declTNode:n===1?t[ct]:null}function Qg(t,e=null,n=null,r){let i=wv(t,e,n,r);return i.resolveInjectorInitializers(),i}function wv(t,e=null,n=null,r,i=new Set){let s=[n||sn,gD(t)];return r=r||(typeof t=="object"?void 0:Ne(t)),new wi(s,e||qu(),r||null,i)}var lt=(()=>{let e=class e{static create(r,i){if(Array.isArray(r))return Qg({name:""},i,r,"");{let s=r.name??"";return Qg({name:s},r.parent,r.providers,s)}}};e.THROW_IF_NOT_FOUND=yi,e.NULL=new zo,e.\u0275prov=I({token:e,providedIn:"any",factory:()=>k(Am)}),e.__NG_ELEMENT_ID__=-1;let t=e;return t})();var gb="ngOriginalError";function kl(t){return t[gb]}var Ht=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&kl(e);for(;n&&kl(n);)n=kl(n);return n||null}},Iv=new S("",{providedIn:"root",factory:()=>m(Ht).handleError.bind(void 0)}),Ev=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=mb,e.__NG_ENV_ID__=r=>r;let t=e;return t})(),su=class extends Ev{constructor(e){super(),this._lView=e}onDestroy(e){return Zm(this._lView,e),()=>jD(this._lView,e)}};function mb(){return new su(X())}function vb(){return Mr(Ct(),X())}function Mr(t,e){return new jn(qe(t,e))}var jn=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=vb;let t=e;return t})();function yb(t){return t instanceof jn?t.nativeElement:t}var ou=class extends Ie{constructor(e=!1){super(),this.destroyRef=void 0,this.__isAsync=e,TD()&&(this.destroyRef=m(Ev,{optional:!0})??void 0)}emit(e){let n=V(null);try{super.next(e)}finally{V(n)}}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=Ll(s),i&&(i=Ll(i)),o&&(o=Ll(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof ie&&e.add(a),a}};function Ll(t){return e=>{setTimeout(t,void 0,e)}}var Ae=ou;function _b(){return this._results[Symbol.iterator]()}var au=class t{get changes(){return this._changes??=new Ae}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let n=t.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=_b)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;let r=KC(e);(this._changesDetected=!YC(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}},wb="ngSkipHydration",Ib="ngskiphydration";function Cv(t){let e=t.mergedAttrs;if(e===null)return!1;for(let n=0;n<e.length;n+=2){let r=e[n];if(typeof r=="number")return!1;if(typeof r=="string"&&r.toLowerCase()===Ib)return!0}return!1}function Dv(t){return t.hasAttribute(wb)}function Qo(t){return(t.flags&128)===128}function Eb(t){if(Qo(t))return!0;let e=t.parent;for(;e;){if(Qo(t)||Cv(e))return!0;e=e.parent}return!1}var bv=new Map,Cb=0;function Db(){return Cb++}function bb(t){bv.set(t[pa],t)}function Tb(t){bv.delete(t[pa])}var Zg="__ngContext__";function Pn(t,e){rn(e)?(t[Zg]=e[pa],bb(e)):t[Zg]=e}function Tv(t){return Av(t[Ei])}function Sv(t){return Av(t[st])}function Av(t){for(;t!==null&&!It(t);)t=t[st];return t}var cu;function Nv(t){cu=t}function ma(){if(cu!==void 0)return cu;if(typeof document<"u")return document;throw new C(210,!1)}var va=new S("",{providedIn:"root",factory:()=>Sb}),Sb="ng",od=new S(""),Ke=new S("",{providedIn:"platform",factory:()=>"unknown"});var ad=new S("",{providedIn:"root",factory:()=>ma().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function Ab(){let t=new Un;return m(Ke)==="browser"&&(t.store=Nb(ma(),m(va))),t}var Un=(()=>{let e=class e{constructor(){this.store={},this.onSerializeCallbacks={}}get(r,i){return this.store[r]!==void 0?this.store[r]:i}set(r,i){this.store[r]=i}remove(r){delete this.store[r]}hasKey(r){return this.store.hasOwnProperty(r)}get isEmpty(){return Object.keys(this.store).length===0}onSerialize(r,i){this.onSerializeCallbacks[r]=i}toJson(){for(let r in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(r))try{this.store[r]=this.onSerializeCallbacks[r]()}catch(i){console.warn("Exception in onSerialize callback: ",i)}return JSON.stringify(this.store).replace(/</g,"\\u003C")}};e.\u0275prov=I({token:e,providedIn:"root",factory:Ab});let t=e;return t})();function Nb(t,e){let n=t.getElementById(e+"-state");if(n?.textContent)try{return JSON.parse(n.textContent)}catch(r){console.warn("Exception while restoring TransferState for app "+e,r)}return{}}var Mv="h",Rv="b",lu=function(t){return t.FirstChild="f",t.NextSibling="n",t}(lu||{}),Mb="e",Rb="t",cd="c",xv="x",Zo="r",xb="i",Pb="n",Ob="d",kb="__nghData__",Pv=kb,Fl="ngh",Lb="nghm",Ov=()=>null;function Fb(t,e,n=!1){let r=t.getAttribute(Fl);if(r==null)return null;let[i,s]=r.split("|");if(r=n?s:i,!r)return null;let o=s?`|${s}`:"",a=n?i:o,c={};if(r!==""){let u=e.get(Un,null,{optional:!0});u!==null&&(c=u.get(Pv,[])[Number(r)])}let l={data:c,firstChild:t.firstChild??null};return n&&(l.firstChild=t,ya(l,0,t.nextSibling)),a?t.setAttribute(Fl,a):t.removeAttribute(Fl),l}function jb(){Ov=Fb}function ld(t,e,n=!1){return Ov(t,e,n)}function Ub(t){let e=t._lView;return e[T].type===2?null:(Wm(e)&&(e=e[Re]),e)}function Vb(t){return t.textContent?.replace(/\s/gm,"")}function $b(t){let e=ma(),n=e.createNodeIterator(t,NodeFilter.SHOW_COMMENT,{acceptNode(s){let o=Vb(s);return o==="ngetn"||o==="ngtns"?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}}),r,i=[];for(;r=n.nextNode();)i.push(r);for(let s of i)s.textContent==="ngetn"?s.replaceWith(e.createTextNode("")):s.remove()}function ya(t,e,n){t.segmentHeads??={},t.segmentHeads[e]=n}function uu(t,e){return t.segmentHeads?.[e]??null}function Bb(t,e){let n=t.data,r=n[Mb]?.[e]??null;return r===null&&n[cd]?.[e]&&(r=ud(t,e)),r}function kv(t,e){return t.data[cd]?.[e]??null}function ud(t,e){let n=kv(t,e)??[],r=0;for(let i of n)r+=i[Zo]*(i[xv]??1);return r}function _a(t,e){if(typeof t.disconnectedNodes>"u"){let n=t.data[Ob];t.disconnectedNodes=n?new Set(n):null}return!!t.disconnectedNodes?.has(e)}var xo=new S(""),Lv=!1,Fv=new S("",{providedIn:"root",factory:()=>Lv}),Hb=new S("");var du=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${TC})`}};function dd(t){return t instanceof du?t.changingThisBreaksApplicationSecurity:t}var Wb=/^>|^->|<!--|-->|--!>|<!-$/g,zb=/(<|>)/g,qb="\u200B$1\u200B";function Gb(t){return t.replace(Wb,e=>e.replace(zb,qb))}function jv(t){return t.ownerDocument.defaultView}function Yb(t){return t.ownerDocument.body}function Uv(t){return t instanceof Function?t():t}function Po(t){return(t??m(lt)).get(Ke)==="browser"}var Wt=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Wt||{}),Kb;function fd(t,e){return Kb(t,e)}function Er(t,e,n,r,i){if(r!=null){let s,o=!1;It(r)?s=r:rn(r)&&(o=!0,r=r[Oe]);let a=ot(r);t===0&&n!==null?i==null?Bv(e,n,a):Jo(e,n,a,i||null,!0):t===1&&n!==null?Jo(e,n,a,i||null,!0):t===2?vd(e,a,o):t===3&&e.destroyNode(a),s!=null&&fT(e,t,s,n,i)}}function hd(t,e){return t.createText(e)}function Qb(t,e,n){t.setValue(e,n)}function pd(t,e){return t.createComment(Gb(e))}function wa(t,e,n){return t.createElement(e,n)}function Zb(t,e){Vv(t,e),e[Oe]=null,e[ct]=null}function Jb(t,e,n,r,i,s){r[Oe]=i,r[ct]=e,Ea(t,r,n,1,i,s)}function Vv(t,e){e[yt].changeDetectionScheduler?.notify(1),Ea(t,e,e[oe],2,null,null)}function Xb(t){let e=t[Ei];if(!e)return jl(t[T],t);for(;e;){let n=null;if(rn(e))n=e[Ei];else{let r=e[me];r&&(n=r)}if(!n){for(;e&&!e[st]&&e!==t;)rn(e)&&jl(e[T],e),e=e[he];e===null&&(e=t),rn(e)&&jl(e[T],e),n=e&&e[st]}e=n}}function eT(t,e,n,r){let i=me+r,s=n.length;r>0&&(n[i-1][st]=e),r<s-me?(e[st]=n[i],Sm(n,me+r,e)):(n.push(e),e[st]=null),e[he]=n;let o=e[Li];o!==null&&n!==o&&tT(o,e);let a=e[$t];a!==null&&a.insertView(t),tu(e),e[E]|=128}function tT(t,e){let n=t[Sr],i=e[he][he][ke];e[ke]!==i&&(t[E]|=Gu.HasTransplantedViews),n===null?t[Sr]=[e]:n.push(e)}function $v(t,e){let n=t[Sr],r=n.indexOf(e);n.splice(r,1)}function Si(t,e){if(t.length<=me)return;let n=me+e,r=t[n];if(r){let i=r[Li];i!==null&&i!==t&&$v(i,r),e>0&&(t[n-1][st]=r[st]);let s=Wo(t,me+e);Zb(r[T],r);let o=s[$t];o!==null&&o.detachView(s[T]),r[he]=null,r[st]=null,r[E]&=-129}return r}function Ia(t,e){if(!(e[E]&256)){let n=e[oe];n.destroyNode&&Ea(t,e,n,3,null,null),Xb(e)}}function jl(t,e){if(e[E]&256)return;let n=V(null);try{e[E]&=-129,e[E]|=256,e[Rn]&&ig(e[Rn]),rT(t,e),nT(t,e),e[T].type===1&&e[oe].destroy();let r=e[Li];if(r!==null&&It(e[he])){r!==e[he]&&$v(r,e);let i=e[$t];i!==null&&i.detachView(t)}Tb(e)}finally{V(n)}}function nT(t,e){let n=t.cleanup,r=e[Ii];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[n[s+1]];n[s].call(o)}r!==null&&(e[Ii]=null);let i=e[nn];if(i!==null){e[nn]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function rT(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof Ti)){let s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],c=s[o+1];gt(4,a,c);try{c.call(a)}finally{gt(5,a,c)}}else{gt(4,i,s);try{s.call(i)}finally{gt(5,i,s)}}}}}function iT(t,e,n){return sT(t,e.parent,n)}function sT(t,e,n){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return n[Oe];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=t.data[r.directiveStart+i];if(s===vt.None||s===vt.Emulated)return null}return qe(r,n)}}function Jo(t,e,n,r,i){t.insertBefore(e,n,r,i)}function Bv(t,e,n){t.appendChild(e,n)}function Jg(t,e,n,r,i){r!==null?Jo(t,e,n,r,i):Bv(t,e,n)}function oT(t,e,n,r){t.removeChild(e,n,r)}function gd(t,e){return t.parentNode(e)}function aT(t,e){return t.nextSibling(e)}function cT(t,e,n){return uT(t,e,n)}function lT(t,e,n){return t.type&40?qe(t,n):null}var uT=lT,Xg;function md(t,e,n,r){let i=iT(t,r,e),s=e[oe],o=r.parent||e[ct],a=cT(o,r,e);if(i!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)Jg(s,i,n[c],a,!1);else Jg(s,i,n,a,!1);Xg!==void 0&&Xg(s,r,e,n,i)}function Vo(t,e){if(e!==null){let n=e.type;if(n&3)return qe(e,t);if(n&4)return fu(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return Vo(t,r);{let i=t[e.index];return It(i)?fu(-1,i):ot(i)}}else{if(n&32)return fd(e,t)()||ot(t[e.index]);{let r=Hv(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=bi(t[ke]);return Vo(i,r)}else return Vo(t,e.next)}}}return null}function Hv(t,e){if(e!==null){let r=t[ke][ct],i=e.projection;return r.projection[i]}return null}function fu(t,e){let n=me+t+1;if(n<e.length){let r=e[n],i=r[T].firstChild;if(i!==null)return Vo(r,i)}return e[Bt]}function vd(t,e,n){let r=gd(t,e);r&&oT(t,r,e,n)}function Wv(t){t.textContent=""}function yd(t,e,n,r,i,s,o){for(;n!=null;){let a=r[n.index],c=n.type;if(o&&e===0&&(a&&Pn(ot(a),r),n.flags|=2),(n.flags&32)!==32)if(c&8)yd(t,e,n.child,r,i,s,!1),Er(e,t,i,a,s);else if(c&32){let l=fd(n,r),u;for(;u=l();)Er(e,t,i,u,s);Er(e,t,i,a,s)}else c&16?dT(t,e,r,n,i,s):Er(e,t,i,a,s);n=o?n.projectionNext:n.next}}function Ea(t,e,n,r,i,s){yd(n,r,t.firstChild,e,i,s,!1)}function dT(t,e,n,r,i,s){let o=n[ke],c=o[ct].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let u=c[l];Er(e,t,i,u,s)}else{let l=c,u=o[he];Qo(r)&&(l.flags|=128),yd(t,e,l,u,i,s,!0)}}function fT(t,e,n,r,i){let s=n[Bt],o=ot(n);s!==o&&Er(e,t,r,s,i);for(let a=me;a<n.length;a++){let c=n[a];Ea(c[T],c,t,e,r,s)}}function hT(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let s=r.indexOf("-")===-1?void 0:Wt.DashCase;i==null?t.removeStyle(n,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Wt.Important),t.setStyle(n,r,i,s))}}function pT(t,e,n){t.setAttribute(e,"style",n)}function zv(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function qv(t,e,n){let{mergedAttrs:r,classes:i,styles:s}=n;r!==null&&Kl(t,e,r),i!==null&&zv(t,e,i),s!==null&&pT(t,e,s)}var Rr={};function bt(t=1){Gv(Et(),X(),Fn()+t,!1)}function Gv(t,e,n,r){if(!r)if((e[E]&3)===3){let s=t.preOrderCheckHooks;s!==null&&Fo(e,s,n)}else{let s=t.preOrderHooks;s!==null&&jo(e,s,0,n)}xn(n)}function ut(t,e=R.Default){let n=X();if(n===null)return k(t,e);let r=Ct();return vv(r,n,He(t),e)}function Yv(t,e,n,r,i,s){let o=V(null);try{let a=null;i&on.SignalBased&&(a=e[r][eg]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),i&on.HasDecoratorInputTransform&&(s=t.inputTransforms[r].call(e,s)),t.setInput!==null?t.setInput(e,a,s,n,r):zm(e,a,r,s)}finally{V(o)}}function gT(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)xn(~i);else{let s=i,o=n[++r],a=n[++r];QD(o,s);let c=e[s];a(2,c)}}}finally{xn(-1)}}function Ca(t,e,n,r,i,s,o,a,c,l,u){let d=e.blueprint.slice();return d[Oe]=i,d[E]=r|4|128|8|64,(l!==null||t&&t[E]&2048)&&(d[E]|=2048),Qm(d),d[he]=d[ki]=t,d[Me]=n,d[yt]=o||t&&t[yt],d[oe]=a||t&&t[oe],d[Tr]=c||t&&t[Tr]||null,d[ct]=s,d[pa]=Db(),d[ze]=u,d[$m]=l,d[ke]=e.type==2?t[ke]:d,d}function Da(t,e,n,r,i){let s=t.data[e];if(s===null)s=mT(t,e,n,r,i),KD()&&(s.flags|=32);else if(s.type&64){s.type=n,s.value=r,s.attrs=i;let o=zD();s.injectorIndex=o===null?-1:o.injectorIndex}return Vi(s,!0),s}function mT(t,e,n,r,i){let s=Xm(),o=ev(),a=o?s:s&&s.parent,c=t.data[e]=CT(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=c),s!==null&&(o?s.child==null&&c.parent!==null&&(s.child=c):s.next===null&&(s.next=c,c.prev=s)),c}function Kv(t,e,n,r){if(n===0)return-1;let i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function Qv(t,e,n,r,i){let s=Fn(),o=r&2;try{xn(-1),o&&e.length>Re&&Gv(t,e,Re,!1),gt(o?2:0,i),n(r,i)}finally{xn(s),gt(o?3:1,i)}}function Zv(t,e,n){if(Hm(e)){let r=V(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=t.data[o];if(a.contentQueries){let c=n[o];a.contentQueries(1,c,o)}}}finally{V(r)}}}function Jv(t,e,n){Jm()&&(MT(t,e,n,qe(n,e)),(n.flags&64)===64&&iy(t,e,n))}function Xv(t,e,n=qe){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?n(e,t):t[o];t[i++]=a}}}function ey(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=_d(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function _d(t,e,n,r,i,s,o,a,c,l,u){let d=Re+r,f=d+i,h=vT(d,f),p=typeof l=="function"?l():l;return h[T]={type:t,blueprint:h,template:n,queries:null,viewQuery:a,declTNode:e,data:h.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:p,incompleteFirstPass:!1,ssrId:u}}function vT(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:Rr);return n}function yT(t,e,n,r){let s=r.get(Fv,Lv)||n===vt.ShadowDom,o=t.selectRootElement(e,s);return _T(o),o}function _T(t){ty(t)}var ty=()=>null;function wT(t){Dv(t)?Wv(t):$b(t)}function IT(){ty=wT}function ET(t,e,n,r){let i=ay(e);i.push(n),t.firstCreatePass&&cy(t).push(r,i.length-1)}function CT(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,a=0;return Ui()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function em(t,e,n,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let a,c=on.None;Array.isArray(o)?(a=o[0],c=o[1]):a=o;let l=s;if(i!==null){if(!i.hasOwnProperty(s))continue;l=i[s]}t===0?tm(r,n,l,a,c):tm(r,n,l,a)}return r}function tm(t,e,n,r,i){let s;t.hasOwnProperty(n)?(s=t[n]).push(e,r):s=t[n]=[e,r],i!==void 0&&s.push(i)}function DT(t,e,n){let r=e.directiveStart,i=e.directiveEnd,s=t.data,o=e.attrs,a=[],c=null,l=null;for(let u=r;u<i;u++){let d=s[u],f=n?n.get(d):null,h=f?f.inputs:null,p=f?f.outputs:null;c=em(0,d.inputs,u,c,h),l=em(1,d.outputs,u,l,p);let y=c!==null&&o!==null&&!Hu(e)?UT(c,u,o):null;a.push(y)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function bT(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function TT(t,e,n,r,i,s,o,a){let c=qe(e,n),l=e.inputs,u;!a&&l!=null&&(u=l[r])?(wd(t,n,u,r,i),Fi(e)&&ST(n,e.index)):e.type&3?(r=bT(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(c,r,i)):e.type&12}function ST(t,e){let n=Ln(e,t);n[E]&16||(n[E]|=64)}function ny(t,e,n,r){if(Jm()){let i=r===null?null:{"":-1},s=xT(t,n),o,a;s===null?o=a=null:[o,a]=s,o!==null&&ry(t,e,n,o,i,a),i&&PT(n,r,i)}n.mergedAttrs=Bu(n.mergedAttrs,n.attrs)}function ry(t,e,n,r,i,s){for(let l=0;l<r.length;l++)ub(hv(n,e),t,r[l].type);kT(n,t.data.length,r.length);for(let l=0;l<r.length;l++){let u=r[l];u.providersResolver&&u.providersResolver(u)}let o=!1,a=!1,c=Kv(t,e,r.length,null);for(let l=0;l<r.length;l++){let u=r[l];n.mergedAttrs=Bu(n.mergedAttrs,u.hostAttrs),LT(t,n,e,c,u),OT(c,u,i),u.contentQueries!==null&&(n.flags|=4),(u.hostBindings!==null||u.hostAttrs!==null||u.hostVars!==0)&&(n.flags|=64);let d=u.type.prototype;!o&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}DT(t,n,s)}function AT(t,e,n,r,i){let s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;o===null&&(o=t.hostBindingOpCodes=[]);let a=~e.index;NT(o)!=a&&o.push(a),o.push(n,r,s)}}function NT(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function MT(t,e,n,r){let i=n.directiveStart,s=n.directiveEnd;Fi(n)&&FT(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||hv(n,e),Pn(r,e);let o=n.initialInputs;for(let a=i;a<s;a++){let c=t.data[a],l=Ar(e,t,a,n);if(Pn(l,e),o!==null&&jT(e,a-i,l,c,n,o),ji(c)){let u=Ln(n.index,e);u[Me]=Ar(e,t,a,n)}}}function iy(t,e,n){let r=n.directiveStart,i=n.directiveEnd,s=n.index,o=ZD();try{xn(s);for(let a=r;a<i;a++){let c=t.data[a],l=e[a];nu(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&RT(c,l)}}finally{xn(-1),nu(o)}}function RT(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function xT(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let s=0;s<n.length;s++){let o=n[s];if(oD(e,o.selectors,!1))if(r||(r=[]),ji(o))if(o.findHostDirectiveDefs!==null){let a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o);let c=a.length;hu(t,e,c)}else r.unshift(o),hu(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function hu(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function PT(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let s=n[e[i+1]];if(s==null)throw new C(-301,!1);r.push(e[i],s)}}}function OT(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;ji(e)&&(n[""]=t)}}function kT(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function LT(t,e,n,r,i){t.data[r]=i;let s=i.factory||(i.factory=br(i.type,!0)),o=new Ti(s,ji(i),ut);t.blueprint[r]=o,n[r]=o,AT(t,e,r,Kv(t,n,i.hostVars,Rr),i)}function FT(t,e,n){let r=qe(e,t),i=ey(n),s=t[yt].rendererFactory,o=16;n.signals?o=4096:n.onPush&&(o=64);let a=ba(t,Ca(t,i,null,o,r,e,null,s.createRenderer(r,n),null,null,null));t[e.index]=a}function jT(t,e,n,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let c=o[a++],l=o[a++],u=o[a++],d=o[a++];Yv(r,n,c,l,u,d)}}function UT(t,e,n){let r=null,i=0;for(;i<n.length;){let s=n[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(t.hasOwnProperty(s)){r===null&&(r=[]);let o=t[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],n[i+1]);break}}i+=2}return r}function sy(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function oy(t,e){let n=t.contentQueries;if(n!==null){let r=V(null);try{for(let i=0;i<n.length;i+=2){let s=n[i],o=n[i+1];if(o!==-1){let a=t.data[o];Xu(s),a.contentQueries(2,e[o],o)}}}finally{V(r)}}}function ba(t,e){return t[Ei]?t[Wg][st]=e:t[Ei]=e,t[Wg]=e,e}function pu(t,e,n){Xu(0);let r=V(null);try{e(t,n)}finally{V(r)}}function ay(t){return t[Ii]||(t[Ii]=[])}function cy(t){return t.cleanup||(t.cleanup=[])}function ly(t,e){let n=t[Tr],r=n?n.get(Ht,null):null;r&&r.handleError(e)}function wd(t,e,n,r,i){for(let s=0;s<n.length;){let o=n[s++],a=n[s++],c=n[s++],l=e[o],u=t.data[o];Yv(u,l,r,a,c,i)}}function VT(t,e,n){let r=Km(e,t);Qb(t[oe],r,n)}function $T(t,e){let n=Ln(e,t),r=n[T];BT(r,n);let i=n[Oe];i!==null&&n[ze]===null&&(n[ze]=ld(i,n[Tr])),Id(r,n,n[Me])}function BT(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function Id(t,e,n){ed(e);try{let r=t.viewQuery;r!==null&&pu(1,r,n);let i=t.template;i!==null&&Qv(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[$t]?.finishViewCreation(t),t.staticContentQueries&&oy(t,e),t.staticViewQueries&&pu(2,t.viewQuery,n);let s=t.components;s!==null&&HT(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[E]&=-5,td()}}function HT(t,e){for(let n=0;n<e.length;n++)$T(t,e[n])}function Ed(t,e,n,r){let i=V(null);try{let s=e.tView,a=t[E]&4096?4096:16,c=Ca(t,s,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];c[Li]=l;let u=t[$t];return u!==null&&(c[$t]=u.createEmbeddedView(s)),Id(s,c,n),c}finally{V(i)}}function WT(t,e){let n=me+e;if(n<t.length)return t[n]}function Xo(t,e){return!e||e.firstChild===null||Qo(t)}function Cd(t,e,n,r=!0){let i=e[T];if(eT(i,e,t,n),r){let o=fu(n,t),a=e[oe],c=gd(a,t[Bt]);c!==null&&Jb(i,t[ct],a,e,c,o)}let s=e[ze];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function zT(t,e){let n=Si(t,e);return n!==void 0&&Ia(n[T],n),n}function ea(t,e,n,r,i=!1){for(;n!==null;){let s=e[n.index];s!==null&&r.push(ot(s)),It(s)&&qT(s,r);let o=n.type;if(o&8)ea(t,e,n.child,r);else if(o&32){let a=fd(n,e),c;for(;c=a();)r.push(c)}else if(o&16){let a=Hv(e,n);if(Array.isArray(a))r.push(...a);else{let c=bi(e[ke]);ea(c[T],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function qT(t,e){for(let n=me;n<t.length;n++){let r=t[n],i=r[T].firstChild;i!==null&&ea(r[T],r,i,e)}t[Bt]!==t[Oe]&&e.push(t[Bt])}var uy=[];function GT(t){return t[Rn]??YT(t)}function YT(t){let e=uy.pop()??Object.create(QT);return e.lView=t,e}function KT(t){t.lView[Rn]!==t&&(t.lView=null,uy.push(t))}var QT=ee(_({},tg),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Di(t.lView)},consumerOnSignalRead(){this.lView[Rn]=this}}),dy=100;function fy(t,e=!0,n=0){let r=t[yt],i=r.rendererFactory,s=!1;s||i.begin?.();try{ZT(t,n)}catch(o){throw e&&ly(t,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function ZT(t,e){gu(t,e);let n=0;for(;Zu(t);){if(n===dy)throw new C(103,!1);n++,gu(t,1)}}function JT(t,e,n,r){let i=e[E];if((i&256)===256)return;let s=!1;!s&&e[yt].inlineEffectRunner?.flush(),ed(e);let o=null,a=null;!s&&XT(t)&&(a=GT(e),o=ng(a));try{Qm(e),GD(t.bindingStartIndex),n!==null&&Qv(t,e,n,2,r);let c=(i&3)===3;if(!s)if(c){let d=t.preOrderCheckHooks;d!==null&&Fo(e,d,null)}else{let d=t.preOrderHooks;d!==null&&jo(e,d,0,null),Pl(e,0)}if(eS(e),hy(e,0),t.contentQueries!==null&&oy(t,e),!s)if(c){let d=t.contentCheckHooks;d!==null&&Fo(e,d)}else{let d=t.contentHooks;d!==null&&jo(e,d,1),Pl(e,1)}gT(t,e);let l=t.components;l!==null&&gy(e,l,0);let u=t.viewQuery;if(u!==null&&pu(2,u,r),!s)if(c){let d=t.viewCheckHooks;d!==null&&Fo(e,d)}else{let d=t.viewHooks;d!==null&&jo(e,d,2),Pl(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[xl]){for(let d of e[xl])d();e[xl]=null}s||(e[E]&=-73)}catch(c){throw Di(e),c}finally{a!==null&&(rg(a,o),KT(a)),td()}}function XT(t){return t.type!==2}function hy(t,e){for(let n=Tv(t);n!==null;n=Sv(n))for(let r=me;r<n.length;r++){let i=n[r];py(i,e)}}function eS(t){for(let e=Tv(t);e!==null;e=Sv(e)){if(!(e[E]&Gu.HasTransplantedViews))continue;let n=e[Sr];for(let r=0;r<n.length;r++){let i=n[r],s=i[he];FD(i)}}}function tS(t,e,n){let r=Ln(e,t);py(r,n)}function py(t,e){Qu(t)&&gu(t,e)}function gu(t,e){let r=t[T],i=t[E],s=t[Rn],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&al(s)),s&&(s.dirty=!1),t[E]&=-9217,o)JT(r,t,r.template,t[Me]);else if(i&8192){hy(t,1);let a=r.components;a!==null&&gy(t,a,1)}}function gy(t,e,n){for(let r=0;r<e.length;r++)tS(t,e[r],n)}function Dd(t){for(t[yt].changeDetectionScheduler?.notify();t;){t[E]|=64;let e=bi(t);if(Wm(t)&&!e)return t;t=e}return null}var On=class{get rootNodes(){let e=this._lView,n=e[T];return ea(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Me]}set context(e){this._lView[Me]=e}get destroyed(){return(this._lView[E]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[he];if(It(e)){let n=e[qo],r=n?n.indexOf(this):-1;r>-1&&(Si(e,r),Wo(n,r))}this._attachedToViewContainer=!1}Ia(this._lView[T],this._lView)}onDestroy(e){Zm(this._lView,e)}markForCheck(){Dd(this._cdRefInjectingView||this._lView)}detach(){this._lView[E]&=-129}reattach(){tu(this._lView),this._lView[E]|=128}detectChanges(){this._lView[E]|=1024,fy(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new C(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,Vv(this._lView[T],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new C(902,!1);this._appRef=e,tu(this._lView)}},Ai=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=iS;let t=e;return t})(),nS=Ai,rS=class extends nS{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=Ed(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new On(i)}};function iS(){return bd(Ct(),X())}function bd(t,e){return t.type&4?new rS(e,t,Mr(t,e)):null}function my(t){let e=t[Ci]??[],r=t[he][oe];for(let i of e)sS(i,r);t[Ci]=sn}function sS(t,e){let n=0,r=t.firstChild;if(r){let i=t.data[Zo];for(;n<i;){let s=r.nextSibling;vd(e,r,!1),r=s,n++}}}function vy(t){my(t);for(let e=me;e<t.length;e++)ta(t[e])}function oS(t){let e=t[ze]?.i18nNodes;if(e){let n=t[oe];for(let r of e.values())vd(n,r,!1);t[ze].i18nNodes=void 0}}function ta(t){oS(t);let e=t[T];for(let n=Re;n<e.bindingStartIndex;n++)if(It(t[n])){let r=t[n];vy(r)}else rn(t[n])&&ta(t[n])}function aS(t){let e=t._views;for(let n of e){let r=Ub(n);if(r!==null&&r[Oe]!==null)if(rn(r))ta(r);else{let i=r[Oe];ta(i),vy(r)}}}var cS=new RegExp(`^(\\d+)*(${Rv}|${Mv})*(.*)`);function lS(t){let e=t.match(cS),[n,r,i,s]=e,o=r?parseInt(r,10):i,a=[];for(let[c,l,u]of s.matchAll(/(f|n)(\d*)/g)){let d=parseInt(u,10)||1;a.push(l,d)}return[o,...a]}function uS(t){return!t.prev&&t.parent?.type===8}function Ul(t){return t.index-Re}function dS(t,e){let n=t.i18nNodes;if(n){let r=n.get(e);return r&&n.delete(e),r}return null}function Ta(t,e,n,r){let i=Ul(r),s=dS(t,i);if(!s){let o=t.data[Pb];if(o?.[i])s=hS(o[i],n);else if(e.firstChild===r)s=t.firstChild;else{let a=r.prev===null,c=r.prev??r.parent;if(uS(r)){let l=Ul(r.parent);s=uu(t,l)}else{let l=qe(c,n);if(a)s=l.firstChild;else{let u=Ul(c),d=uu(t,u);if(c.type===2&&d){let h=ud(t,u)+1;s=Sa(h,d)}else s=l.nextSibling}}}}return s}function Sa(t,e){let n=e;for(let r=0;r<t;r++)n=n.nextSibling;return n}function fS(t,e){let n=t;for(let r=0;r<e.length;r+=2){let i=e[r],s=e[r+1];for(let o=0;o<s;o++)switch(i){case lu.FirstChild:n=n.firstChild;break;case lu.NextSibling:n=n.nextSibling;break}}return n}function hS(t,e){let[n,...r]=lS(t),i;if(n===Mv)i=e[ke][Oe];else if(n===Rv)i=Yb(e[ke][Oe]);else{let s=Number(n);i=ot(e[s+Re])}return fS(i,r)}function pS(t,e){let n=[];for(let r of e)for(let i=0;i<(r[xv]??1);i++){let s={data:r,firstChild:null};r[Zo]>0&&(s.firstChild=t,t=Sa(r[Zo],t)),n.push(s)}return[t,n]}var yy=()=>null;function gS(t,e){let n=t[Ci];return!e||n===null||n.length===0?null:n[0].data[xb]===e?n.shift():(my(t),null)}function mS(){yy=gS}function na(t,e){return yy(t,e)}var mu=class{},vu=class{},ra=class{};function vS(t){let e=Error(`No component factory found for ${Ne(t)}.`);return e[yS]=t,e}var yS="ngComponent";var yu=class{resolveComponentFactory(e){throw vS(e)}},Aa=(()=>{let e=class e{};e.NULL=new yu;let t=e;return t})(),Ni=class{};var _S=(()=>{let e=class e{};e.\u0275prov=I({token:e,providedIn:"root",factory:()=>null});let t=e;return t})(),Vl={};var nm=new Set;function xr(t){nm.has(t)||(nm.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function rm(...t){}function wS(){let t=typeof mi.requestAnimationFrame=="function",e=mi[t?"requestAnimationFrame":"setTimeout"],n=mi[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){let r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);let i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}var Y=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ae(!1),this.onMicrotaskEmpty=new Ae(!1),this.onStable=new Ae(!1),this.onError=new Ae(!1),typeof Zone>"u")throw new C(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=wS().nativeRequestAnimationFrame,CS(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new C(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new C(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,IS,rm,rm);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},IS={};function Td(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function ES(t){t.isCheckStableRunning||t.lastRequestAnimationFrameId!==-1||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(mi,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,_u(t),t.isCheckStableRunning=!0,Td(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),_u(t))}function CS(t){let e=()=>{ES(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{if(DS(a))return n.invokeTask(i,s,o,a);try{return im(t),n.invokeTask(i,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),sm(t)}},onInvoke:(n,r,i,s,o,a,c)=>{try{return im(t),n.invoke(i,s,o,a,c)}finally{t.shouldCoalesceRunChangeDetection&&e(),sm(t)}},onHasTask:(n,r,i,s)=>{n.hasTask(i,s),r===i&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,_u(t),Td(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,r,i,s)=>(n.handleError(i,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function _u(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.lastRequestAnimationFrameId!==-1?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function im(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function sm(t){t._nesting--,Td(t)}function DS(t){return!Array.isArray(t)||t.length!==1?!1:t[0].data?.__ignore_ng_zone__===!0}var _y=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let i of r)i()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=I({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function wu(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=Og(i,a);else if(s==2){let c=a,l=e[++o];r=Og(r,c+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var ia=class extends Aa{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=Mn(e);return new Mi(n,this.ngModule)}};function om(t){let e=[];for(let n in t){if(!t.hasOwnProperty(n))continue;let r=t[n];r!==void 0&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:n})}return e}function bS(t){let e=t.toLowerCase();return e==="svg"?RD:e==="math"?xD:null}var Iu=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=fa(r);let i=this.injector.get(e,Vl,r);return i!==Vl||n===Vl?i:this.parentInjector.get(e,n,r)}},Mi=class extends ra{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=om(e.inputs);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return om(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=uD(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let s=V(null);try{i=i||this.ngModule;let o=i instanceof We?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new Iu(e,o):e,c=a.get(Ni,null);if(c===null)throw new C(407,!1);let l=a.get(_S,null),u=a.get(_y,null),d=a.get(mu,null),f={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,afterRenderEventManager:u,changeDetectionScheduler:d},h=c.createRenderer(null,this.componentDef),p=this.componentDef.selectors[0][0]||"div",y=r?yT(h,r,this.componentDef.encapsulation,a):wa(h,p,bS(p)),w=512;this.componentDef.signals?w|=4096:this.componentDef.onPush||(w|=16);let A=null;y!==null&&(A=ld(y,a,!0));let re=_d(0,null,null,1,0,null,null,null,null,null,null),J=Ca(null,re,null,w,null,null,f,h,a,null,A);ed(J);let Te,Ft;try{let we=this.componentDef,jt,fi=null;we.findHostDirectiveDefs?(jt=[],fi=new Map,we.findHostDirectiveDefs(we,jt,fi),jt.push(we)):jt=[we];let hi=TS(J,y),sl=SS(hi,y,we,jt,J,f,h);Ft=Ku(re,Re),y&&MS(h,we,y,r),n!==void 0&&RS(Ft,this.ngContentSelectors,n),Te=NS(sl,we,jt,fi,J,[xS]),Id(re,J,null)}finally{td()}return new Eu(this.componentType,Te,Mr(Ft,J),J,Ft)}finally{V(s)}}},Eu=class extends vu{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new On(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let s=this._rootLView;wd(s[T],s,i,e,n),this.previousInputValues.set(e,n);let o=Ln(this._tNode.index,s);Dd(o)}}get injector(){return new An(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function TS(t,e){let n=t[T],r=Re;return t[r]=e,Da(n,r,2,"#host",null)}function SS(t,e,n,r,i,s,o){let a=i[T];AS(r,t,e,o);let c=null;e!==null&&(c=ld(e,i[Tr]));let l=s.rendererFactory.createRenderer(e,n),u=16;n.signals?u=4096:n.onPush&&(u=64);let d=Ca(i,ey(n),null,u,i[t.index],t,s,l,null,null,c);return a.firstCreatePass&&hu(a,t,r.length-1),ba(i,d),i[t.index]=d}function AS(t,e,n,r){for(let i of t)e.mergedAttrs=Bu(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(wu(e,e.mergedAttrs,!0),n!==null&&qv(r,n,e))}function NS(t,e,n,r,i,s){let o=Ct(),a=i[T],c=qe(o,i);ry(a,i,o,n,null,r);for(let u=0;u<n.length;u++){let d=o.directiveStart+u,f=Ar(i,a,d,o);Pn(f,i)}iy(a,i,o),c&&Pn(c,i);let l=Ar(i,a,o.directiveStart+o.componentOffset,o);if(t[Me]=i[Me]=l,s!==null)for(let u of s)u(l,e);return Zv(a,o,i),l}function MS(t,e,n,r){if(r)Kl(t,n,["ng-version","17.3.11"]);else{let{attrs:i,classes:s}=dD(e.selectors[0]);i&&Kl(t,n,i),s&&s.length>0&&zv(t,n,s.join(" "))}}function RS(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let s=n[i];r.push(s!=null?Array.from(s):null)}}function xS(){let t=Ct();rd(X()[T],t)}var Pr=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=PS;let t=e;return t})();function PS(){let t=Ct();return Iy(t,X())}var OS=Pr,wy=class extends OS{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Mr(this._hostTNode,this._hostLView)}get injector(){return new An(this._hostTNode,this._hostLView)}get parentInjector(){let e=id(this._hostTNode,this._hostLView);if(uv(e)){let n=Ko(e,this._hostLView),r=Yo(e),i=n[T].data[r+8];return new An(i,n)}else return new An(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=am(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-me}createEmbeddedView(e,n,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=na(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},s,o);return this.insertImpl(a,i,Xo(this._hostTNode,o)),a}createComponent(e,n,r,i,s){let o=e&&!SD(e),a;if(o)a=n;else{let p=n||{};a=p.index,r=p.injector,i=p.projectableNodes,s=p.environmentInjector||p.ngModuleRef}let c=o?e:new Mi(Mn(e)),l=r||this.parentInjector;if(!s&&c.ngModule==null){let y=(o?l:this.parentInjector).get(We,null);y&&(s=y)}let u=Mn(c.componentType??{}),d=na(this._lContainer,u?.id??null),f=d?.firstChild??null,h=c.create(l,i,f,s);return this.insertImpl(h.hostView,a,Xo(this._hostTNode,d)),h}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(LD(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[he],l=new wy(c,c[ct],c[he]);l.detach(l.indexOf(e))}}let s=this._adjustIndex(n),o=this._lContainer;return Cd(o,i,s,r),e.attachToViewContainerRef(),Sm($l(o),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=am(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=Si(this._lContainer,n);r&&(Wo($l(this._lContainer),n),Ia(r[T],r))}detach(e){let n=this._adjustIndex(e,-1),r=Si(this._lContainer,n);return r&&Wo($l(this._lContainer),n)!=null?new On(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function am(t){return t[qo]}function $l(t){return t[qo]||(t[qo]=[])}function Iy(t,e){let n,r=e[t.index];return It(r)?n=r:(n=sy(r,e,null,t),e[t.index]=n,ba(e,n)),Ey(n,e,t,r),new wy(n,t,e)}function kS(t,e){let n=t[oe],r=n.createComment(""),i=qe(e,t),s=gd(n,i);return Jo(n,s,r,aT(n,i),!1),r}var Ey=Cy,Sd=()=>!1;function LS(t,e,n){return Sd(t,e,n)}function Cy(t,e,n,r){if(t[Bt])return;let i;n.type&8?i=ot(r):i=kS(e,n),t[Bt]=i}function FS(t,e,n){if(t[Bt]&&t[Ci])return!0;let r=n[ze],i=e.index-Re;if(!r||Eb(e)||_a(r,i))return!1;let o=uu(r,i),a=r.data[cd]?.[i],[c,l]=pS(o,a);return t[Bt]=c,t[Ci]=l,!0}function jS(t,e,n,r){Sd(t,n,e)||Cy(t,e,n,r)}function US(){Ey=jS,Sd=FS}var Cu=class t{constructor(e){this.queryList=e,this.matches=null}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},Du=class t{constructor(e=[]){this.queries=e}createEmbeddedView(e){let n=e.queries;if(n!==null){let r=e.contentQueries!==null?e.contentQueries[0]:n.length,i=[];for(let s=0;s<r;s++){let o=n.getByIndex(s),a=this.queries[o.indexInDeclarationView];i.push(a.clone())}return new t(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)Ad(e,n).matches!==null&&this.queries[n].setDirty()}},bu=class{constructor(e,n,r=null){this.flags=n,this.read=r,typeof e=="string"?this.predicate=GS(e):this.predicate=e}},Tu=class t{constructor(e=[]){this.queries=e}elementStart(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let r=0;r<this.length;r++){let i=n!==null?n.length:0,s=this.getByIndex(r).embeddedTView(e,i);s&&(s.indexInDeclarationView=r,n!==null?n.push(s):n=[s])}return n!==null?new t(n):null}template(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},Su=class t{constructor(e,n=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==n;)r=r.parent;return n===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,n){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let s=r[i];this.matchTNodeWithReadOption(e,n,VS(n,s)),this.matchTNodeWithReadOption(e,n,Uo(n,e,s,!1,!1))}else r===Ai?n.type&4&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,Uo(n,e,r,!1,!1))}matchTNodeWithReadOption(e,n,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===jn||i===Pr||i===Ai&&n.type&4)this.addMatch(n.index,-2);else{let s=Uo(n,e,i,!1,!1);s!==null&&this.addMatch(n.index,s)}else this.addMatch(n.index,r)}}addMatch(e,n){this.matches===null?this.matches=[e,n]:this.matches.push(e,n)}};function VS(t,e){let n=t.localNames;if(n!==null){for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1]}return null}function $S(t,e){return t.type&11?Mr(t,e):t.type&4?bd(t,e):null}function BS(t,e,n,r){return n===-1?$S(e,t):n===-2?HS(t,e,r):Ar(t,t[T],n,e)}function HS(t,e,n){if(n===jn)return Mr(e,t);if(n===Ai)return bd(e,t);if(n===Pr)return Iy(e,t)}function Dy(t,e,n,r){let i=e[$t].queries[r];if(i.matches===null){let s=t.data,o=n.matches,a=[];for(let c=0;o!==null&&c<o.length;c+=2){let l=o[c];if(l<0)a.push(null);else{let u=s[l];a.push(BS(e,u,o[c+1],n.metadata.read))}}i.matches=a}return i.matches}function Au(t,e,n,r){let i=t.queries.getByIndex(n),s=i.matches;if(s!==null){let o=Dy(t,e,i,n);for(let a=0;a<s.length;a+=2){let c=s[a];if(c>0)r.push(o[a/2]);else{let l=s[a+1],u=e[-c];for(let d=me;d<u.length;d++){let f=u[d];f[Li]===f[he]&&Au(f[T],f,l,r)}if(u[Sr]!==null){let d=u[Sr];for(let f=0;f<d.length;f++){let h=d[f];Au(h[T],h,l,r)}}}}}return r}function WS(t,e){return t[$t].queries[e].queryList}function zS(t,e,n){let r=new au((n&4)===4);return ET(t,e,r,r.destroy),(e[$t]??=new Du).queries.push(new Cu(r))-1}function qS(t,e,n){let r=Et();return r.firstCreatePass&&(YS(r,new bu(t,e,n),-1),(e&2)===2&&(r.staticViewQueries=!0)),zS(r,X(),e)}function GS(t){return t.split(",").map(e=>e.trim())}function YS(t,e,n){t.queries===null&&(t.queries=new Tu),t.queries.track(new Su(e,n))}function Ad(t,e){return t.queries.getByIndex(e)}function KS(t,e){let n=t[T],r=Ad(n,e);return r.crossesNgTemplate?Au(n,t,e,[]):Dy(n,t,r,e)}var an=class{},Ri=class{};var Nu=class extends an{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new ia(this);let i=km(e);this._bootstrapComponents=Uv(i.bootstrap),this._r3Injector=wv(e,n,[{provide:an,useValue:this},{provide:Aa,useValue:this.componentFactoryResolver},...r],Ne(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Mu=class extends Ri{constructor(e){super(),this.moduleType=e}create(e){return new Nu(this.moduleType,e,[])}};var sa=class extends an{constructor(e){super(),this.componentFactoryResolver=new ia(this),this.instance=null;let n=new wi([...e.providers,{provide:an,useValue:this},{provide:Aa,useValue:this.componentFactoryResolver}],e.parent||qu(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Nd(t,e,n=null){return new sa({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var $i=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new ge(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Na(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function Bi(t){return(t.flags&32)===32}function QS(t,e,n,r,i,s,o,a,c){let l=e.consts,u=Da(e,t,4,o||null,Go(l,a));ny(e,n,u,Go(l,c)),rd(e,u);let d=u.tView=_d(2,u,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}function xi(t,e,n,r,i,s,o,a){let c=X(),l=Et(),u=t+Re,d=l.firstCreatePass?QS(u,l,c,e,n,r,i,s,o):l.data[u];Vi(d,!1);let f=by(l,c,d,t);nd()&&md(l,c,f,d),Pn(f,c);let h=sy(f,c,f,d);return c[u]=h,ba(c,h),LS(h,d,c),Yu(d)&&Jv(l,c,d),o!=null&&Xv(c,d,a),xi}var by=Ty;function Ty(t,e,n,r){return Dt(!0),e[oe].createComment("")}function ZS(t,e,n,r){let i=e[ze],s=!i||Ui()||Bi(n)||_a(i,r);if(Dt(s),s)return Ty(t,e,n,r);let o=i.data[Rb]?.[r]??null;o!==null&&n.tView!==null&&n.tView.ssrId===null&&(n.tView.ssrId=o);let a=Ta(i,t,e,n);ya(i,r,a);let c=ud(i,r);return Sa(c,a)}function JS(){by=ZS}function XS(t,e,n,r){return Na(t,Ju(),n)?e+Dm(n)+r:Rr}function Oo(t,e){return t<<17|e<<2}function kn(t){return t>>17&32767}function e0(t){return(t&2)==2}function t0(t,e){return t&131071|e<<17}function Ru(t){return t|2}function Nr(t){return(t&131068)>>2}function Bl(t,e){return t&-131069|e<<2}function n0(t){return(t&1)===1}function xu(t){return t|1}function r0(t,e,n,r,i,s){let o=s?e.classBindings:e.styleBindings,a=kn(o),c=Nr(o);t[r]=n;let l=!1,u;if(Array.isArray(n)){let d=n;u=d[1],(u===null||Oi(d,u)>0)&&(l=!0)}else u=n;if(i)if(c!==0){let f=kn(t[a+1]);t[r+1]=Oo(f,a),f!==0&&(t[f+1]=Bl(t[f+1],r)),t[a+1]=t0(t[a+1],r)}else t[r+1]=Oo(a,0),a!==0&&(t[a+1]=Bl(t[a+1],r)),a=r;else t[r+1]=Oo(c,0),a===0?a=r:t[c+1]=Bl(t[c+1],r),c=r;l&&(t[r+1]=Ru(t[r+1])),cm(t,u,r,!0),cm(t,u,r,!1),i0(e,u,t,r,s),o=Oo(a,c),s?e.classBindings=o:e.styleBindings=o}function i0(t,e,n,r,i){let s=i?t.residualClasses:t.residualStyles;s!=null&&typeof e=="string"&&Oi(s,e)>=0&&(n[r+1]=xu(n[r+1]))}function cm(t,e,n,r){let i=t[n+1],s=e===null,o=r?kn(i):Nr(i),a=!1;for(;o!==0&&(a===!1||s);){let c=t[o],l=t[o+1];s0(c,e)&&(a=!0,t[o+1]=r?xu(l):Ru(l)),o=r?kn(l):Nr(l)}a&&(t[n+1]=r?Ru(i):xu(i))}function s0(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?Oi(t,e)>=0:!1}function Md(t,e,n){let r=X(),i=Ju();if(Na(r,i,e)){let s=Et(),o=eb();TT(s,o,r,t,e,r[oe],n,!1)}return Md}function lm(t,e,n,r,i){let s=e.inputs,o=i?"class":"style";wd(t,n,s[o],o,r)}function Ma(t,e){return o0(t,e,null,!0),Ma}function o0(t,e,n,r){let i=X(),s=Et(),o=YD(2);if(s.firstUpdatePass&&c0(s,t,o,r),e!==Rr&&Na(i,o,e)){let a=s.data[Fn()];h0(s,a,i,i[oe],t,i[o+1]=p0(e,n),r,o)}}function a0(t,e){return e>=t.expandoStartIndex}function c0(t,e,n,r){let i=t.data;if(i[n+1]===null){let s=i[Fn()],o=a0(t,n);g0(s,r)&&e===null&&!o&&(e=!1),e=l0(i,s,e,r),r0(i,s,e,n,o,r)}}function l0(t,e,n,r){let i=JD(t),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=Hl(null,t,e,n,r),n=Pi(n,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||t[o]!==i)if(n=Hl(i,t,e,n,r),s===null){let c=u0(t,e,r);c!==void 0&&Array.isArray(c)&&(c=Hl(null,t,e,c[1],r),c=Pi(c,e.attrs,r),d0(t,e,r,c))}else s=f0(t,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),n}function u0(t,e,n){let r=n?e.classBindings:e.styleBindings;if(Nr(r)!==0)return t[kn(r)]}function d0(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[kn(i)]=r}function f0(t,e,n){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=t[s].hostAttrs;r=Pi(r,o,n)}return Pi(r,e.attrs,n)}function Hl(t,e,n,r,i){let s=null,o=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<o&&(s=e[a],r=Pi(r,s.hostAttrs,i),s!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function Pi(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),ZC(t,o,n?!0:e[++s]))}return t===void 0?null:t}function h0(t,e,n,r,i,s,o,a){if(!(e.type&3))return;let c=t.data,l=c[a+1],u=n0(l)?um(c,e,n,i,Nr(l),o):void 0;if(!oa(u)){oa(s)||e0(l)&&(s=um(c,null,n,i,a,o));let d=Km(Fn(),n);hT(r,o,d,i,s)}}function um(t,e,n,r,i,s){let o=e===null,a;for(;i>0;){let c=t[i],l=Array.isArray(c),u=l?c[1]:c,d=u===null,f=n[i+1];f===Rr&&(f=d?sn:void 0);let h=d?Ml(f,r):u===r?f:void 0;if(l&&!oa(h)&&(h=Ml(c,r)),oa(h)&&(a=h,o))return a;let p=t[i+1];i=o?kn(p):Nr(p)}if(e!==null){let c=s?e.residualClasses:e.residualStyles;c!=null&&(a=Ml(c,r))}return a}function oa(t){return t!==void 0}function p0(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=Ne(dd(t)))),t}function g0(t,e){return(t.flags&(e?8:16))!==0}var Pu=class{destroy(e){}updateValue(e,n){}swap(e,n){let r=Math.min(e,n),i=Math.max(e,n),s=this.detach(i);if(i-r>1){let o=this.detach(r);this.attach(r,s),this.attach(i,o)}else this.attach(r,s)}move(e,n){this.attach(n,this.detach(e))}};function Wl(t,e,n,r,i){return t===n&&Object.is(e,r)?1:Object.is(i(t,e),i(n,r))?-1:0}function m0(t,e,n){let r,i,s=0,o=t.length-1;if(Array.isArray(e)){let a=e.length-1;for(;s<=o&&s<=a;){let c=t.at(s),l=e[s],u=Wl(s,c,s,l,n);if(u!==0){u<0&&t.updateValue(s,l),s++;continue}let d=t.at(o),f=e[a],h=Wl(o,d,a,f,n);if(h!==0){h<0&&t.updateValue(o,f),o--,a--;continue}let p=n(s,c),y=n(o,d),w=n(s,l);if(Object.is(w,y)){let A=n(a,f);Object.is(A,p)?(t.swap(s,o),t.updateValue(o,f),a--,o--):t.move(o,s),t.updateValue(s,l),s++;continue}if(r??=new aa,i??=fm(t,s,o,n),Ou(t,r,s,w))t.updateValue(s,l),s++,o++;else if(i.has(w))r.set(p,t.detach(s)),o--;else{let A=t.create(s,e[s]);t.attach(s,A),s++,o++}}for(;s<=a;)dm(t,r,n,s,e[s]),s++}else if(e!=null){let a=e[Symbol.iterator](),c=a.next();for(;!c.done&&s<=o;){let l=t.at(s),u=c.value,d=Wl(s,l,s,u,n);if(d!==0)d<0&&t.updateValue(s,u),s++,c=a.next();else{r??=new aa,i??=fm(t,s,o,n);let f=n(s,u);if(Ou(t,r,s,f))t.updateValue(s,u),s++,o++,c=a.next();else if(!i.has(f))t.attach(s,t.create(s,u)),s++,o++,c=a.next();else{let h=n(s,l);r.set(h,t.detach(s)),o--}}}for(;!c.done;)dm(t,r,n,t.length,c.value),c=a.next()}for(;s<=o;)t.destroy(t.detach(o--));r?.forEach(a=>{t.destroy(a)})}function Ou(t,e,n,r){return e!==void 0&&e.has(r)?(t.attach(n,e.get(r)),e.delete(r),!0):!1}function dm(t,e,n,r,i){if(Ou(t,e,r,n(r,i)))t.updateValue(r,i);else{let s=t.create(r,i);t.attach(r,s)}}function fm(t,e,n,r){let i=new Set;for(let s=e;s<=n;s++)i.add(r(s,t.at(s)));return i}var aa=class{constructor(){this.kvMap=new Map,this._vMap=void 0}has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let n=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(e,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,n){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,n)}else this.kvMap.set(e,n)}forEach(e){for(let[n,r]of this.kvMap)if(e(r,n),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,n)}}};var ku=class{constructor(e,n,r){this.lContainer=e,this.$implicit=n,this.$index=r}get $count(){return this.lContainer.length-me}};function Sy(t,e){return e}var Lu=class{constructor(e,n,r){this.hasEmptyBlock=e,this.trackByFn=n,this.liveCollection=r}};function Ay(t,e,n,r,i,s,o,a,c,l,u,d,f){xr("NgControlFlow");let h=c!==void 0,p=X(),y=a?o.bind(p[ke][Me]):o,w=new Lu(h,y);p[Re+t]=w,xi(t+1,e,n,r,i,s),h&&xi(t+2,c,l,u,d,f)}var Fu=class extends Pu{constructor(e,n,r){super(),this.lContainer=e,this.hostLView=n,this.templateTNode=r,this.needsIndexUpdate=!1}get length(){return this.lContainer.length-me}at(e){return this.getLView(e)[Me].$implicit}attach(e,n){let r=n[ze];this.needsIndexUpdate||=e!==this.length,Cd(this.lContainer,n,e,Xo(this.templateTNode,r))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,v0(this.lContainer,e)}create(e,n){let r=na(this.lContainer,this.templateTNode.tView.ssrId);return Ed(this.hostLView,this.templateTNode,new ku(this.lContainer,n,e),{dehydratedView:r})}destroy(e){Ia(e[T],e)}updateValue(e,n){this.getLView(e)[Me].$implicit=n}reset(){this.needsIndexUpdate=!1}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[Me].$index=e}getLView(e){return y0(this.lContainer,e)}};function Ny(t){let e=V(null),n=Fn();try{let r=X(),i=r[T],s=r[n];if(s.liveCollection===void 0){let a=n+1,c=hm(r,a),l=pm(i,a);s.liveCollection=new Fu(c,r,l)}else s.liveCollection.reset();let o=s.liveCollection;if(m0(o,t,s.trackByFn),o.updateIndexes(),s.hasEmptyBlock){let a=Ju(),c=o.length===0;if(Na(r,a,c)){let l=n+2,u=hm(r,l);if(c){let d=pm(i,l),f=na(u,d.tView.ssrId),h=Ed(r,d,void 0,{dehydratedView:f});Cd(u,h,0,Xo(d,f))}else zT(u,0)}}}finally{V(e)}}function hm(t,e){return t[e]}function v0(t,e){return Si(t,e)}function y0(t,e){return WT(t,e)}function pm(t,e){return Ku(t,e)}function _0(t,e,n,r,i,s){let o=e.consts,a=Go(o,i),c=Da(e,t,2,r,a);return ny(e,n,c,Go(o,s)),c.attrs!==null&&wu(c,c.attrs,!1),c.mergedAttrs!==null&&wu(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function Q(t,e,n,r){let i=X(),s=Et(),o=Re+t,a=i[oe],c=s.firstCreatePass?_0(o,s,i,e,n,r):s.data[o],l=My(s,i,c,a,e,t);i[o]=l;let u=Yu(c);return Vi(c,!0),qv(a,l,c),!Bi(c)&&nd()&&md(s,i,l,c),UD()===0&&Pn(l,i),VD(),u&&(Jv(s,i,c),Zv(s,c,i)),r!==null&&Xv(i,c),Q}function H(){let t=Ct();ev()?qD():(t=t.parent,Vi(t,!1));let e=t;BD(e)&&WD(),$D();let n=Et();return n.firstCreatePass&&(rd(n,t),Hm(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&ib(e)&&lm(n,e,X(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&sb(e)&&lm(n,e,X(),e.stylesWithoutHost,!1),H}function Ee(t,e,n,r){return Q(t,e,n,r),H(),Ee}var My=(t,e,n,r,i,s)=>(Dt(!0),wa(r,i,av()));function w0(t,e,n,r,i,s){let o=e[ze],a=!o||Ui()||Bi(n)||_a(o,s);if(Dt(a),a)return wa(r,i,av());let c=Ta(o,t,e,n);return kv(o,s)&&ya(o,s,c.nextSibling),o&&(Cv(n)||Dv(c))&&Fi(n)&&(HD(n),Wv(c)),c}function I0(){My=w0}var E0=(t,e,n,r)=>(Dt(!0),pd(e[oe],""));function C0(t,e,n,r){let i,s=e[ze],o=!s||Ui()||Bi(n);if(Dt(o),o)return pd(e[oe],"");let a=Ta(s,t,e,n),c=Bb(s,r);return ya(s,r,a),i=Sa(c,a),i}function D0(){E0=C0}function Ry(){return X()}var ca="en-US";var b0=ca;function T0(t){typeof t=="string"&&(b0=t.toLowerCase().replace(/_/g,"-"))}function xy(t,e,n){let r=t[oe];switch(n){case Node.COMMENT_NODE:return pd(r,e);case Node.TEXT_NODE:return hd(r,e);case Node.ELEMENT_NODE:return wa(r,e,null)}}var S0=(t,e,n,r)=>(Dt(!0),xy(t,n,r));function A0(t,e,n,r){return Dt(!0),xy(t,n,r)}function N0(){S0=A0}function ue(t,e,n,r){let i=X(),s=Et(),o=Ct();return R0(s,i,i[oe],o,t,e,r),ue}function M0(t,e,n,r){let i=t.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===n&&i[s+1]===r){let a=e[Ii],c=i[s+2];return a.length>c?a[c]:null}typeof o=="string"&&(s+=2)}return null}function R0(t,e,n,r,i,s,o){let a=Yu(r),l=t.firstCreatePass&&cy(t),u=e[Me],d=ay(e),f=!0;if(r.type&3||o){let y=qe(r,e),w=o?o(y):y,A=d.length,re=o?Te=>o(ot(Te[r.index])):r.index,J=null;if(!o&&a&&(J=M0(t,e,i,r.index)),J!==null){let Te=J.__ngLastListenerFn__||J;Te.__ngNextListenerFn__=s,J.__ngLastListenerFn__=s,f=!1}else{s=mm(r,e,u,s,!1);let Te=n.listen(w,i,s);d.push(s,Te),l&&l.push(i,re,A,A+1)}}else s=mm(r,e,u,s,!1);let h=r.outputs,p;if(f&&h!==null&&(p=h[i])){let y=p.length;if(y)for(let w=0;w<y;w+=2){let A=p[w],re=p[w+1],Ft=e[A][re].subscribe(s),we=d.length;d.push(s,Ft),l&&l.push(i,r.index,we,-(we+1))}}}function gm(t,e,n,r){let i=V(null);try{return gt(6,e,n),n(r)!==!1}catch(s){return ly(t,s),!1}finally{gt(7,e,n),V(i)}}function mm(t,e,n,r,i){return function s(o){if(o===Function)return r;let a=t.componentOffset>-1?Ln(t.index,e):e;Dd(a);let c=gm(e,n,r,o),l=s.__ngNextListenerFn__;for(;l;)c=gm(e,n,l,o)&&c,l=l.__ngNextListenerFn__;return i&&c===!1&&o.preventDefault(),c}}function Py(t,e,n){qS(t,e,n)}function Rd(t){let e=X(),n=Et(),r=tv();Xu(r+1);let i=Ad(n,r);if(t.dirty&&kD(e)===((i.metadata.flags&2)===2)){if(i.matches===null)t.reset([]);else{let s=KS(e,r);t.reset(s,yb),t.notifyOnChanges()}return!0}return!1}function xd(){return WS(X(),tv())}function Le(t,e=""){let n=X(),r=Et(),i=t+Re,s=r.firstCreatePass?Da(r,i,1,e,null):r.data[i],o=Oy(r,n,s,e,t);n[i]=o,nd()&&md(r,n,o,s),Vi(s,!1)}var Oy=(t,e,n,r,i)=>(Dt(!0),hd(e[oe],r));function x0(t,e,n,r,i){let s=e[ze],o=!s||Ui()||Bi(n)||_a(s,i);return Dt(o),o?hd(e[oe],r):Ta(s,t,e,n)}function P0(){Oy=x0}function Ra(t){return xa("",t,""),Ra}function xa(t,e,n){let r=X(),i=XS(r,t,e,n);return i!==Rr&&VT(r,Fn(),i),xa}var O0=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=jm(!1,r.type),s=i.length>0?Nd([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,s)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=I({token:e,providedIn:"environment",factory:()=>new e(k(We))});let t=e;return t})();function Tt(t){xr("NgStandalone"),t.getStandaloneInjector=e=>e.get(O0).getOrCreateStandaloneInjector(t)}var cn=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},ky=new cn("17.3.11"),Pa=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();var Ly=new S("");function Hi(t){return!!t&&typeof t.then=="function"}function Fy(t){return!!t&&typeof t.subscribe=="function"}var jy=new S(""),Uy=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=m(jy,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let s of this.appInits){let o=s();if(Hi(o))r.push(o);else if(Fy(o)){let a=new Promise((c,l)=>{o.subscribe({complete:c,error:l})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(s=>{this.reject(s)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Or=new S("");function k0(){sg(()=>{throw new C(600,!1)})}function L0(t){return t.isBoundToModule}function F0(t,e,n){try{let r=n();return Hi(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var un=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=m(Iv),this.afterRenderEffectManager=m(_y),this.externalTestViews=new Set,this.beforeRender=new Ie,this.afterTick=new Ie,this.componentTypes=[],this.components=[],this.isStable=m($i).hasPendingTasks.pipe(F(r=>!r)),this._injector=m(We)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,i){let s=r instanceof ra;if(!this._injector.get(Uy).done){let h=!s&&Om(r),p=!1;throw new C(405,p)}let a;s?a=r:a=this._injector.get(Aa).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let c=L0(a)?void 0:this._injector.get(an),l=i||a.selector,u=a.create(lt.NULL,[],l,c),d=u.location.nativeElement,f=u.injector.get(Ly,null);return f?.registerApplication(d),u.onDestroy(()=>{this.detachView(u.hostView),zl(this.components,u),f?.unregisterApplication(d)}),this._loadComponent(u),u}tick(){this._tick(!0)}_tick(r){if(this._runningTick)throw new C(101,!1);let i=V(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(r)}catch(s){this.internalErrorHandler(s)}finally{this.afterTick.next(),this._runningTick=!1,V(i)}}detectChangesInAttachedViews(r){let i=0,s=this.afterRenderEffectManager;for(;;){if(i===dy)throw new C(103,!1);if(r){let o=i===0;this.beforeRender.next(o);for(let{_lView:a,notifyErrorHandler:c}of this._views)j0(a,o,c)}if(i++,s.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>ju(o))&&(s.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>ju(o))))break}}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;zl(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(Or,[]);[...this._bootstrapListeners,...i].forEach(s=>s(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>zl(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new C(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function zl(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}var ko;function Pd(t){ko??=new WeakMap;let e=ko.get(t);if(e)return e;let n=t.isStable.pipe(rt(r=>r)).toPromise().then(()=>{});return ko.set(t,n),t.onDestroy(()=>ko?.delete(t)),n}function j0(t,e,n){!e&&!ju(t)||U0(t,n,e)}function ju(t){return Zu(t)}function U0(t,e,n){let r;n?(r=0,t[E]|=1024):t[E]&64?r=0:r=1,fy(t,e,r)}var Uu=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},Od=(()=>{let e=class e{compileModuleSync(r){return new Mu(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),s=km(r),o=Uv(s.declarations).reduce((a,c)=>{let l=Mn(c);return l&&a.push(new Mi(l)),a},[]);return new Uu(i,o)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var V0=(()=>{let e=class e{constructor(){this.zone=m(Y),this.applicationRef=m(un)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function $0(t){return[{provide:Y,useFactory:t},{provide:Nn,multi:!0,useFactory:()=>{let e=m(V0,{optional:!0});return()=>e.initialize()}},{provide:Nn,multi:!0,useFactory:()=>{let e=m(z0);return()=>{e.initialize()}}},{provide:Iv,useFactory:B0}]}function B0(){let t=m(Y),e=m(Ht);return n=>t.runOutsideAngular(()=>e.handleError(n))}function H0(t){let e=$0(()=>new Y(W0(t)));return at([[],e])}function W0(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var z0=(()=>{let e=class e{constructor(){this.subscription=new ie,this.initialized=!1,this.zone=m(Y),this.pendingTasks=m($i)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Y.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Y.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function q0(){return typeof $localize<"u"&&$localize.locale||ca}var kd=new S("",{providedIn:"root",factory:()=>m(kd,R.Optional|R.SkipSelf)||q0()});var Vy=new S("");var $o=null;function G0(t=[],e){return lt.create({name:e,providers:[{provide:ha,useValue:"platform"},{provide:Vy,useValue:new Set([()=>$o=null])},...t]})}function Y0(t=[]){if($o)return $o;let e=G0(t);return $o=e,k0(),K0(e),e}function K0(t){t.get(od,null)?.forEach(n=>n())}var Wi=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=Q0;let t=e;return t})();function Q0(t){return Z0(Ct(),X(),(t&16)===16)}function Z0(t,e,n){if(Fi(t)&&!n){let r=Ln(t.index,e);return new On(r,r)}else if(t.type&47){let r=e[ke];return new On(r,e)}return null}function $y(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=Y0(r),s=[H0(),...n||[]],a=new sa({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,c=a.get(Y);return c.run(()=>{a.resolveInjectorInitializers();let l=a.get(Ht,null),u;c.runOutsideAngular(()=>{u=c.onError.subscribe({next:h=>{l.handleError(h)}})});let d=()=>a.destroy(),f=i.get(Vy);return f.add(d),a.onDestroy(()=>{u.unsubscribe(),f.delete(d)}),F0(l,c,()=>{let h=a.get(Uy);return h.runInitializers(),h.donePromise.then(()=>{let p=a.get(kd,ca);T0(p||ca);let y=a.get(un);return e!==void 0&&y.bootstrap(e),y})})})}catch(e){return Promise.reject(e)}}var vm=!1,J0=!1;function X0(){vm||(vm=!0,jb(),I0(),P0(),D0(),JS(),US(),mS(),IT(),N0())}function eA(t,e){return Pd(t)}function By(){return at([{provide:xo,useFactory:()=>{let t=!0;return Po()&&(t=!!m(Un,{optional:!0})?.get(Pv,null)),t&&xr("NgHydration"),t}},{provide:Nn,useValue:()=>{J0=!!m(Hb,{optional:!0}),Po()&&m(xo)&&(tA(),X0())},multi:!0},{provide:Fv,useFactory:()=>Po()&&m(xo)},{provide:Or,useFactory:()=>{if(Po()&&m(xo)){let t=m(un),e=m(lt);return()=>{eA(t,e).then(()=>{aS(t)})}}return()=>{}},multi:!0}])}function tA(){let t=ma(),e;for(let n of t.body.childNodes)if(n.nodeType===Node.COMMENT_NODE&&n.textContent?.trim()===Lb){e=n;break}if(!e)throw new C(-507,!1)}var Yy=null;function kr(){return Yy}function Ky(t){Yy??=t}var Oa=class{};var Fe=new S(""),Qy=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:()=>m(sA),providedIn:"platform"});let t=e;return t})();var sA=(()=>{let e=class e extends Qy{constructor(){super(),this._doc=m(Fe),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return kr().getBaseHref(this._doc)}onPopState(r){let i=kr().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=kr().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,s){this._history.pushState(r,i,s)}replaceState(r,i,s){this._history.replaceState(r,i,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function Zy(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function Hy(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function Vn(t){return t&&t[0]!=="?"?"?"+t:t}var La=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:()=>m(Jy),providedIn:"root"});let t=e;return t})(),oA=new S(""),Jy=(()=>{let e=class e extends La{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??m(Fe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return Zy(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+Vn(this._platformLocation.search),s=this._platformLocation.hash;return s&&r?`${i}${s}`:i}pushState(r,i,s,o){let a=this.prepareExternalUrl(s+Vn(o));this._platformLocation.pushState(r,i,a)}replaceState(r,i,s,o){let a=this.prepareExternalUrl(s+Vn(o));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(k(Qy),k(oA,8))},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var zi=(()=>{let e=class e{constructor(r){this._subject=new Ae,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=lA(Hy(Wy(i))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+Vn(i))}normalize(r){return e.stripTrailingSlash(cA(this._basePath,Wy(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",s=null){this._locationStrategy.pushState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Vn(i)),s)}replaceState(r,i="",s=null){this._locationStrategy.replaceState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Vn(i)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(s=>s(r,i))}subscribe(r,i,s){return this._subject.subscribe({next:r,error:i,complete:s})}};e.normalizeQueryParams=Vn,e.joinWithSlash=Zy,e.stripTrailingSlash=Hy,e.\u0275fac=function(i){return new(i||e)(k(La))},e.\u0275prov=I({token:e,factory:()=>aA(),providedIn:"root"});let t=e;return t})();function aA(){return new zi(k(La))}function cA(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function Wy(t){return t.replace(/\/index.html$/,"")}function lA(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function Ld(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,s]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var Xy="browser",uA="server";function qi(t){return t===uA}var ka=class{};var ja=class t{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(n=>{let r=n.indexOf(":");if(r>0){let i=n.slice(0,r),s=i.toLowerCase(),o=n.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,r)=>{this.setHeaderEntries(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){let n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){let n=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,n);let i=(e.op==="a"?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":let s=e.value;if(!s)this.headers.delete(n),this.normalizedNames.delete(n);else{let o=this.headers.get(n);if(!o)return;o=o.filter(a=>s.indexOf(a)===-1),o.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,o)}break}}setHeaderEntries(e,n){let r=(Array.isArray(n)?n:[n]).map(s=>s.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}};var a_=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(a_||{}),Fd=class{constructor(e,n=c_.Ok,r="OK"){this.headers=e.headers||new ja,this.status=e.status!==void 0?e.status:n,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}};var Ua=class t extends Fd{constructor(e={}){super(e),this.type=a_.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new t({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}};var c_=function(t){return t[t.Continue=100]="Continue",t[t.SwitchingProtocols=101]="SwitchingProtocols",t[t.Processing=102]="Processing",t[t.EarlyHints=103]="EarlyHints",t[t.Ok=200]="Ok",t[t.Created=201]="Created",t[t.Accepted=202]="Accepted",t[t.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",t[t.NoContent=204]="NoContent",t[t.ResetContent=205]="ResetContent",t[t.PartialContent=206]="PartialContent",t[t.MultiStatus=207]="MultiStatus",t[t.AlreadyReported=208]="AlreadyReported",t[t.ImUsed=226]="ImUsed",t[t.MultipleChoices=300]="MultipleChoices",t[t.MovedPermanently=301]="MovedPermanently",t[t.Found=302]="Found",t[t.SeeOther=303]="SeeOther",t[t.NotModified=304]="NotModified",t[t.UseProxy=305]="UseProxy",t[t.Unused=306]="Unused",t[t.TemporaryRedirect=307]="TemporaryRedirect",t[t.PermanentRedirect=308]="PermanentRedirect",t[t.BadRequest=400]="BadRequest",t[t.Unauthorized=401]="Unauthorized",t[t.PaymentRequired=402]="PaymentRequired",t[t.Forbidden=403]="Forbidden",t[t.NotFound=404]="NotFound",t[t.MethodNotAllowed=405]="MethodNotAllowed",t[t.NotAcceptable=406]="NotAcceptable",t[t.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",t[t.RequestTimeout=408]="RequestTimeout",t[t.Conflict=409]="Conflict",t[t.Gone=410]="Gone",t[t.LengthRequired=411]="LengthRequired",t[t.PreconditionFailed=412]="PreconditionFailed",t[t.PayloadTooLarge=413]="PayloadTooLarge",t[t.UriTooLong=414]="UriTooLong",t[t.UnsupportedMediaType=415]="UnsupportedMediaType",t[t.RangeNotSatisfiable=416]="RangeNotSatisfiable",t[t.ExpectationFailed=417]="ExpectationFailed",t[t.ImATeapot=418]="ImATeapot",t[t.MisdirectedRequest=421]="MisdirectedRequest",t[t.UnprocessableEntity=422]="UnprocessableEntity",t[t.Locked=423]="Locked",t[t.FailedDependency=424]="FailedDependency",t[t.TooEarly=425]="TooEarly",t[t.UpgradeRequired=426]="UpgradeRequired",t[t.PreconditionRequired=428]="PreconditionRequired",t[t.TooManyRequests=429]="TooManyRequests",t[t.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",t[t.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",t[t.InternalServerError=500]="InternalServerError",t[t.NotImplemented=501]="NotImplemented",t[t.BadGateway=502]="BadGateway",t[t.ServiceUnavailable=503]="ServiceUnavailable",t[t.GatewayTimeout=504]="GatewayTimeout",t[t.HttpVersionNotSupported=505]="HttpVersionNotSupported",t[t.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",t[t.InsufficientStorage=507]="InsufficientStorage",t[t.LoopDetected=508]="LoopDetected",t[t.NotExtended=510]="NotExtended",t[t.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",t}(c_||{});var fA=new S("");var e_="b",t_="h",n_="s",r_="st",i_="u",s_="rt",Fa=new S(""),hA=["GET","HEAD"];function pA(t,e){let d=m(Fa),{isCacheActive:n}=d,r=Jp(d,["isCacheActive"]),{transferCache:i,method:s}=t;if(!n||s==="POST"&&!r.includePostRequests&&!i||s!=="POST"&&!hA.includes(s)||i===!1||r.filter?.(t)===!1)return e(t);let o=m(Un),a=mA(t),c=o.get(a,null),l=r.includeHeaders;if(typeof i=="object"&&i.includeHeaders&&(l=i.includeHeaders),c){let{[e_]:f,[s_]:h,[t_]:p,[n_]:y,[r_]:w,[i_]:A}=c,re=f;switch(h){case"arraybuffer":re=new TextEncoder().encode(f).buffer;break;case"blob":re=new Blob([f]);break}let J=new ja(p);return D(new Ua({body:re,headers:J,status:y,statusText:w,url:A}))}let u=qi(m(Ke));return e(t).pipe(se(f=>{f instanceof Ua&&u&&o.set(a,{[e_]:f.body,[t_]:gA(f.headers,l),[n_]:f.status,[r_]:f.statusText,[i_]:f.url||"",[s_]:t.responseType})}))}function gA(t,e){if(!e)return{};let n={};for(let r of e){let i=t.getAll(r);i!==null&&(n[r]=i)}return n}function o_(t){return[...t.keys()].sort().map(e=>`${e}=${t.getAll(e)}`).join("&")}function mA(t){let{params:e,method:n,responseType:r,url:i}=t,s=o_(e),o=t.serializeBody();o instanceof URLSearchParams?o=o_(o):typeof o!="string"&&(o="");let a=[n,r,i,o,s].join("|"),c=vA(a);return c}function vA(t){let e=0;for(let n of t)e=Math.imul(31,e)+n.charCodeAt(0)<<0;return e+=2147483648,e.toString()}function l_(t){return[{provide:Fa,useFactory:()=>(xr("NgHttpTransferCache"),_({isCacheActive:!0},t))},{provide:fA,useValue:pA,multi:!0,deps:[Un,Fa]},{provide:Or,multi:!0,useFactory:()=>{let e=m(un),n=m(Fa);return()=>{Pd(e).then(()=>{n.isCacheActive=!1})}}}]}var Vd=class extends Oa{constructor(){super(...arguments),this.supportsDOMEvents=!0}},$d=class t extends Vd{static makeCurrent(){Ky(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=yA();return n==null?null:_A(n)}resetBaseElement(){Gi=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Ld(document.cookie,e)}},Gi=null;function yA(){return Gi=Gi||document.querySelector("base"),Gi?Gi.getAttribute("href"):null}function _A(t){return new URL(t,document.baseURI).pathname}var wA=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac});let t=e;return t})(),Bd=new S(""),h_=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(s=>{s.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,s){return this._findPluginFor(i).addEventListener(r,i,s)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(o=>o.supports(r)),!i)throw new C(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(k(Bd),k(Y))},e.\u0275prov=I({token:e,factory:e.\u0275fac});let t=e;return t})(),Va=class{constructor(e){this._doc=e}},jd="ng-app-id",p_=(()=>{let e=class e{constructor(r,i,s,o={}){this.doc=r,this.appId=i,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=qi(o),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(s=>s.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${jd}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(s=>{s.textContent!=null&&i.set(s.textContent,s)}),i}return null}changeUsageCount(r,i){let s=this.styleRef;if(s.has(r)){let o=s.get(r);return o.usage+=i,o.usage}return s.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let s=this.styleNodesInDOM,o=s?.get(i);if(o?.parentNode===r)return s.delete(i),o.removeAttribute(jd),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(jd,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let s=this.getStyleElement(r,i),o=this.styleRef,a=o.get(i)?.elements;a?a.push(s):o.set(i,{elements:[s],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(k(Fe),k(va),k(ad,8),k(Ke))},e.\u0275prov=I({token:e,factory:e.\u0275fac});let t=e;return t})(),Ud={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},zd=/%COMP%/g,g_="%COMP%",IA=`_nghost-${g_}`,EA=`_ngcontent-${g_}`,CA=!0,DA=new S("",{providedIn:"root",factory:()=>CA});function bA(t){return EA.replace(zd,t)}function TA(t){return IA.replace(zd,t)}function m_(t,e){return e.map(n=>n.replace(zd,t))}var u_=(()=>{let e=class e{constructor(r,i,s,o,a,c,l,u=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=c,this.ngZone=l,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=qi(c),this.defaultRenderer=new Yi(r,a,l,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===vt.ShadowDom&&(i=ee(_({},i),{encapsulation:vt.Emulated}));let s=this.getOrCreateRenderer(r,i);return s instanceof $a?s.applyToHost(r):s instanceof Ki&&s.applyStyles(),s}getOrCreateRenderer(r,i){let s=this.rendererByCompId,o=s.get(i.id);if(!o){let a=this.doc,c=this.ngZone,l=this.eventManager,u=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,f=this.platformIsServer;switch(i.encapsulation){case vt.Emulated:o=new $a(l,u,i,this.appId,d,a,c,f);break;case vt.ShadowDom:return new Hd(l,u,r,i,a,c,this.nonce,f);default:o=new Ki(l,u,i,d,a,c,f);break}s.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(k(h_),k(p_),k(va),k(DA),k(Fe),k(Ke),k(Y),k(ad))},e.\u0275prov=I({token:e,factory:e.\u0275fac});let t=e;return t})(),Yi=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(Ud[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(d_(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(d_(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new C(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let s=Ud[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=Ud[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Wt.DashCase|Wt.Important)?e.style.setProperty(n,r,i&Wt.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Wt.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=kr().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function d_(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var Hd=class extends Yi{constructor(e,n,r,i,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=m_(i.id,i.styles);for(let u of l){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=u,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Ki=class extends Yi{constructor(e,n,r,i,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=c?m_(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},$a=class extends Ki{constructor(e,n,r,i,s,o,a,c){let l=i+"-"+r.id;super(e,n,r,s,o,a,c,l),this.contentAttr=bA(l),this.hostAttr=TA(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},SA=(()=>{let e=class e extends Va{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,s){return r.addEventListener(i,s,!1),()=>this.removeEventListener(r,i,s)}removeEventListener(r,i,s){return r.removeEventListener(i,s)}};e.\u0275fac=function(i){return new(i||e)(k(Fe))},e.\u0275prov=I({token:e,factory:e.\u0275fac});let t=e;return t})(),f_=["alt","control","meta","shift"],AA={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},NA={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},MA=(()=>{let e=class e extends Va{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,s){let o=e.parseEventName(i),a=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>kr().onAndCancel(r,o.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),s=i.shift();if(i.length===0||!(s==="keydown"||s==="keyup"))return null;let o=e._normalizeKey(i.pop()),a="",c=i.indexOf("code");if(c>-1&&(i.splice(c,1),a="code."),f_.forEach(u=>{let d=i.indexOf(u);d>-1&&(i.splice(d,1),a+=u+".")}),a+=o,i.length!=0||o.length===0)return null;let l={};return l.domEventName=s,l.fullKey=a,l}static matchEventFullKeyCode(r,i){let s=AA[r.key]||r.key,o="";return i.indexOf("code.")>-1&&(s=r.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),f_.forEach(a=>{if(a!==s){let c=NA[a];c(r)&&(o+=a+".")}}),o+=s,o===i)}static eventCallback(r,i,s){return o=>{e.matchEventFullKeyCode(o,r)&&s.runGuarded(()=>i(o))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(k(Fe))},e.\u0275prov=I({token:e,factory:e.\u0275fac});let t=e;return t})();function v_(t,e){return $y(_({rootComponent:t},RA(e)))}function RA(t){return{appProviders:[...LA,...t?.providers??[]],platformProviders:kA}}function xA(){$d.makeCurrent()}function PA(){return new Ht}function OA(){return Nv(document),document}var kA=[{provide:Ke,useValue:Xy},{provide:od,useValue:xA,multi:!0},{provide:Fe,useFactory:OA,deps:[]}];var LA=[{provide:ha,useValue:"root"},{provide:Ht,useFactory:PA,deps:[]},{provide:Bd,useClass:SA,multi:!0,deps:[Fe,Y,Ke]},{provide:Bd,useClass:MA,multi:!0,deps:[Fe]},u_,p_,h_,{provide:Ni,useExisting:u_},{provide:ka,useClass:wA,deps:[]},[]];var y_=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(k(Fe))},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Wd=function(t){return t[t.NoHttpTransferCache=0]="NoHttpTransferCache",t[t.HttpTransferCacheOptions=1]="HttpTransferCacheOptions",t}(Wd||{});function __(...t){let e=[],n=new Set,r=n.has(Wd.HttpTransferCacheOptions);for(let{\u0275providers:i,\u0275kind:s}of t)n.add(s),i.length&&e.push(i);return at([[],By(),n.has(Wd.NoHttpTransferCache)||r?[]:l_({}),e])}var M="primary",us=Symbol("RouteTitle"),Qd=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Vr(t){return new Qd(t)}function jA(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=t[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function UA(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!At(t[n],e[n]))return!1;return!0}function At(t,e){let n=t?Zd(t):void 0,r=e?Zd(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!b_(t[i],e[i]))return!1;return!0}function Zd(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function b_(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,s)=>r[s]===i)}else return t===e}function T_(t){return t.length>0?t[t.length-1]:null}function hn(t){return Cl(t)?t:Hi(t)?ae(Promise.resolve(t)):D(t)}var VA={exact:A_,subset:N_},S_={exact:$A,subset:BA,ignored:()=>!0};function w_(t,e,n){return VA[n.paths](t.root,e.root,n.matrixParams)&&S_[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function $A(t,e){return At(t,e)}function A_(t,e,n){if(!Bn(t.segments,e.segments)||!Wa(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!A_(t.children[r],e.children[r],n))return!1;return!0}function BA(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>b_(t[n],e[n]))}function N_(t,e,n){return M_(t,e,e.segments,n)}function M_(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!Bn(i,n)||e.hasChildren()||!Wa(i,n,r))}else if(t.segments.length===n.length){if(!Bn(t.segments,n)||!Wa(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!N_(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!Bn(t.segments,i)||!Wa(t.segments,i,r)||!t.children[M]?!1:M_(t.children[M],e,s,r)}}function Wa(t,e,n){return e.every((r,i)=>S_[n](t[i].parameters,r.parameters))}var dn=class{constructor(e=new z([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Vr(this.queryParams),this._queryParamMap}toString(){return zA.serialize(this)}},z=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return za(this)}},$n=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=Vr(this.parameters),this._parameterMap}toString(){return x_(this)}};function HA(t,e){return Bn(t,e)&&t.every((n,r)=>At(n.parameters,e[r].parameters))}function Bn(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function WA(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===M&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==M&&(n=n.concat(e(i,r)))}),n}var Df=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:()=>new Ga,providedIn:"root"});let t=e;return t})(),Ga=class{parse(e){let n=new Xd(e);return new dn(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${Qi(e.root,!0)}`,r=YA(e.queryParams),i=typeof e.fragment=="string"?`#${qA(e.fragment)}`:"";return`${n}${r}${i}`}},zA=new Ga;function za(t){return t.segments.map(e=>x_(e)).join("/")}function Qi(t,e){if(!t.hasChildren())return za(t);if(e){let n=t.children[M]?Qi(t.children[M],!1):"",r=[];return Object.entries(t.children).forEach(([i,s])=>{i!==M&&r.push(`${i}:${Qi(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=WA(t,(r,i)=>i===M?[Qi(t.children[M],!1)]:[`${i}:${Qi(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[M]!=null?`${za(t)}/${n[0]}`:`${za(t)}/(${n.join("//")})`}}function R_(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ba(t){return R_(t).replace(/%3B/gi,";")}function qA(t){return encodeURI(t)}function Jd(t){return R_(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function qa(t){return decodeURIComponent(t)}function I_(t){return qa(t.replace(/\+/g,"%20"))}function x_(t){return`${Jd(t.path)}${GA(t.parameters)}`}function GA(t){return Object.entries(t).map(([e,n])=>`;${Jd(e)}=${Jd(n)}`).join("")}function YA(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${Ba(n)}=${Ba(i)}`).join("&"):`${Ba(n)}=${Ba(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var KA=/^[^\/()?;#]+/;function qd(t){let e=t.match(KA);return e?e[0]:""}var QA=/^[^\/()?;=#]+/;function ZA(t){let e=t.match(QA);return e?e[0]:""}var JA=/^[^=?&#]+/;function XA(t){let e=t.match(JA);return e?e[0]:""}var eN=/^[^&#]+/;function tN(t){let e=t.match(eN);return e?e[0]:""}var Xd=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new z([],{}):new z([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[M]=new z(e,n)),r}parseSegment(){let e=qd(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new C(4009,!1);return this.capture(e),new $n(qa(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=ZA(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=qd(this.remaining);i&&(r=i,this.capture(r))}e[qa(n)]=qa(r)}parseQueryParam(e){let n=XA(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let o=tN(this.remaining);o&&(r=o,this.capture(r))}let i=I_(n),s=I_(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=qd(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new C(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=M);let o=this.parseChildren();n[s]=Object.keys(o).length===1?o[M]:new z([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new C(4011,!1)}};function P_(t){return t.segments.length>0?new z([],{[M]:t}):t}function O_(t){let e={};for(let[r,i]of Object.entries(t.children)){let s=O_(i);if(r===M&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let n=new z(t.segments,e);return nN(n)}function nN(t){if(t.numberOfChildren===1&&t.children[M]){let e=t.children[M];return new z(t.segments.concat(e.segments),e.children)}return t}function $r(t){return t instanceof dn}function rN(t,e,n=null,r=null){let i=k_(t);return L_(i,e,n,r)}function k_(t){let e;function n(s){let o={};for(let c of s.children){let l=n(c);o[c.outlet]=l}let a=new z(s.url,o);return s===t&&(e=a),a}let r=n(t.root),i=P_(r);return e??i}function L_(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return Gd(i,i,i,n,r);let s=iN(e);if(s.toRoot())return Gd(i,i,new z([],{}),n,r);let o=sN(s,i,t),a=o.processChildren?Xi(o.segmentGroup,o.index,s.commands):j_(o.segmentGroup,o.index,s.commands);return Gd(i,o.segmentGroup,a,n,r)}function Ya(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function ns(t){return typeof t=="object"&&t!=null&&t.outlets}function Gd(t,e,n,r,i){let s={};r&&Object.entries(r).forEach(([c,l])=>{s[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`});let o;t===e?o=n:o=F_(t,e,n);let a=P_(O_(o));return new dn(a,s,i)}function F_(t,e,n){let r={};return Object.entries(t.children).forEach(([i,s])=>{s===e?r[i]=n:r[i]=F_(s,e,n)}),new z(t.segments,r)}var Ka=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Ya(r[0]))throw new C(4003,!1);let i=r.find(ns);if(i&&i!==T_(r))throw new C(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function iN(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Ka(!0,0,t);let e=0,n=!1,r=t.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new Ka(n,e,r)}var jr=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function sN(t,e,n){if(t.isAbsolute)return new jr(e,!0,0);if(!n)return new jr(e,!1,NaN);if(n.parent===null)return new jr(n,!0,0);let r=Ya(t.commands[0])?0:1,i=n.segments.length-1+r;return oN(n,i,t.numberOfDoubleDots)}function oN(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new C(4005,!1);i=r.segments.length}return new jr(r,!1,i-s)}function aN(t){return ns(t[0])?t[0].outlets:{[M]:t}}function j_(t,e,n){if(t??=new z([],{}),t.segments.length===0&&t.hasChildren())return Xi(t,e,n);let r=cN(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let s=new z(t.segments.slice(0,r.pathIndex),{});return s.children[M]=new z(t.segments.slice(r.pathIndex),t.children),Xi(s,0,i)}else return r.match&&i.length===0?new z(t.segments,{}):r.match&&!t.hasChildren()?ef(t,e,n):r.match?Xi(t,0,i):ef(t,e,n)}function Xi(t,e,n){if(n.length===0)return new z(t.segments,{});{let r=aN(n),i={};if(Object.keys(r).some(s=>s!==M)&&t.children[M]&&t.numberOfChildren===1&&t.children[M].segments.length===0){let s=Xi(t.children[M],e,n);return new z(t.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=j_(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new z(t.segments,i)}}function cN(t,e,n){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;let o=t.segments[i],a=n[r];if(ns(a))break;let c=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!C_(c,l,o))return s;r+=2}else{if(!C_(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function ef(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let s=n[i];if(ns(s)){let c=lN(s.outlets);return new z(r,c)}if(i===0&&Ya(n[0])){let c=t.segments[e];r.push(new $n(c.path,E_(n[0]))),i++;continue}let o=ns(s)?s.outlets[M]:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&Ya(a)?(r.push(new $n(o,E_(a))),i+=2):(r.push(new $n(o,{})),i++)}return new z(r,{})}function lN(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=ef(new z([],{}),0,r))}),e}function E_(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function C_(t,e,n){return t==n.path&&At(e,n.parameters)}var es="imperative",ve=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(ve||{}),Qe=class{constructor(e,n){this.id=e,this.url=n}},rs=class extends Qe{constructor(e,n,r="imperative",i=null){super(e,n),this.type=ve.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Hn=class extends Qe{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=ve.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Ue=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(Ue||{}),tf=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(tf||{}),fn=class extends Qe{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=ve.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Wn=class extends Qe{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=ve.NavigationSkipped}},is=class extends Qe{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=ve.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Qa=class extends Qe{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=ve.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},nf=class extends Qe{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=ve.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},rf=class extends Qe{constructor(e,n,r,i,s){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=ve.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},sf=class extends Qe{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=ve.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},of=class extends Qe{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=ve.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},af=class{constructor(e){this.route=e,this.type=ve.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},cf=class{constructor(e){this.route=e,this.type=ve.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},lf=class{constructor(e){this.snapshot=e,this.type=ve.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},uf=class{constructor(e){this.snapshot=e,this.type=ve.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},df=class{constructor(e){this.snapshot=e,this.type=ve.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ff=class{constructor(e){this.snapshot=e,this.type=ve.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var ss=class{},os=class{constructor(e){this.url=e}};var hf=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new nc,this.attachRef=null}},nc=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(r,i){let s=this.getOrCreateContext(r);s.outlet=i,this.contexts.set(r,s)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new hf,this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Za=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=pf(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=pf(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=gf(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return gf(e,this._root).map(n=>n.value)}};function pf(t,e){if(t===e.value)return e;for(let n of e.children){let r=pf(t,n);if(r)return r}return null}function gf(t,e){if(t===e.value)return[e];for(let n of e.children){let r=gf(t,n);if(r.length)return r.unshift(e),r}return[]}var je=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Fr(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var Ja=class extends Za{constructor(e,n){super(e),this.snapshot=n,Tf(this,e)}toString(){return this.snapshot.toString()}};function U_(t){let e=uN(t),n=new ge([new $n("",{})]),r=new ge({}),i=new ge({}),s=new ge({}),o=new ge(""),a=new Br(n,r,s,o,i,M,t,e.root);return a.snapshot=e.root,new Ja(new je(a,[]),e)}function uN(t){let e={},n={},r={},i="",s=new as([],e,r,i,n,M,t,null,{});return new Xa("",new je(s,[]))}var Br=class{constructor(e,n,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(F(l=>l[us]))??D(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(F(e=>Vr(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(F(e=>Vr(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function bf(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:_(_({},e.params),t.params),data:_(_({},e.data),t.data),resolve:_(_(_(_({},t.data),e.data),i?.data),t._resolvedData)}:r={params:_({},t.params),data:_({},t.data),resolve:_(_({},t.data),t._resolvedData??{})},i&&$_(i)&&(r.resolve[us]=i.title),r}var as=class{get title(){return this.data?.[us]}constructor(e,n,r,i,s,o,a,c,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Vr(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Vr(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},Xa=class extends Za{constructor(e,n){super(n),this.url=e,Tf(this,n)}toString(){return V_(this._root)}};function Tf(t,e){e.value._routerState=t,e.children.forEach(n=>Tf(t,n))}function V_(t){let e=t.children.length>0?` { ${t.children.map(V_).join(", ")} } `:"";return`${t.value}${e}`}function Yd(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,At(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),At(e.params,n.params)||t.paramsSubject.next(n.params),UA(e.url,n.url)||t.urlSubject.next(n.url),At(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function mf(t,e){let n=At(t.params,e.params)&&HA(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||mf(t.parent,e.parent))}function $_(t){return typeof t.title=="string"||t.title===null}var dN=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=M,this.activateEvents=new Ae,this.deactivateEvents=new Ae,this.attachEvents=new Ae,this.detachEvents=new Ae,this.parentContexts=m(nc),this.location=m(Pr),this.changeDetector=m(Wi),this.environmentInjector=m(We),this.inputBinder=m(Sf,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:s}=r.name;if(i)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new C(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new C(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new C(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new C(4013,!1);this._activatedRoute=r;let s=this.location,a=r.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,l=new vf(r,c,s.injector);this.activated=s.createComponent(a,{index:s.length,injector:l,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Wu({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[ga]});let t=e;return t})(),vf=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===Br?this.route:e===nc?this.childContexts:this.parent.get(e,n)}},Sf=new S("");function fN(t,e,n){let r=cs(t,e._root,n?n._root:void 0);return new Ja(r,e)}function cs(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=hN(t,e,n);return new je(r,i)}else{if(t.shouldAttach(e.value)){let s=t.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>cs(t,a)),o}}let r=pN(e.value),i=e.children.map(s=>cs(t,s));return new je(r,i)}}function hN(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return cs(t,r,i);return cs(t,r)})}function pN(t){return new Br(new ge(t.url),new ge(t.params),new ge(t.queryParams),new ge(t.fragment),new ge(t.data),t.outlet,t.component,t)}var B_="ngNavigationCancelingError";function H_(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=$r(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=W_(!1,Ue.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function W_(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[B_]=!0,n.cancellationCode=e,n}function gN(t){return z_(t)&&$r(t.url)}function z_(t){return!!t&&t[B_]}var mN=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=wt({type:e,selectors:[["ng-component"]],standalone:!0,features:[Tt],decls:1,vars:0,template:function(i,s){i&1&&Ee(0,"router-outlet")},dependencies:[dN],encapsulation:2});let t=e;return t})();function vN(t,e){return t.providers&&!t._injector&&(t._injector=Nd(t.providers,e,`Route: ${t.path}`)),t._injector??e}function Af(t){let e=t.children&&t.children.map(Af),n=e?ee(_({},t),{children:e}):_({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==M&&(n.component=mN),n}function Nt(t){return t.outlet||M}function yN(t,e){let n=t.filter(r=>Nt(r)===e);return n.push(...t.filter(r=>Nt(r)!==e)),n}function ds(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var _N=(t,e,n,r)=>F(i=>(new yf(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),yf=class{constructor(e,n,r,i,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),Yd(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=Fr(n);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=Fr(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=Fr(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=Fr(n);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new ff(s.value.snapshot))}),e.children.length&&this.forwardEvent(new uf(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(Yd(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Yd(a.route.value),this.activateChildRoutes(e,null,o.children)}else{let a=ds(i.snapshot);o.attachRef=null,o.route=i,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}},ec=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Ur=class{constructor(e,n){this.component=e,this.route=n}};function wN(t,e,n){let r=t._root,i=e?e._root:null;return Zi(r,i,n,[r.value])}function IN(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function Wr(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!wm(t)?t:e.get(t):r}function Zi(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=Fr(e);return t.children.forEach(o=>{EN(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>ts(a,n.getContext(o),i)),i}function EN(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=CN(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new ec(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Zi(t,e,a?a.children:null,r,i):Zi(t,e,n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Ur(a.outlet.component,o))}else o&&ts(e,a,i),i.canActivateChecks.push(new ec(r)),s.component?Zi(t,null,a?a.children:null,r,i):Zi(t,null,n,r,i);return i}function CN(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!Bn(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Bn(t.url,e.url)||!At(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!mf(t,e)||!At(t.queryParams,e.queryParams);case"paramsChange":default:return!mf(t,e)}}function ts(t,e,n){let r=Fr(t),i=t.value;Object.entries(r).forEach(([s,o])=>{i.component?e?ts(o,e.children.getContext(s),n):ts(o,null,n):ts(o,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new Ur(e.outlet.component,i)):n.canDeactivateChecks.push(new Ur(null,i)):n.canDeactivateChecks.push(new Ur(null,i))}function fs(t){return typeof t=="function"}function DN(t){return typeof t=="boolean"}function bN(t){return t&&fs(t.canLoad)}function TN(t){return t&&fs(t.canActivate)}function SN(t){return t&&fs(t.canActivateChild)}function AN(t){return t&&fs(t.canDeactivate)}function NN(t){return t&&fs(t.canMatch)}function q_(t){return t instanceof Ut||t?.name==="EmptyError"}var Ha=Symbol("INITIAL_VALUE");function Hr(){return $e(t=>Ao(t.map(e=>e.pipe(Vt(1),Al(Ha)))).pipe(F(e=>{for(let n of e)if(n!==!0){if(n===Ha)return Ha;if(n===!1||n instanceof dn)return n}return!0}),Ve(e=>e!==Ha),Vt(1)))}function MN(t,e){return le(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return o.length===0&&s.length===0?D(ee(_({},n),{guardsResult:!0})):RN(o,r,i,t).pipe(le(a=>a&&DN(a)?xN(r,s,t,e):D(a)),F(a=>ee(_({},n),{guardsResult:a})))})}function RN(t,e,n,r){return ae(t).pipe(le(i=>FN(i.component,i.route,n,e,r)),rt(i=>i!==!0,!0))}function xN(t,e,n,r){return ae(e).pipe(Sn(i=>vr(ON(i.route.parent,r),PN(i.route,r),LN(t,i.path,n),kN(t,i.route,n))),rt(i=>i!==!0,!0))}function PN(t,e){return t!==null&&e&&e(new df(t)),D(!0)}function ON(t,e){return t!==null&&e&&e(new lf(t)),D(!0)}function kN(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return D(!0);let i=r.map(s=>No(()=>{let o=ds(e)??n,a=Wr(s,o),c=TN(a)?a.canActivate(e,t):ln(o,()=>a(e,t));return hn(c).pipe(rt())}));return D(i).pipe(Hr())}function LN(t,e,n){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>IN(o)).filter(o=>o!==null).map(o=>No(()=>{let a=o.guards.map(c=>{let l=ds(o.node)??n,u=Wr(c,l),d=SN(u)?u.canActivateChild(r,t):ln(l,()=>u(r,t));return hn(d).pipe(rt())});return D(a).pipe(Hr())}));return D(s).pipe(Hr())}function FN(t,e,n,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return D(!0);let o=s.map(a=>{let c=ds(e)??i,l=Wr(a,c),u=AN(l)?l.canDeactivate(t,e,n,r):ln(c,()=>l(t,e,n,r));return hn(u).pipe(rt())});return D(o).pipe(Hr())}function jN(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return D(!0);let s=i.map(o=>{let a=Wr(o,t),c=bN(a)?a.canLoad(e,n):ln(t,()=>a(e,n));return hn(c)});return D(s).pipe(Hr(),G_(r))}function G_(t){return gl(se(e=>{if($r(e))throw H_(t,e)}),F(e=>e===!0))}function UN(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return D(!0);let s=i.map(o=>{let a=Wr(o,t),c=NN(a)?a.canMatch(e,n):ln(t,()=>a(e,n));return hn(c)});return D(s).pipe(Hr(),G_(r))}var ls=class{constructor(e){this.segmentGroup=e||null}},tc=class extends Error{constructor(e){super(),this.urlTree=e}};function Lr(t){return mr(new ls(t))}function VN(t){return mr(new C(4e3,!1))}function $N(t){return mr(W_(!1,Ue.GuardRejected))}var _f=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return D(r);if(i.numberOfChildren>1||!i.children[M])return VN(e.redirectTo);i=i.children[M]}}applyRedirectCommands(e,n,r){let i=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n.startsWith("/"))throw new tc(i);return i}applyRedirectCreateUrlTree(e,n,r,i){let s=this.createSegmentGroup(e,n.root,r,i);return new dn(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s.startsWith(":")){let a=s.substring(1);r[i]=n[a]}else r[i]=s}),r}createSegmentGroup(e,n,r,i){let s=this.createSegments(e,n.segments,r,i),o={};return Object.entries(n.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new z(s,o)}createSegments(e,n,r,i){return n.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new C(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},wf={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function BN(t,e,n,r,i){let s=Nf(t,e,n);return s.matched?(r=vN(e,r),UN(r,e,n,i).pipe(F(o=>o===!0?s:_({},wf)))):D(s)}function Nf(t,e,n){if(e.path==="**")return HN(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?_({},wf):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||jA)(n,t,e);if(!i)return _({},wf);let s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=i.consumed.length>0?_(_({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function HN(t){return{matched:!0,parameters:t.length>0?T_(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function D_(t,e,n,r){return n.length>0&&qN(t,n,r)?{segmentGroup:new z(e,zN(r,new z(n,t.children))),slicedSegments:[]}:n.length===0&&GN(t,n,r)?{segmentGroup:new z(t.segments,WN(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new z(t.segments,t.children),slicedSegments:n}}function WN(t,e,n,r){let i={};for(let s of n)if(rc(t,e,s)&&!r[Nt(s)]){let o=new z([],{});i[Nt(s)]=o}return _(_({},r),i)}function zN(t,e){let n={};n[M]=e;for(let r of t)if(r.path===""&&Nt(r)!==M){let i=new z([],{});n[Nt(r)]=i}return n}function qN(t,e,n){return n.some(r=>rc(t,e,r)&&Nt(r)!==M)}function GN(t,e,n){return n.some(r=>rc(t,e,r))}function rc(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function YN(t,e,n,r){return Nt(t)!==r&&(r===M||!rc(e,n,t))?!1:Nf(e,t,n).matched}function KN(t,e,n){return e.length===0&&!t.children[n]}var If=class{};function QN(t,e,n,r,i,s,o="emptyOnly"){return new Ef(t,e,n,r,i,o,s).recognize()}var ZN=31,Ef=class{constructor(e,n,r,i,s,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new _f(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new C(4002,`'${e.segmentGroup}'`)}recognize(){let e=D_(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(F(n=>{let r=new as([],Object.freeze({}),Object.freeze(_({},this.urlTree.queryParams)),this.urlTree.fragment,{},M,this.rootComponentType,null,{}),i=new je(r,n),s=new Xa("",i),o=rN(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root,null),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,M).pipe(Xt(r=>{if(r instanceof tc)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof ls?this.noMatchError(r):r}))}inheritParamsAndData(e,n){let r=e.value,i=bf(r,n,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),e.children.forEach(s=>this.inheritParamsAndData(s,r))}processSegmentGroup(e,n,r,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i,!0).pipe(F(s=>s instanceof je?[s]:[]))}processChildren(e,n,r){let i=[];for(let s of Object.keys(r.children))s==="primary"?i.unshift(s):i.push(s);return ae(i).pipe(Sn(s=>{let o=r.children[s],a=yN(n,s);return this.processSegmentGroup(e,a,o,s)}),Sl((s,o)=>(s.push(...o),s)),en(null),Tl(),le(s=>{if(s===null)return Lr(r);let o=Y_(s);return JN(o),D(o)}))}processSegment(e,n,r,i,s,o){return ae(n).pipe(Sn(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,r,i,s,o).pipe(Xt(c=>{if(c instanceof ls)return D(null);throw c}))),rt(a=>!!a),Xt(a=>{if(q_(a))return KN(r,i,s)?D(new If):Lr(r);throw a}))}processSegmentAgainstRoute(e,n,r,i,s,o,a){return YN(r,i,s,o)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,s,o):Lr(i):Lr(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o){let{matched:a,consumedSegments:c,positionalParamSegments:l,remainingSegments:u}=Nf(n,i,s);if(!a)return Lr(n);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>ZN&&(this.allowRedirects=!1));let d=this.applyRedirects.applyRedirectCommands(c,i.redirectTo,l);return this.applyRedirects.lineralizeSegments(i,d).pipe(le(f=>this.processSegment(e,r,n,f.concat(u),o,!1)))}matchSegmentAgainstRoute(e,n,r,i,s){let o=BN(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),o.pipe($e(a=>a.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe($e(({routes:c})=>{let l=r._loadedInjector??e,{consumedSegments:u,remainingSegments:d,parameters:f}=a,h=new as(u,f,Object.freeze(_({},this.urlTree.queryParams)),this.urlTree.fragment,eM(r),Nt(r),r.component??r._loadedComponent??null,r,tM(r)),{segmentGroup:p,slicedSegments:y}=D_(n,u,d,c);if(y.length===0&&p.hasChildren())return this.processChildren(l,c,p).pipe(F(A=>A===null?null:new je(h,A)));if(c.length===0&&y.length===0)return D(new je(h,[]));let w=Nt(r)===s;return this.processSegment(l,c,p,y,w?M:s,!0).pipe(F(A=>new je(h,A instanceof je?[A]:[])))}))):Lr(n)))}getChildConfig(e,n,r){return n.children?D({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?D({routes:n._loadedRoutes,injector:n._loadedInjector}):jN(e,n,r,this.urlSerializer).pipe(le(i=>i?this.configLoader.loadChildren(e,n).pipe(se(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):$N(n))):D({routes:[],injector:e})}};function JN(t){t.sort((e,n)=>e.value.outlet===M?-1:n.value.outlet===M?1:e.value.outlet.localeCompare(n.value.outlet))}function XN(t){let e=t.value.routeConfig;return e&&e.path===""}function Y_(t){let e=[],n=new Set;for(let r of t){if(!XN(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=Y_(r.children);e.push(new je(r.value,i))}return e.filter(r=>!n.has(r))}function eM(t){return t.data||{}}function tM(t){return t.resolve||{}}function nM(t,e,n,r,i,s){return le(o=>QN(t,e,n,r,o.extractedUrl,i,s).pipe(F(({state:a,tree:c})=>ee(_({},o),{targetSnapshot:a,urlAfterRedirects:c}))))}function rM(t,e){return le(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return D(n);let s=new Set(i.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let l of K_(c))o.add(l);let a=0;return ae(o).pipe(Sn(c=>s.has(c)?iM(c,r,t,e):(c.data=bf(c,c.parent,t).resolve,D(void 0))),se(()=>a++),_r(1),le(c=>a===o.size?D(n):Pe))})}function K_(t){let e=t.children.map(n=>K_(n)).flat();return[t,...e]}function iM(t,e,n,r){let i=t.routeConfig,s=t._resolve;return i?.title!==void 0&&!$_(i)&&(s[us]=i.title),sM(s,t,e,r).pipe(F(o=>(t._resolvedData=o,t.data=bf(t,t.parent,n).resolve,null)))}function sM(t,e,n,r){let i=Zd(t);if(i.length===0)return D({});let s={};return ae(i).pipe(le(o=>oM(t[o],e,n,r).pipe(rt(),se(a=>{s[o]=a}))),_r(1),bl(s),Xt(o=>q_(o)?Pe:mr(o)))}function oM(t,e,n,r){let i=ds(e)??r,s=Wr(t,i),o=s.resolve?s.resolve(e,n):ln(i,()=>s(e,n));return hn(o)}function Kd(t){return $e(e=>{let n=t(e);return n?ae(n).pipe(F(()=>e)):D(e)})}var Q_=(()=>{let e=class e{buildTitle(r){let i,s=r.root;for(;s!==void 0;)i=this.getResolvedTitleForRoute(s)??i,s=s.children.find(o=>o.outlet===M);return i}getResolvedTitleForRoute(r){return r.data[us]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:()=>m(aM),providedIn:"root"});let t=e;return t})(),aM=(()=>{let e=class e extends Q_{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(k(y_))},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Mf=new S("",{providedIn:"root",factory:()=>({})}),Rf=new S(""),cM=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=m(Od)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return D(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=hn(r.loadComponent()).pipe(F(Z_),se(o=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=o}),yr(()=>{this.componentLoaders.delete(r)})),s=new fr(i,()=>new Ie).pipe(dr());return this.componentLoaders.set(r,s),s}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return D({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=lM(i,this.compiler,r,this.onLoadEndListener).pipe(yr(()=>{this.childrenLoaders.delete(i)})),a=new fr(o,()=>new Ie).pipe(dr());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function lM(t,e,n,r){return hn(t.loadChildren()).pipe(F(Z_),le(i=>i instanceof Ri||Array.isArray(i)?D(i):ae(e.compileModuleAsync(i))),F(i=>{r&&r(t);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(n).injector,o=s.get(Rf,[],{optional:!0,self:!0}).flat()),{routes:o.map(Af),injector:s}}))}function uM(t){return t&&typeof t=="object"&&"default"in t}function Z_(t){return uM(t)?t.default:t}var xf=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:()=>m(dM),providedIn:"root"});let t=e;return t})(),dM=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),fM=new S("");var hM=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Ie,this.transitionAbortSubject=new Ie,this.configLoader=m(cM),this.environmentInjector=m(We),this.urlSerializer=m(Df),this.rootContexts=m(nc),this.location=m(zi),this.inputBindingEnabled=m(Sf,{optional:!0})!==null,this.titleStrategy=m(Q_),this.options=m(Mf,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=m(xf),this.createViewTransition=m(fM,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>D(void 0),this.rootComponentType=null;let r=s=>this.events.next(new af(s)),i=s=>this.events.next(new cf(s));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(ee(_(_({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,s){return this.transitions=new ge({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:es,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Ve(o=>o.id!==0),F(o=>ee(_({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),$e(o=>{let a=!1,c=!1;return D(o).pipe($e(l=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",Ue.SupersededByNewNavigation),Pe;this.currentTransition=o,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?ee(_({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let u=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=l.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!u&&d!=="reload"){let f="";return this.events.next(new Wn(l.id,this.urlSerializer.serialize(l.rawUrl),f,tf.IgnoredSameUrlNavigation)),l.resolve(null),Pe}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return D(l).pipe($e(f=>{let h=this.transitions?.getValue();return this.events.next(new rs(f.id,this.urlSerializer.serialize(f.extractedUrl),f.source,f.restoredState)),h!==this.transitions?.getValue()?Pe:Promise.resolve(f)}),nM(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),se(f=>{o.targetSnapshot=f.targetSnapshot,o.urlAfterRedirects=f.urlAfterRedirects,this.currentNavigation=ee(_({},this.currentNavigation),{finalUrl:f.urlAfterRedirects});let h=new Qa(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(h)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:f,extractedUrl:h,source:p,restoredState:y,extras:w}=l,A=new rs(f,this.urlSerializer.serialize(h),p,y);this.events.next(A);let re=U_(this.rootComponentType).snapshot;return this.currentTransition=o=ee(_({},l),{targetSnapshot:re,urlAfterRedirects:h,extras:ee(_({},w),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=h,D(o)}else{let f="";return this.events.next(new Wn(l.id,this.urlSerializer.serialize(l.extractedUrl),f,tf.IgnoredByUrlHandlingStrategy)),l.resolve(null),Pe}}),se(l=>{let u=new nf(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}),F(l=>(this.currentTransition=o=ee(_({},l),{guards:wN(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),o)),MN(this.environmentInjector,l=>this.events.next(l)),se(l=>{if(o.guardsResult=l.guardsResult,$r(l.guardsResult))throw H_(this.urlSerializer,l.guardsResult);let u=new rf(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(u)}),Ve(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",Ue.GuardRejected),!1)),Kd(l=>{if(l.guards.canActivateChecks.length)return D(l).pipe(se(u=>{let d=new sf(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}),$e(u=>{let d=!1;return D(u).pipe(rM(this.paramsInheritanceStrategy,this.environmentInjector),se({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(u,"",Ue.NoDataFromResolver)}}))}),se(u=>{let d=new of(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}))}),Kd(l=>{let u=d=>{let f=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&f.push(this.configLoader.loadComponent(d.routeConfig).pipe(se(h=>{d.component=h}),F(()=>{})));for(let h of d.children)f.push(...u(h));return f};return Ao(u(l.targetSnapshot.root)).pipe(en(null),Vt(1))}),Kd(()=>this.afterPreactivation()),$e(()=>{let{currentSnapshot:l,targetSnapshot:u}=o,d=this.createViewTransition?.(this.environmentInjector,l.root,u.root);return d?ae(d).pipe(F(()=>o)):D(o)}),F(l=>{let u=fN(r.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=o=ee(_({},l),{targetRouterState:u}),this.currentNavigation.targetRouterState=u,o}),se(()=>{this.events.next(new ss)}),_N(this.rootContexts,r.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),Vt(1),se({next:l=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Hn(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{a=!0}}),Nl(this.transitionAbortSubject.pipe(se(l=>{throw l}))),yr(()=>{!a&&!c&&this.cancelNavigationTransition(o,"",Ue.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),Xt(l=>{if(c=!0,z_(l))this.events.next(new fn(o.id,this.urlSerializer.serialize(o.extractedUrl),l.message,l.cancellationCode)),gN(l)?this.events.next(new os(l.url)):o.resolve(!1);else{this.events.next(new is(o.id,this.urlSerializer.serialize(o.extractedUrl),l,o.targetSnapshot??void 0));try{o.resolve(r.errorHandler(l))}catch(u){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(u)}}return Pe}))}))}cancelNavigationTransition(r,i,s){let o=new fn(r.id,this.urlSerializer.serialize(r.extractedUrl),i,s);this.events.next(o),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function pM(t){return t!==es}var gM=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:()=>m(mM),providedIn:"root"});let t=e;return t})(),Cf=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},mM=(()=>{let e=class e extends Cf{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=sd(e)))(s||e)}})(),e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),J_=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:()=>m(vM),providedIn:"root"});let t=e;return t})(),vM=(()=>{let e=class e extends J_{constructor(){super(...arguments),this.location=m(zi),this.urlSerializer=m(Df),this.options=m(Mf,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=m(xf),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new dn,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=U_(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof rs)this.stateMemento=this.createStateMemento();else if(r instanceof Wn)this.rawUrlTree=i.initialUrl;else if(r instanceof Qa){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(s,i)}}else r instanceof ss?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):r instanceof fn&&(r.code===Ue.GuardRejected||r.code===Ue.NoDataFromResolver)?this.restoreHistory(i):r instanceof is?this.restoreHistory(i,!0):r instanceof Hn&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let s=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(s)||i.extras.replaceUrl){let o=this.browserPageId,a=_(_({},i.extras.state),this.generateNgRouterState(i.id,o));this.location.replaceState(s,"",a)}else{let o=_(_({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(s,"",o)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,o=this.currentPageId-s;o!==0?this.location.historyGo(o):this.currentUrlTree===r.finalUrl&&o===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=sd(e)))(s||e)}})(),e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Ji=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(Ji||{});function yM(t,e){t.events.pipe(Ve(n=>n instanceof Hn||n instanceof fn||n instanceof is||n instanceof Wn),F(n=>n instanceof Hn||n instanceof Wn?Ji.COMPLETE:(n instanceof fn?n.code===Ue.Redirect||n.code===Ue.SupersededByNewNavigation:!1)?Ji.REDIRECTING:Ji.FAILED),Ve(n=>n!==Ji.REDIRECTING),Vt(1)).subscribe(()=>{e()})}function _M(t){throw t}var wM={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},IM={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},X_=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=m(Pa),this.stateManager=m(J_),this.options=m(Mf,{optional:!0})||{},this.pendingTasks=m($i),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=m(hM),this.urlSerializer=m(Df),this.location=m(zi),this.urlHandlingStrategy=m(xf),this._events=new Ie,this.errorHandler=this.options.errorHandler||_M,this.navigated=!1,this.routeReuseStrategy=m(gM),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=m(Rf,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!m(Sf,{optional:!0}),this.eventsSubscription=new ie,this.isNgZoneEnabled=m(Y)instanceof Y&&Y.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let s=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(s!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof fn&&i.code!==Ue.Redirect&&i.code!==Ue.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof Hn)this.navigated=!0;else if(i instanceof os){let a=this.urlHandlingStrategy.merge(i.url,s.currentRawUrl),c={info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||pM(s.source)};this.scheduleNavigation(a,es,null,c,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}CM(i)&&this._events.next(i)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),es,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,s){let o={replaceUrl:!0},a=s?.navigationId?s:null;if(s){let l=_({},s);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let c=this.parseUrl(r);this.scheduleNavigation(c,i,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(Af),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:s,queryParams:o,fragment:a,queryParamsHandling:c,preserveFragment:l}=i,u=l?this.currentUrlTree.fragment:a,d=null;switch(c){case"merge":d=_(_({},this.currentUrlTree.queryParams),o);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}d!==null&&(d=this.removeEmptyProps(d));let f;try{let h=s?s.snapshot:this.routerState.snapshot.root;f=k_(h)}catch{(typeof r[0]!="string"||!r[0].startsWith("/"))&&(r=[]),f=this.currentUrlTree.root}return L_(f,r,d,u??null)}navigateByUrl(r,i={skipLocationChange:!1}){let s=$r(r)?r:this.parseUrl(r),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,es,null,i)}navigate(r,i={skipLocationChange:!1}){return EM(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let s;if(i===!0?s=_({},wM):i===!1?s=_({},IM):s=i,$r(r))return w_(this.currentUrlTree,r,s);let o=this.parseUrl(r);return w_(this.currentUrlTree,o,s)}removeEmptyProps(r){return Object.entries(r).reduce((i,[s,o])=>(o!=null&&(i[s]=o),i),{})}scheduleNavigation(r,i,s,o,a){if(this.disposed)return Promise.resolve(!1);let c,l,u;a?(c=a.resolve,l=a.reject,u=a.promise):u=new Promise((f,h)=>{c=f,l=h});let d=this.pendingTasks.add();return yM(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:o,resolve:c,reject:l,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(f=>Promise.reject(f))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function EM(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new C(4008,!1)}function CM(t){return!(t instanceof ss)&&!(t instanceof os)}var DM=new S("");function ew(t,...e){return at([{provide:Rf,multi:!0,useValue:t},[],{provide:Br,useFactory:bM,deps:[X_]},{provide:Or,multi:!0,useFactory:TM},e.map(n=>n.\u0275providers)])}function bM(t){return t.routerState.root}function TM(){let t=m(lt);return e=>{let n=t.get(un);if(e!==n.components[0])return;let r=t.get(X_),i=t.get(SM);t.get(AM)===1&&r.initialNavigation(),t.get(NM,null,R.Optional)?.setUpPreloading(),t.get(DM,null,R.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var SM=new S("",{factory:()=>new Ie}),AM=new S("",{providedIn:"root",factory:()=>1});var NM=new S("");var Of={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};var g=function(t,e){if(!t)throw zn(e)},zn=function(t){return new Error("Firebase Database ("+Of.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};var nw=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},MM=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=t[n++],o=t[n++],a=t[n++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},sc={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let s=t[i],o=i+1<t.length,a=o?t[i+1]:0,c=i+2<t.length,l=c?t[i+2]:0,u=s>>2,d=(s&3)<<4|a>>4,f=(a&15)<<2|l>>6,h=l&63;c||(h=64,o||(f=64)),r.push(n[u],n[d],n[f],n[h])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(nw(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):MM(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||l==null||d==null)throw new kf;let f=s<<2|a>>4;if(r.push(f),l!==64){let h=a<<4&240|l>>2;if(r.push(h),d!==64){let p=l<<6&192|d;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},kf=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},Ff=function(t){let e=nw(t);return sc.encodeByteArray(e,!0)},hs=function(t){return Ff(t).replace(/\./g,"")},ps=function(t){try{return sc.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function rw(t){return iw(void 0,t)}function iw(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:let n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(let n in e)!e.hasOwnProperty(n)||!RM(n)||(t[n]=iw(t[n],e[n]));return t}function RM(t){return t!=="__proto__"}function xM(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var PM=()=>xM().__FIREBASE_DEFAULTS__,OM=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},kM=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&ps(t[1]);return e&&JSON.parse(e)},jf=()=>{try{return PM()||OM()||kM()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},sw=t=>{var e,n;return(n=(e=jf())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},ow=t=>{let e=sw(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Uf=()=>{var t;return(t=jf())===null||t===void 0?void 0:t.config},aw=t=>{var e;return(e=jf())===null||e===void 0?void 0:e[`_${t}`]};var zt=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function cw(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[hs(JSON.stringify(n)),hs(JSON.stringify(o)),""].join(".")}function dt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function gs(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(dt())}function lw(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function oc(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Rt(){return Of.NODE_CLIENT===!0||Of.NODE_ADMIN===!0}function uw(){try{return typeof indexedDB=="object"}catch{return!1}}function dw(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}var LM="FirebaseError",Mt=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=LM,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,qt.prototype.create)}},qt=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?FM(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Mt(i,a,r)}};function FM(t,e){return t.replace(jM,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var jM=/\{\$([^}]+)}/g;function zr(t){return JSON.parse(t)}function ce(t){return JSON.stringify(t)}var fw=function(t){let e={},n={},r={},i="";try{let s=t.split(".");e=zr(ps(s[0])||""),n=zr(ps(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}};var hw=function(t){let e=fw(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},pw=function(t){let e=fw(t).claims;return typeof e=="object"&&e.admin===!0};function ft(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function qn(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function ac(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ms(t,e,n){let r={};for(let i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function vs(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let s=t[i],o=e[i];if(tw(s)&&tw(o)){if(!vs(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function tw(t){return t!==null&&typeof t=="object"}function ys(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}var ic=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);let r=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)r[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){let f=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(f<<1|f>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],c=this.chain_[4],l,u;for(let d=0;d<80;d++){d<40?d<20?(l=a^s&(o^a),u=1518500249):(l=s^o^a,u=1859775393):d<60?(l=s&o|a&(s|o),u=2400959708):(l=s^o^a,u=3395469782);let f=(i<<5|i>>>27)+l+c+u+r[d]&4294967295;c=a,a=o,o=(s<<30|s>>>2)&4294967295,s=i,i=f}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);let r=n-this.blockSize,i=0,s=this.buf_,o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){let e=[],n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}};function gw(t,e){let n=new Lf(t,e);return n.subscribe.bind(n)}var Lf=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");UM(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Pf),i.error===void 0&&(i.error=Pf),i.complete===void 0&&(i.complete=Pf);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function UM(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Pf(){}function _s(t,e){return`${t} failed: ${e} argument `}var mw=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){let s=i-55296;r++,g(r<t.length,"Surrogate pair missing trail surrogate.");let o=t.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},ws=function(t){let e=0;for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};var _2=4*60*60*1e3;function Ze(t){return t&&t._delegate?t._delegate:t}var Je=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Gn="[DEFAULT]";var cc=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new zt;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if($M(e))try{this.getOrInitializeService({instanceIdentifier:Gn})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Gn){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return v(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Gn){return this.instances.has(e)}getOptions(e=Gn){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:VM(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Gn){return this.component?this.component.multipleInstances?e:Gn:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function VM(t){return t===Gn?void 0:t}function $M(t){return t.instantiationMode==="EAGER"}var Is=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new cc(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var BM=[],G=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(G||{}),HM={debug:G.DEBUG,verbose:G.VERBOSE,info:G.INFO,warn:G.WARN,error:G.ERROR,silent:G.SILENT},WM=G.INFO,zM={[G.DEBUG]:"log",[G.VERBOSE]:"log",[G.INFO]:"info",[G.WARN]:"warn",[G.ERROR]:"error"},qM=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=zM[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},pn=class{constructor(e){this.name=e,this._logLevel=WM,this._logHandler=qM,this._userLogHandler=null,BM.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in G))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?HM[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,G.DEBUG,...e),this._logHandler(this,G.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,G.VERBOSE,...e),this._logHandler(this,G.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,G.INFO,...e),this._logHandler(this,G.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,G.WARN,...e),this._logHandler(this,G.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,G.ERROR,...e),this._logHandler(this,G.ERROR,...e)}};var GM=(t,e)=>e.some(n=>t instanceof n),vw,yw;function YM(){return vw||(vw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function KM(){return yw||(yw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var _w=new WeakMap,$f=new WeakMap,ww=new WeakMap,Vf=new WeakMap,Hf=new WeakMap;function QM(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(xt(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&_w.set(n,t)}).catch(()=>{}),Hf.set(e,t),e}function ZM(t){if($f.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});$f.set(t,e)}var Bf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return $f.get(t);if(e==="objectStoreNames")return t.objectStoreNames||ww.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return xt(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Iw(t){Bf=t(Bf)}function JM(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(lc(this),e,...n);return ww.set(r,e.sort?e.sort():[e]),xt(r)}:KM().includes(t)?function(...e){return t.apply(lc(this),e),xt(_w.get(this))}:function(...e){return xt(t.apply(lc(this),e))}}function XM(t){return typeof t=="function"?JM(t):(t instanceof IDBTransaction&&ZM(t),GM(t,YM())?new Proxy(t,Bf):t)}function xt(t){if(t instanceof IDBRequest)return QM(t);if(Vf.has(t))return Vf.get(t);let e=XM(t);return e!==t&&(Vf.set(t,e),Hf.set(e,t)),e}var lc=t=>Hf.get(t);function Cw(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(t,e),a=xt(o);return r&&o.addEventListener("upgradeneeded",c=>{r(xt(o.result),c.oldVersion,c.newVersion,xt(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var eR=["get","getKey","getAll","getAllKeys","count"],tR=["put","add","delete","clear"],Wf=new Map;function Ew(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Wf.get(e))return Wf.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=tR.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||eR.includes(n)))return;let s=function(o,...a){return v(this,null,function*(){let c=this.transaction(o,i?"readwrite":"readonly"),l=c.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[n](...a),i&&c.done]))[0]})};return Wf.set(e,s),s}Iw(t=>ee(_({},t),{get:(e,n,r)=>Ew(e,n)||t.get(e,n,r),has:(e,n)=>!!Ew(e,n)||t.has(e,n)}));var qf=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(nR(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function nR(t){let e=t.getComponent();return e?.type==="VERSION"}var Gf="@firebase/app",Dw="0.10.5";var Yn=new pn("@firebase/app"),rR="@firebase/app-compat",iR="@firebase/analytics-compat",sR="@firebase/analytics",oR="@firebase/app-check-compat",aR="@firebase/app-check",cR="@firebase/auth",lR="@firebase/auth-compat",uR="@firebase/database",dR="@firebase/database-compat",fR="@firebase/functions",hR="@firebase/functions-compat",pR="@firebase/installations",gR="@firebase/installations-compat",mR="@firebase/messaging",vR="@firebase/messaging-compat",yR="@firebase/performance",_R="@firebase/performance-compat",wR="@firebase/remote-config",IR="@firebase/remote-config-compat",ER="@firebase/storage",CR="@firebase/storage-compat",DR="@firebase/firestore",bR="@firebase/vertexai-preview",TR="@firebase/firestore-compat",SR="firebase",AR="10.12.2";var Yf="[DEFAULT]",NR={[Gf]:"fire-core",[rR]:"fire-core-compat",[sR]:"fire-analytics",[iR]:"fire-analytics-compat",[aR]:"fire-app-check",[oR]:"fire-app-check-compat",[cR]:"fire-auth",[lR]:"fire-auth-compat",[uR]:"fire-rtdb",[dR]:"fire-rtdb-compat",[fR]:"fire-fn",[hR]:"fire-fn-compat",[pR]:"fire-iid",[gR]:"fire-iid-compat",[mR]:"fire-fcm",[vR]:"fire-fcm-compat",[yR]:"fire-perf",[_R]:"fire-perf-compat",[wR]:"fire-rc",[IR]:"fire-rc-compat",[ER]:"fire-gcs",[CR]:"fire-gcs-compat",[DR]:"fire-fst",[TR]:"fire-fst-compat",[bR]:"fire-vertex","fire-js":"fire-js",[SR]:"fire-js-all"};var Es=new Map,MR=new Map,Kf=new Map;function bw(t,e){try{t.container.addComponent(e)}catch(n){Yn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function mn(t){let e=t.name;if(Kf.has(e))return Yn.debug(`There were multiple attempts to register component ${e}.`),!1;Kf.set(e,t);for(let n of Es.values())bw(n,t);for(let n of MR.values())bw(n,t);return!0}function Xf(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function qr(t){return t.settings!==void 0}var RR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},gn=new qt("app","Firebase",RR);var Qf=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Je("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw gn.create("app-deleted",{appName:this._name})}};var Gr=AR;function eh(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Yf,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw gn.create("bad-app-name",{appName:String(i)});if(n||(n=Uf()),!n)throw gn.create("no-options");let s=Es.get(i);if(s){if(vs(n,s.options)&&vs(r,s.config))return s;throw gn.create("duplicate-app",{appName:i})}let o=new Is(i);for(let c of Kf.values())o.addComponent(c);let a=new Qf(n,r,o);return Es.set(i,a),a}function Ds(t=Yf){let e=Es.get(t);if(!e&&t===Yf&&Uf())return eh();if(!e)throw gn.create("no-app",{appName:t});return e}function uc(){return Array.from(Es.values())}function pe(t,e,n){var r;let i=(r=NR[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Yn.warn(a.join(" "));return}mn(new Je(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var xR="firebase-heartbeat-database",PR=1,Cs="firebase-heartbeat-store",zf=null;function Nw(){return zf||(zf=Cw(xR,PR,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Cs)}catch(n){console.warn(n)}}}}).catch(t=>{throw gn.create("idb-open",{originalErrorMessage:t.message})})),zf}function OR(t){return v(this,null,function*(){try{let n=(yield Nw()).transaction(Cs),r=yield n.objectStore(Cs).get(Mw(t));return yield n.done,r}catch(e){if(e instanceof Mt)Yn.warn(e.message);else{let n=gn.create("idb-get",{originalErrorMessage:e?.message});Yn.warn(n.message)}}})}function Tw(t,e){return v(this,null,function*(){try{let r=(yield Nw()).transaction(Cs,"readwrite");yield r.objectStore(Cs).put(e,Mw(t)),yield r.done}catch(n){if(n instanceof Mt)Yn.warn(n.message);else{let r=gn.create("idb-set",{originalErrorMessage:n?.message});Yn.warn(r.message)}}})}function Mw(t){return`${t.name}!${t.options.appId}`}var kR=1024,LR=30*24*60*60*1e3,Zf=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new Jf(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return v(this,null,function*(){var e,n;let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Sw();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let a=new Date(o.date).valueOf();return Date.now()-a<=LR}),this._storage.overwrite(this._heartbeatsCache)})}getHeartbeatsHeader(){return v(this,null,function*(){var e;if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=Sw(),{heartbeatsToSend:r,unsentEntries:i}=FR(this._heartbeatsCache.heartbeats),s=hs(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s})}};function Sw(){return new Date().toISOString().substring(0,10)}function FR(t,e=kR){let n=[],r=t.slice();for(let i of t){let s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Aw(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Aw(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var Jf=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return v(this,null,function*(){return uw()?dw().then(()=>!0).catch(()=>!1):!1})}read(){return v(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield OR(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return v(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return Tw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return v(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return Tw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function Aw(t){return hs(JSON.stringify({version:2,heartbeats:t})).length}function jR(t){mn(new Je("platform-logger",e=>new qf(e),"PRIVATE")),mn(new Je("heartbeat",e=>new Zf(e),"PRIVATE")),pe(Gf,Dw,t),pe(Gf,Dw,"esm2017"),pe("fire-js","")}jR("");var UR="firebase",VR="10.12.2";pe(UR,VR,"app");var Kr=new cn("ANGULARFIRE2_VERSION");function nh(t,e,n){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===n);if(s.length===1)return s[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var Ts=(t,e)=>{let n=e?[e]:uc(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},bs=class{constructor(){return Ts($R)}},$R="app-check";function Yr(){}var dc=class{zone;delegate;constructor(e,n=Il){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,n,r)}},th=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Yr,{},Yr,Yr)),n.pipe(se({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Ss=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new dc(Zone.current)),this.insideAngular=n.run(()=>new dc(Zone.current,wl)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(k(Y))};static \u0275prov=I({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function fc(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function BR(t){return fc().ngZone.runOutsideAngular(()=>t())}function Kn(t){return fc().ngZone.run(()=>t())}function HR(t){return WR(fc())(t)}function WR(t){return function(n){return n=n.lift(new th(t.ngZone)),n.pipe(Jt(t.outsideAngular),Zt(t.insideAngular))}}var zR=(t,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),Kn(()=>t.apply(void 0,r))},Pt=(t,e)=>function(){let n,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(n||=Kn(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Yr,{},Yr,Yr))),r[s]=zR(r[s],n));let i=BR(()=>t.apply(this,r));if(!e)if(i instanceof $){let s=fc();return i.pipe(Jt(s.outsideAngular),Zt(s.insideAngular))}else return Kn(()=>i);return i instanceof $?i.pipe(HR):i instanceof Promise?Kn(()=>new Promise((s,o)=>i.then(a=>Kn(()=>s(a)),a=>Kn(()=>o(a))))):typeof i=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),i.apply(this,arguments)}:Kn(()=>i)};var Qn=class{constructor(e){return e}},As=class{constructor(){return uc()}};function qR(t){return t&&t.length===1?t[0]:new Qn(Ds())}var rh=new S("angularfire2._apps"),GR={provide:Qn,useFactory:qR,deps:[[new _t,rh]]},YR={provide:As,deps:[[new _t,rh]]};function KR(t){return(e,n)=>{let r=n.get(Ke);pe("angularfire",Kr.full,"core"),pe("angularfire",Kr.full,"app"),pe("angular",ky.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new Qn(i)}}function Rw(t,...e){return at([GR,YR,{provide:rh,useFactory:KR(t),multi:!0,deps:[Y,lt,Ss,...e]}])}var xw=Pt(eh,!0);function Vw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var $w=Vw,Bw=new qt("auth","Firebase",Vw());var mc=new pn("@firebase/auth");function QR(t,...e){mc.logLevel<=G.WARN&&mc.warn(`Auth (${Gr}): ${t}`,...e)}function pc(t,...e){mc.logLevel<=G.ERROR&&mc.error(`Auth (${Gr}): ${t}`,...e)}function Pw(t,...e){throw gh(t,...e)}function ph(t,...e){return gh(t,...e)}function Hw(t,e,n){let r=Object.assign(Object.assign({},$w()),{[e]:n});return new qt("auth","Firebase",r).create(e,{appName:t.name})}function gc(t){return Hw(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function gh(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Bw.create(t,...e)}function W(t,e,...n){if(!t)throw gh(e,...n)}function Ns(t){let e="INTERNAL ASSERTION FAILED: "+t;throw pc(e),new Error(e)}function vc(t,e){t||Ns(e)}function ZR(){return Ow()==="http:"||Ow()==="https:"}function Ow(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function JR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(ZR()||lw()||"connection"in navigator)?navigator.onLine:!0}function XR(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var Jn=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,vc(n>e,"Short delay should be less than long delay!"),this.isMobile=gs()||oc()}get(){return JR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function ex(t,e){vc(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var yc=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ns("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ns("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ns("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var tx={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var nx=new Jn(3e4,6e4);function Ww(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function Ec(s,o,a,c){return v(this,arguments,function*(t,e,n,r,i={}){return zw(t,i,()=>v(this,null,function*(){let l={},u={};r&&(e==="GET"?u=r:l={body:JSON.stringify(r)});let d=ys(Object.assign({key:t.config.apiKey},u)).slice(1),f=yield t._getAdditionalHeaders();return f["Content-Type"]="application/json",t.languageCode&&(f["X-Firebase-Locale"]=t.languageCode),yc.fetch()(qw(t,t.config.apiHost,n,d),Object.assign({method:e,headers:f,referrerPolicy:"no-referrer"},l))}))})}function zw(t,e,n){return v(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},tx),e);try{let i=new oh(t),s=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw hc(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw hc(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw hc(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw hc(t,"user-disabled",o);let u=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw Hw(t,u,l);Pw(t,u)}}catch(i){if(i instanceof Mt)throw i;Pw(t,"network-request-failed",{message:String(i)})}})}function qw(t,e,n,r){let i=`${e}${n}?${r}`;return t.config.emulator?ex(t.config,i):`${t.config.apiScheme}://${i}`}var oh=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(ph(this.auth,"network-request-failed")),nx.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function hc(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=ph(t,e,r);return i.customData._tokenResponse=n,i}function rx(t,e){return v(this,null,function*(){return Ec(t,"POST","/v1/accounts:delete",e)})}function Gw(t,e){return v(this,null,function*(){return Ec(t,"POST","/v1/accounts:lookup",e)})}function Ms(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function mh(t,e=!1){return v(this,null,function*(){let n=Ze(t),r=yield n.getIdToken(e),i=Yw(r);W(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:Ms(ih(i.auth_time)),issuedAtTime:Ms(ih(i.iat)),expirationTime:Ms(ih(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function ih(t){return Number(t)*1e3}function Yw(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return pc("JWT malformed, contained fewer than 3 sections"),null;try{let i=ps(n);return i?JSON.parse(i):(pc("Failed to decode base64 JWT payload"),null)}catch(i){return pc("Caught error parsing JWT payload as JSON",i?.toString()),null}}function kw(t){let e=Yw(t);return W(e,"internal-error"),W(typeof e.exp<"u","internal-error"),W(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function ah(t,e,n=!1){return v(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof Mt&&ix(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function ix({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var ch=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>v(this,null,function*(){yield this.iteration()}),n)}iteration(){return v(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var xs=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ms(this.lastLoginAt),this.creationTime=Ms(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function _c(t){return v(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield ah(t,Gw(n,{idToken:r}));W(i?.users.length,n,"internal-error");let s=i.users[0];t._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?Kw(s.providerUserInfo):[],a=sx(t.providerData,o),c=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!a?.length,u=c?l:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new xs(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,d)})}function vh(t){return v(this,null,function*(){let e=Ze(t);yield _c(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function sx(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Kw(t){return t.map(e=>{var{providerId:n}=e,r=El(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function ox(t,e){return v(this,null,function*(){let n=yield zw(t,{},()=>v(this,null,function*(){let r=ys({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=qw(t,i,"/v1/token",`key=${s}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",yc.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function ax(t,e){return v(this,null,function*(){return Ec(t,"POST","/v2/accounts:revokeToken",Ww(t,e))})}var Rs=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){W(e.idToken,"internal-error"),W(typeof e.idToken<"u","internal-error"),W(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):kw(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){W(e.length!==0,"internal-error");let n=kw(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return v(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(W(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return v(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield ox(e,n);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new t;return r&&(W(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(W(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(W(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return Ns("not implemented")}};function vn(t,e){W(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var Ps=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=El(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ch(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new xs(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return v(this,null,function*(){let n=yield ah(this,this.stsTokenManager.getToken(this.auth,e));return W(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return mh(this,e)}reload(){return vh(this)}_assign(e){this!==e&&(W(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){W(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return v(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield _c(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return v(this,null,function*(){if(qr(this.auth.app))return Promise.reject(gc(this.auth));let e=yield this.getIdToken();return yield ah(this,rx(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,c,l,u;let d=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(i=n.email)!==null&&i!==void 0?i:void 0,h=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,y=(a=n.tenantId)!==null&&a!==void 0?a:void 0,w=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,A=(l=n.createdAt)!==null&&l!==void 0?l:void 0,re=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:J,emailVerified:Te,isAnonymous:Ft,providerData:we,stsTokenManager:jt}=n;W(J&&jt,e,"internal-error");let fi=Rs.fromJSON(this.name,jt);W(typeof J=="string",e,"internal-error"),vn(d,e.name),vn(f,e.name),W(typeof Te=="boolean",e,"internal-error"),W(typeof Ft=="boolean",e,"internal-error"),vn(h,e.name),vn(p,e.name),vn(y,e.name),vn(w,e.name),vn(A,e.name),vn(re,e.name);let hi=new t({uid:J,auth:e,email:f,emailVerified:Te,displayName:d,isAnonymous:Ft,photoURL:p,phoneNumber:h,tenantId:y,stsTokenManager:fi,createdAt:A,lastLoginAt:re});return we&&Array.isArray(we)&&(hi.providerData=we.map(sl=>Object.assign({},sl))),w&&(hi._redirectEventId=w),hi}static _fromIdTokenResponse(e,n,r=!1){return v(this,null,function*(){let i=new Rs;i.updateFromServerResponse(n);let s=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield _c(s),s})}static _fromGetAccountInfoResponse(e,n,r){return v(this,null,function*(){let i=n.users[0];W(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?Kw(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new Rs;a.updateFromIdToken(r);let c=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new xs(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(c,l),c})}};var Lw=new Map;function Zn(t){vc(t instanceof Function,"Expected a class definition");let e=Lw.get(t);return e?(vc(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Lw.set(t,e),e)}var cx=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return v(this,null,function*(){return!0})}_set(n,r){return v(this,null,function*(){this.storage[n]=r})}_get(n){return v(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return v(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),lh=cx;function sh(t,e,n){return`firebase:${t}:${e}:${n}`}var wc=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=sh(this.userKey,i.apiKey,s),this.fullPersistenceKey=sh("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return v(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?Ps._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return v(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return v(this,null,function*(){if(!n.length)return new t(Zn(lh),e,r);let i=(yield Promise.all(n.map(l=>v(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),s=i[0]||Zn(lh),o=sh(r,e.config.apiKey,e.name),a=null;for(let l of n)try{let u=yield l._get(o);if(u){let d=Ps._fromJSON(e,u);l!==s&&(a=d),s=l;break}}catch{}let c=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new t(s,e,r):(s=c[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(n.map(l=>v(this,null,function*(){if(l!==s)try{yield l._remove(o)}catch{}}))),new t(s,e,r))})}};function Fw(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(fx(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(lx(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(px(e))return"Blackberry";if(gx(e))return"Webos";if(ux(e))return"Safari";if((e.includes("chrome/")||dx(e))&&!e.includes("edge/"))return"Chrome";if(hx(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function lx(t=dt()){return/firefox\//i.test(t)}function ux(t=dt()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function dx(t=dt()){return/crios\//i.test(t)}function fx(t=dt()){return/iemobile/i.test(t)}function hx(t=dt()){return/android/i.test(t)}function px(t=dt()){return/blackberry/i.test(t)}function gx(t=dt()){return/webos/i.test(t)}function Qw(t,e=[]){let n;switch(t){case"Browser":n=Fw(dt());break;case"Worker":n=`${Fw(dt())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Gr}/${r}`}var uh=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return v(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function mx(n){return v(this,arguments,function*(t,e={}){return Ec(t,"GET","/v2/passwordPolicy",Ww(t,e))})}var vx=6,dh=class{constructor(e){var n,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:vx,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var fh=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ic(this),this.idTokenSubscription=new Ic(this),this.beforeStateQueue=new uh(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Bw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Zn(n)),this._initializationPromise=this.queue(()=>v(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield wc.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return v(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return v(this,null,function*(){try{let n=yield Gw(this,{idToken:e}),r=yield Ps._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return v(this,null,function*(){var n;if(qr(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!o||o===a)&&c?.user&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return W(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return v(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return v(this,null,function*(){try{yield _c(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=XR()}_delete(){return v(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return v(this,null,function*(){if(qr(this.app))return Promise.reject(gc(this));let n=e?Ze(e):null;return n&&W(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return v(this,null,function*(){if(!this._deleted)return e&&W(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>v(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return v(this,null,function*(){return qr(this.app)?Promise.reject(gc(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return qr(this.app)?Promise.reject(gc(this)):this.queue(()=>v(this,null,function*(){yield this.assertedPersistence.setPersistence(Zn(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return v(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return v(this,null,function*(){let e=yield mx(this),n=new dh(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new qt("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return v(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield ax(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return v(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return v(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&Zn(e)||this._popupRedirectResolver;W(n,this,"argument-error"),this.redirectPersistenceManager=yield wc.create(this,[Zn(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return v(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>v(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return v(this,null,function*(){if(e===this.currentUser)return this.queue(()=>v(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let s=typeof n=="function"?n:n.next.bind(n),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(W(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){let c=e.addObserver(n,r,i);return()=>{o=!0,c()}}else{let c=e.addObserver(n);return()=>{o=!0,c()}}}directlySetCurrentUser(e){return v(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return W(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Qw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return v(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return v(this,null,function*(){var e;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&QR(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function yx(t){return Ze(t)}var Ic=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=gw(n=>this.observer=n)}get next(){return W(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var _x={loadJS(){return v(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function wx(t){_x=t}function Ix(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function Ex(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Zn);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}var gH=Ix("rcb"),mH=new Jn(3e4,6e4);var vH=new Jn(2e3,1e4);var yH=10*60*1e3;var _H=new Jn(3e4,6e4);var wH=new Jn(5e3,15e3);var IH=encodeURIComponent("fac");var jw="@firebase/auth",Uw="1.7.4";var hh=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return v(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){W(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function Cx(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Dx(t){mn(new Je("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;W(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Qw(t)},l=new fh(r,i,s,c);return Ex(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),mn(new Je("auth-internal",e=>{let n=yx(e.getProvider("auth").getImmediate());return(r=>new hh(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),pe(jw,Uw,Cx(t)),pe(jw,Uw,"esm2017")}var bx=5*60,EH=aw("authIdTokenMaxAge")||bx;function Tx(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}wx({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let s=ph("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",Tx().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Dx("Browser");var bP="auth";var Cc=class{constructor(){return Ts(bP)}};var Zw="@firebase/database",Jw="1.0.5";var wp="";function TP(t){wp=t}var bh=class{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),ce(n))}get(e){let n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:zr(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}};var Th=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return ft(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}};var NI=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){let e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new bh(e)}}catch{}return new Th},er=NI("localStorage"),Sh=NI("sessionStorage");var Jr=new pn("@firebase/database"),SP=function(){let t=1;return function(){return t++}}(),MI=function(t){let e=mw(t),n=new ic;n.update(e);let r=n.digest();return sc.encodeByteArray(r)},eo=function(...t){let e="";for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=eo.apply(null,r):typeof r=="object"?e+=ce(r):e+=r,e+=" "}return e},tr=null,Xw=!0,AP=function(t,e){g(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(Jr.logLevel=G.VERBOSE,tr=Jr.log.bind(Jr),e&&Sh.set("logging_enabled",!0)):typeof t=="function"?tr=t:(tr=null,Sh.remove("logging_enabled"))},ye=function(...t){if(Xw===!0&&(Xw=!1,tr===null&&Sh.get("logging_enabled")===!0&&AP(!0)),tr){let e=eo.apply(null,t);tr(e)}},to=function(t){return function(...e){ye(t,...e)}},Ah=function(...t){let e="FIREBASE INTERNAL ERROR: "+eo(...t);Jr.error(e)},Gt=function(...t){let e=`FIREBASE FATAL ERROR: ${eo(...t)}`;throw Jr.error(e),new Error(e)},De=function(...t){let e="FIREBASE WARNING: "+eo(...t);Jr.warn(e)},NP=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&De("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Ip=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},MP=function(t){if(Rt()||document.readyState==="complete")t();else{let e=!1,n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},ei="[MIN_NAME]",nr="[MAX_NAME]",ir=function(t,e){if(t===e)return 0;if(t===ei||e===nr)return-1;if(e===ei||t===nr)return 1;{let n=eI(t),r=eI(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},RP=function(t,e){return t===e?0:t<e?-1:1},Os=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+ce(e))},Ep=function(t){if(typeof t!="object"||t===null)return ce(t);let e=[];for(let r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=ce(e[r]),n+=":",n+=Ep(t[e[r]]);return n+="}",n},RI=function(t,e){let n=t.length;if(n<=e)return[t];let r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function _e(t,e){for(let n in t)t.hasOwnProperty(n)&&e(n,t[n])}var xI=function(t){g(!Ip(t),"Invalid JSON number");let e=11,n=52,r=(1<<e-1)-1,i,s,o,a,c;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));let l=[];for(c=n;c;c-=1)l.push(o%2?1:0),o=Math.floor(o/2);for(c=e;c;c-=1)l.push(s%2?1:0),s=Math.floor(s/2);l.push(i?1:0),l.reverse();let u=l.join(""),d="";for(c=0;c<64;c+=8){let f=parseInt(u.substr(c,8),2).toString(16);f.length===1&&(f="0"+f),d=d+f}return d.toLowerCase()},xP=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},PP=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function OP(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");let r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}var kP=new RegExp("^-?(0*)\\d{1,10}$"),LP=-2147483648,FP=2147483647,eI=function(t){if(kP.test(t)){let e=Number(t);if(e>=LP&&e<=FP)return e}return null},ci=function(t){try{t()}catch(e){setTimeout(()=>{let n=e.stack||"";throw De("Exception was thrown by user callback.",n),e},Math.floor(0))}},jP=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Us=function(t,e){let n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};var Nh=class{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){De(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var Mh=class{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(ye("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',De(e)}},Vs=(()=>{class t{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}t.OWNER="owner";return t})(),bc="5",PI="v",OI="s",kI="r",LI="f",FI=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,jI="ls",UI="p",Rh="ac",VI="websocket",$I="long_polling";var Tc=class{constructor(e,n,r,i,s=!1,o="",a=!1,c=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=er.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&er.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}};function UP(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function BI(t,e,n){g(typeof e=="string","typeof type must == string"),g(typeof n=="object","typeof params must == object");let r;if(e===VI)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===$I)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);UP(t)&&(n.ns=t.namespace);let i=[];return _e(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}var xh=class{constructor(){this.counters_={}}incrementCounter(e,n=1){ft(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return rw(this.counters_)}};var yh={},_h={};function Cp(t){let e=t.toString();return yh[e]||(yh[e]=new xh),yh[e]}function VP(t,e){let n=t.toString();return _h[n]||(_h[n]=e()),_h[n]}var Ph=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){let r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&ci(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var tI="start",$P="close",BP="pLPCommand",HP="pRTLPCB",HI="id",WI="pw",zI="ser",WP="cb",zP="seg",qP="ts",GP="d",YP="dframe",qI=1870,GI=30,KP=qI-GI,QP=25e3,ZP=3e4,Oh=class t{constructor(e,n,r,i,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=to(e),this.stats_=Cp(n),this.urlFn=c=>(this.appCheckToken&&(c[Rh]=this.appCheckToken),BI(n,$I,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new Ph(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(ZP)),MP(()=>{if(this.isClosed_)return;this.scriptTagHolder=new kh((...s)=>{let[o,a,c,l,u]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===tI)this.id=a,this.password=c;else if(o===$P)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{let[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);let r={};r[tI]="t",r[zI]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[WP]=this.scriptTagHolder.uniqueCallbackIdentifier),r[PI]=bc,this.transportSessionId&&(r[OI]=this.transportSessionId),this.lastSessionId&&(r[jI]=this.lastSessionId),this.applicationId&&(r[UI]=this.applicationId),this.appCheckToken&&(r[Rh]=this.appCheckToken),typeof location<"u"&&location.hostname&&FI.test(location.hostname)&&(r[kI]=LI);let i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){t.forceAllow_=!0}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){return Rt()?!1:t.forceAllow_?!0:!t.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!xP()&&!PP()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let n=ce(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);let r=Ff(n),i=RI(r,KP);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){if(Rt())return;this.myDisconnFrame=document.createElement("iframe");let r={};r[YP]="t",r[HI]=e,r[WI]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let n=ce(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}},kh=class t{constructor(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,Rt())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=SP(),window[BP+this.uniqueCallbackIdentifier]=e,window[HP+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');let o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){ye("frame writing exception"),a.stack&&ye(a.stack),ye(a)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||ye("No IE domain setting required")}catch{let r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[HI]=this.myID,e[WI]=this.myPW,e[zI]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+GI+r.length<=qI;){let o=this.pendingSegs.shift();r=r+"&"+zP+i+"="+o.seg+"&"+qP+i+"="+o.ts+"&"+GP+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);let r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(QP)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){Rt()?this.doNodeLongPoll(e,n):setTimeout(()=>{try{if(!this.sendNewPolls)return;let r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){let i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{ye("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};var JP=16384,XP=45e3,Sc=null;typeof MozWebSocket<"u"?Sc=MozWebSocket:typeof WebSocket<"u"&&(Sc=WebSocket);var ks=(()=>{class t{constructor(n,r,i,s,o,a,c){this.connId=n,this.applicationId=i,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=to(this.connId),this.stats_=Cp(r),this.connURL=t.connectionURL_(r,a,c,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(n,r,i,s,o){let a={};return a[PI]=bc,!Rt()&&typeof location<"u"&&location.hostname&&FI.test(location.hostname)&&(a[kI]=LI),r&&(a[OI]=r),i&&(a[jI]=i),s&&(a[Rh]=s),o&&(a[UI]=o),BI(n,VI,a)}open(n,r){this.onDisconnect=r,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,er.set("previous_websocket_failure",!0);try{let i;if(Rt()){let s=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":`Firebase/${bc}/${wp}/${process.platform}/${s}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);let o=process.env,a=this.connURL.indexOf("wss://")===0?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new Sc(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){let r=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(r);i&&i.length>1&&parseFloat(i[1])<4.4&&(n=!0)}return!n&&Sc!==null&&!t.forceDisallow_}static previouslyFailed(){return er.isInMemoryStorage||er.get("previous_websocket_failure")===!0}markConnectionHealthy(){er.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){let r=this.frames.join("");this.frames=null;let i=zr(r);this.onMessage(i)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if(g(this.frames===null,"We already have a frame buffer"),n.length<=6){let r=Number(n);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(this.mySock===null)return;let r=n.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{let i=this.extractFrameCount_(r);i!==null&&this.appendFrame_(i)}}send(n){this.resetKeepAlive();let r=ce(n);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);let i=RI(r,JP);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(XP))}sendString_(n){try{this.mySock.send(n)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4;return t})(),eO=(()=>{class t{constructor(n){this.initTransports_(n)}static get ALL_TRANSPORTS(){return[Oh,ks]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(n){let r=ks&&ks.isAvailable(),i=r&&!ks.previouslyFailed();if(n.webSocketOnly&&(r||De("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[ks];else{let s=this.transports_=[];for(let o of t.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);t.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}t.globalTransportInitialized_=!1;return t})(),tO=6e4,nO=5e3,rO=10*1024,iO=100*1024,wh="t",nI="d",sO="s",rI="r",oO="e",iI="o",sI="a",oI="n",aI="p",aO="h",Lh=class{constructor(e,n,r,i,s,o,a,c,l,u){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=to("c:"+this.id+":"),this.transportManager_=new eO(n),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));let i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Us(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>iO?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>rO?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){let n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(wh in e){let n=e[wh];n===sI?this.upgradeIfSecondaryHealthy_():n===rI?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===iI&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let n=Os("t",e),r=Os("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:aI,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:sI,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:oI,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let n=Os("t",e),r=Os("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let n=Os(wh,e);if(nI in e){let r=e[nI];if(n===aO){let i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===oI){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===sO?this.onConnectionShutdown_(r):n===rI?this.onReset_(r):n===oO?Ah("Server Error: "+r):n===iI?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Ah("Unknown control packet command: "+n)}}onHandshake_(e){let n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),bc!==r&&De("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Us(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(tO))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Us(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(nO))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:aI,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(er.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var Ac=class{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}};var Nc=class{constructor(e){this.allowedEvents_=e,this.listeners_={},g(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){let r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});let i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);let i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){g(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}};var Mc=class t extends Nc{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!gs()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new t}getInitialEvent(e){return g(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}};var cI=32,lI=768,q=class{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}};function B(){return new q("")}function x(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function In(t){return t.pieces_.length-t.pieceNum_}function Z(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new q(t.pieces_,e)}function Dp(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function cO(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function Ws(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function YI(t){if(t.pieceNum_>=t.pieces_.length)return null;let e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new q(e,0)}function te(t,e){let n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof q)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{let r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new q(n,0)}function O(t){return t.pieceNum_>=t.pieces_.length}function Ce(t,e){let n=x(t),r=x(e);if(n===null)return e;if(n===r)return Ce(Z(t),Z(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function lO(t,e){let n=Ws(t,0),r=Ws(e,0);for(let i=0;i<n.length&&i<r.length;i++){let s=ir(n[i],r[i]);if(s!==0)return s}return n.length===r.length?0:n.length<r.length?-1:1}function bp(t,e){if(In(t)!==In(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Xe(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(In(t)>In(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var Fh=class{constructor(e,n){this.errorPrefix_=n,this.parts_=Ws(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=ws(this.parts_[r]);KI(this)}};function uO(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=ws(e),KI(t)}function dO(t){let e=t.parts_.pop();t.byteLength_-=ws(e),t.parts_.length>0&&(t.byteLength_-=1)}function KI(t){if(t.byteLength_>lI)throw new Error(t.errorPrefix_+"has a key path longer than "+lI+" bytes ("+t.byteLength_+").");if(t.parts_.length>cI)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+cI+") or object contains a cycle "+Xn(t))}function Xn(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}var jh=class t extends Nc{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{let r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new t}getInitialEvent(e){return g(e==="visible","Unknown event type: "+e),[this.visible_]}};var Ls=1e3,fO=60*5*1e3,uI=30*1e3,hO=1.3,pO=3e4,gO="server_kill",dI=3,Tp=(()=>{class t extends Ac{constructor(n,r,i,s,o,a,c,l){if(super(),this.repoInfo_=n,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=l,this.id=t.nextPersistentConnectionId_++,this.log_=to("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Ls,this.maxReconnectDelay_=fO,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!Rt())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");jh.getInstance().on("visible",this.onVisible_,this),n.host.indexOf("fblocal")===-1&&Mc.getInstance().on("online",this.onOnline_,this)}sendRequest(n,r,i){let s=++this.requestNumber_,o={r:s,a:n,b:r};this.log_(ce(o)),g(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[s]=i)}get(n){this.initConnection_();let r=new zt,s={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:a=>{let c=a.d;a.s==="ok"?r.resolve(c):r.reject(c)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;let o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),r.promise}listen(n,r,i,s){this.initConnection_();let o=n._queryIdentifier,a=n._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),g(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),g(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");let c={onComplete:s,hashFn:r,query:n,tag:i};this.listens.get(a).set(o,c),this.connected_&&this.sendListen_(c)}sendGet_(n){let r=this.outstandingGets_[n];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(n){let r=n.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);let o={p:i},a="q";n.tag&&(o.q=r._queryObject,o.t=n.tag),o.h=n.hashFn(),this.sendRequest(a,o,c=>{let l=c.d,u=c.s;t.warnOnListenWarnings_(l,r),(this.listens.get(i)&&this.listens.get(i).get(s))===n&&(this.log_("listen response",c),u!=="ok"&&this.removeListen_(i,s),n.onComplete&&n.onComplete(u,l))})}static warnOnListenWarnings_(n,r){if(n&&typeof n=="object"&&ft(n,"w")){let i=qn(n,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){let s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',o=r._path.toString();De(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&n.length===40||pw(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=uI)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let n=this.authToken_,r=hw(n)?"auth":"gauth",i={cred:n};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{let o=s.s,a=s.d||"error";this.authToken_===n&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{let r=n.s,i=n.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(n,r){let i=n._path.toString(),s=n._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),g(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,n._queryObject,r)}sendUnlisten_(n,r,i,s){this.log_("Unlisten on "+n+" for "+r);let o={p:n},a="n";s&&(o.q=i,o.t=s),this.sendRequest(a,o)}onDisconnectPut(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:r,onComplete:i})}onDisconnectMerge(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:r,onComplete:i})}onDisconnectCancel(n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(n,r,i,s){let o={p:r,d:i};this.log_("onDisconnect "+n,o),this.sendRequest(n,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(n,r,i,s){this.putInternal("p",n,r,i,s)}merge(n,r,i,s){this.putInternal("m",n,r,i,s)}putInternal(n,r,i,s,o){this.initConnection_();let a={p:r,d:i};o!==void 0&&(a.h=o),this.outstandingPuts_.push({action:n,request:a,onComplete:s}),this.outstandingPutCount_++;let c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+r)}sendPut_(n){let r=this.outstandingPuts_[n].action,i=this.outstandingPuts_[n].request,s=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(r,i,o=>{this.log_(r+" response",o),delete this.outstandingPuts_[n],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(n){if(this.connected_){let r={c:n};this.log_("reportStats",r),this.sendRequest("s",r,i=>{if(i.s!=="ok"){let o=i.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+ce(n));let r=n.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,r){this.log_("handleServerMessage",n,r),n==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):n==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):n==="c"?this.onListenRevoked_(r.p,r.q):n==="ac"?this.onAuthRevoked_(r.s,r.d):n==="apc"?this.onAppCheckRevoked_(r.s,r.d):n==="sd"?this.onSecurityDebugPacket_(r):Ah("Unrecognized action received from server: "+ce(n)+`
Are you using the latest client?`)}onReady_(n,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(n),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){g(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Ls,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=Ls,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>pO&&(this.reconnectDelay_=Ls),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let n=new Date().getTime()-this.lastConnectionAttemptTime_,r=Math.max(0,this.reconnectDelay_-n);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*hO)}this.onConnectStatus_(!1)}establishConnection_(){return v(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+t.nextConnectionId_++,o=this.lastSessionId,a=!1,c=null,l=function(){c?c.close():(a=!0,i())},u=function(f){g(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(f)};this.realtime_={close:l,sendRequest:u};let d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[f,h]=yield Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);a?ye("getToken() completed but was canceled"):(ye("getToken() completed. Creating connection."),this.authToken_=f&&f.accessToken,this.appCheckToken_=h&&h.token,c=new Lh(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,n,r,i,p=>{De(p+" ("+this.repoInfo_.toString()+")"),this.interrupt(gO)},o))}catch(f){this.log_("Failed to get token: "+f),a||(this.repoInfo_.nodeAdmin&&De(f),l())}}})}interrupt(n){ye("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){ye("Resuming connection for reason: "+n),delete this.interruptReasons_[n],ac(this.interruptReasons_)&&(this.reconnectDelay_=Ls,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){let r=n-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){let r=this.outstandingPuts_[n];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(n,r){let i;r?i=r.map(o=>Ep(o)).join("$"):i="default";let s=this.removeListen_(n,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(n,r){let i=new q(n).toString(),s;if(this.listens.has(i)){let o=this.listens.get(i);s=o.get(r),o.delete(r),o.size===0&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(n,r){ye("Auth token revoked: "+n+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(n==="invalid_token"||n==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=dI&&(this.reconnectDelay_=uI,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,r){ye("App check token revoked: "+n+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(n==="invalid_token"||n==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=dI&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let n of this.listens.values())for(let r of n.values())this.sendListen_(r);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){let n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){let n={},r="js";Rt()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),n["sdk."+r+"."+wp.replace(/\./g,"-")]=1,gs()?n["framework.cordova"]=1:oc()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){let n=Mc.getInstance().currentlyOnline();return ac(this.interruptReasons_)&&n}}t.nextPersistentConnectionId_=0,t.nextConnectionId_=0;return t})(),P=class t{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new t(e,n)}};var ti=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){let r=new P(ei,e),i=new P(ei,n);return this.compare(r,i)!==0}minPost(){return P.MIN}};var Dc,Rc=class extends ti{static get __EMPTY_NODE(){return Dc}static set __EMPTY_NODE(e){Dc=e}compare(e,n){return ir(e.name,n.name)}isDefinedOn(e){throw zn("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return P.MIN}maxPost(){return new P(nr,Dc)}makePost(e,n){return g(typeof e=="string","KeyIndex indexValue must always be a string."),new P(e,Dc)}toString(){return".key"}},Xr=new Rc;var Zr=class{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},ht=(()=>{class t{constructor(n,r,i,s,o){this.key=n,this.value=r,this.color=i??t.RED,this.left=s??et.EMPTY_NODE,this.right=o??et.EMPTY_NODE}copy(n,r,i,s,o){return new t(n??this.key,r??this.value,i??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,r,i){let s=this,o=i(n,s.key);return o<0?s=s.copy(null,null,null,s.left.insert(n,r,i),null):o===0?s=s.copy(null,r,null,null,null):s=s.copy(null,null,null,null,s.right.insert(n,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return et.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,r){let i,s;if(i=this,r(n,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(n,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),r(n,i.key)===0){if(i.right.isEmpty())return et.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(n,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){let n=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){let n=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){let n=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,r)}checkMaxDepth_(){let n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return t.RED=!0,t.BLACK=!1,t})(),Uh=class{copy(e,n,r,i,s){return this}insert(e,n,r){return new ht(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},et=class t{constructor(e,n=t.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,ht.BLACK,null,null))}remove(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,ht.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Zr(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Zr(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Zr(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Zr(this.root_,null,this.comparator_,!0,e)}};et.EMPTY_NODE=new Uh;function mO(t,e){return ir(t.name,e.name)}function Sp(t,e){return ir(t,e)}var Vh;function vO(t){Vh=t}var QI=function(t){return typeof t=="number"?"number:"+xI(t):"string:"+t},ZI=function(t){if(t.isLeafNode()){let e=t.val();g(typeof e=="string"||typeof e=="number"||typeof e=="object"&&ft(e,".sv"),"Priority must be a string or number.")}else g(t===Vh||t.isEmpty(),"priority of unexpected type.");g(t===Vh||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var fI,ni=(()=>{class t{constructor(n,r=t.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=r,this.lazyHash_=null,g(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),ZI(this.priorityNode_)}static set __childrenNodeConstructor(n){fI=n}static get __childrenNodeConstructor(){return fI}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new t(this.value_,n)}getImmediateChild(n){return n===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return O(n)?this:x(n)===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,r){return null}updateImmediateChild(n,r){return n===".priority"?this.updatePriority(r):r.isEmpty()&&n!==".priority"?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,r).updatePriority(this.priorityNode_)}updateChild(n,r){let i=x(n);return i===null?r:r.isEmpty()&&i!==".priority"?this:(g(i!==".priority"||In(n)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(Z(n),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,r){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+QI(this.priorityNode_.val())+":");let r=typeof this.value_;n+=r+":",r==="number"?n+=xI(this.value_):n+=this.value_,this.lazyHash_=MI(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===t.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof t.__childrenNodeConstructor?-1:(g(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){let r=typeof n.value_,i=typeof this.value_,s=t.VALUE_TYPE_ORDER.indexOf(r),o=t.VALUE_TYPE_ORDER.indexOf(i);return g(s>=0,"Unknown leaf type: "+r),g(o>=0,"Unknown leaf type: "+i),s===o?i==="object"?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(n){if(n===this)return!0;if(n.isLeafNode()){let r=n;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}t.VALUE_TYPE_ORDER=["object","boolean","number","string"];return t})(),JI,XI;function yO(t){JI=t}function _O(t){XI=t}var $h=class extends ti{compare(e,n){let r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?ir(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return P.MIN}maxPost(){return new P(nr,new ni("[PRIORITY-POST]",XI))}makePost(e,n){let r=JI(e);return new P(n,new ni("[PRIORITY-POST]",r))}toString(){return".priority"}},ne=new $h;var wO=Math.log(2),Bh=class{constructor(e){let n=s=>parseInt(Math.log(s)/wO,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;let i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},xc=function(t,e,n,r){t.sort(e);let i=function(c,l){let u=l-c,d,f;if(u===0)return null;if(u===1)return d=t[c],f=n?n(d):d,new ht(f,d.node,ht.BLACK,null,null);{let h=parseInt(u/2,10)+c,p=i(c,h),y=i(h+1,l);return d=t[h],f=n?n(d):d,new ht(f,d.node,ht.BLACK,p,y)}},s=function(c){let l=null,u=null,d=t.length,f=function(p,y){let w=d-p,A=d;d-=p;let re=i(w+1,A),J=t[w],Te=n?n(J):J;h(new ht(Te,J.node,y,null,re))},h=function(p){l?(l.left=p,l=p):(u=p,l=p)};for(let p=0;p<c.count;++p){let y=c.nextBitIsOne(),w=Math.pow(2,c.count-(p+1));y?f(w,ht.BLACK):(f(w,ht.BLACK),f(w,ht.RED))}return u},o=new Bh(t.length),a=s(o);return new et(r||e,a)};var Ih,Qr={},ri=class t{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return g(Qr&&ne,"ChildrenNode.ts has not been loaded"),Ih=Ih||new t({".priority":Qr},{".priority":ne}),Ih}get(e){let n=qn(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof et?n:null}hasIndex(e){return ft(this.indexSet_,e.toString())}addIndex(e,n){g(e!==Xr,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],i=!1,s=n.getIterator(P.Wrap),o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=xc(r,e.getCompare()):a=Qr;let c=e.toString(),l=Object.assign({},this.indexSet_);l[c]=e;let u=Object.assign({},this.indexes_);return u[c]=a,new t(u,l)}addToIndexes(e,n){let r=ms(this.indexes_,(i,s)=>{let o=qn(this.indexSet_,s);if(g(o,"Missing index implementation for "+s),i===Qr)if(o.isDefinedOn(e.node)){let a=[],c=n.getIterator(P.Wrap),l=c.getNext();for(;l;)l.name!==e.name&&a.push(l),l=c.getNext();return a.push(e),xc(a,o.getCompare())}else return Qr;else{let a=n.get(e.name),c=i;return a&&(c=c.remove(new P(e.name,a))),c.insert(e,e.node)}});return new t(r,this.indexSet_)}removeFromIndexes(e,n){let r=ms(this.indexes_,i=>{if(i===Qr)return i;{let s=n.get(e.name);return s?i.remove(new P(e.name,s)):i}});return new t(r,this.indexSet_)}};var Fs,N=(()=>{class t{constructor(n,r,i){this.children_=n,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&ZI(this.priorityNode_),this.children_.isEmpty()&&g(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Fs||(Fs=new t(new et(Sp),null,ri.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Fs}updatePriority(n){return this.children_.isEmpty()?this:new t(this.children_,n,this.indexMap_)}getImmediateChild(n){if(n===".priority")return this.getPriority();{let r=this.children_.get(n);return r===null?Fs:r}}getChild(n){let r=x(n);return r===null?this:this.getImmediateChild(r).getChild(Z(n))}hasChild(n){return this.children_.get(n)!==null}updateImmediateChild(n,r){if(g(r,"We should always be passing snapshot nodes"),n===".priority")return this.updatePriority(r);{let i=new P(n,r),s,o;r.isEmpty()?(s=this.children_.remove(n),o=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(n,r),o=this.indexMap_.addToIndexes(i,this.children_));let a=s.isEmpty()?Fs:this.priorityNode_;return new t(s,a,o)}}updateChild(n,r){let i=x(n);if(i===null)return r;{g(x(n)!==".priority"||In(n)===1,".priority must be the last token in a path");let s=this.getImmediateChild(i).updateChild(Z(n),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;let r={},i=0,s=0,o=!0;if(this.forEachChild(ne,(a,c)=>{r[a]=c.val(n),i++,o&&t.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!n&&o&&s<2*i){let a=[];for(let c in r)a[c]=r[c];return a}else return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let n="";this.getPriority().isEmpty()||(n+="priority:"+QI(this.getPriority().val())+":"),this.forEachChild(ne,(r,i)=>{let s=i.hash();s!==""&&(n+=":"+r+":"+s)}),this.lazyHash_=n===""?"":MI(n)}return this.lazyHash_}getPredecessorChildName(n,r,i){let s=this.resolveIndex_(i);if(s){let o=s.getPredecessorKey(new P(n,r));return o?o.name:null}else return this.children_.getPredecessorKey(n)}getFirstChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(n){let r=this.getFirstChildName(n);return r?new P(r,this.children_.get(r)):null}getLastChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(n){let r=this.getLastChildName(n);return r?new P(r,this.children_.get(r)):null}forEachChild(n,r){let i=this.resolveIndex_(n);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(n,s=>s);{let s=this.children_.getIteratorFrom(n.name,P.Wrap),o=s.peek();for(;o!=null&&r.compare(o,n)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(n,s=>s);{let s=this.children_.getReverseIteratorFrom(n.name,P.Wrap),o=s.peek();for(;o!=null&&r.compare(o,n)>0;)s.getNext(),o=s.peek();return s}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===no?-1:0}withIndex(n){if(n===Xr||this.indexMap_.hasIndex(n))return this;{let r=this.indexMap_.addIndex(n,this.children_);return new t(this.children_,this.priorityNode_,r)}}isIndexed(n){return n===Xr||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{let r=n;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){let i=this.getIterator(ne),s=r.getIterator(ne),o=i.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=i.getNext(),a=s.getNext()}return o===null&&a===null}else return!1;else return!1}}resolveIndex_(n){return n===Xr?null:this.indexMap_.get(n.toString())}}return t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t})(),Hh=class extends N{constructor(){super(new et(Sp),N.EMPTY_NODE,ri.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return N.EMPTY_NODE}isEmpty(){return!1}},no=new Hh;Object.defineProperties(P,{MIN:{value:new P(ei,N.EMPTY_NODE)},MAX:{value:new P(nr,no)}});Rc.__EMPTY_NODE=N.EMPTY_NODE;ni.__childrenNodeConstructor=N;vO(no);_O(no);var IO=!0;function de(t,e=null){if(t===null)return N.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),g(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){let n=t;return new ni(n,de(e))}if(!(t instanceof Array)&&IO){let n=[],r=!1;if(_e(t,(o,a)=>{if(o.substring(0,1)!=="."){let c=de(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new P(o,c)))}}),n.length===0)return N.EMPTY_NODE;let s=xc(n,mO,o=>o.name,Sp);if(r){let o=xc(n,ne.getCompare());return new N(s,de(e),new ri({".priority":o},{".priority":ne}))}else return new N(s,de(e),ri.Default)}else{let n=N.EMPTY_NODE;return _e(t,(r,i)=>{if(ft(t,r)&&r.substring(0,1)!=="."){let s=de(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(de(e))}}yO(de);var Wh=class extends ti{constructor(e){super(),this.indexPath_=e,g(!O(e)&&x(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){let r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?ir(e.name,n.name):s}makePost(e,n){let r=de(e),i=N.EMPTY_NODE.updateChild(this.indexPath_,r);return new P(n,i)}maxPost(){let e=N.EMPTY_NODE.updateChild(this.indexPath_,no);return new P(nr,e)}toString(){return Ws(this.indexPath_,0).join("/")}};var zh=class extends ti{compare(e,n){let r=e.node.compareTo(n.node);return r===0?ir(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return P.MIN}maxPost(){return P.MAX}makePost(e,n){let r=de(e);return new P(n,r)}toString(){return".value"}},EO=new zh;function eE(t){return{type:"value",snapshotNode:t}}function ii(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function zs(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function qs(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function CO(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}var Gs=class{constructor(e){this.index_=e}updateChild(e,n,r,i,s,o){g(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");let a=e.getImmediateChild(n);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(zs(n,a)):g(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(ii(n,r)):o.trackChildChange(qs(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(ne,(i,s)=>{n.hasChild(i)||r.trackChildChange(zs(i,s))}),n.isLeafNode()||n.forEachChild(ne,(i,s)=>{if(e.hasChild(i)){let o=e.getImmediateChild(i);o.equals(s)||r.trackChildChange(qs(i,s,o))}else r.trackChildChange(ii(i,s))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?N.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}};var Pc=class t{constructor(e){this.indexedFilter_=new Gs(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){let n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,i,s,o){return this.matches(new P(n,r))||(r=N.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,i,s,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=N.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(N.EMPTY_NODE);let s=this;return n.forEachChild(ne,(o,a)=>{s.matches(new P(o,a))||(i=i.updateImmediateChild(o,N.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){let n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){let n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}};var qh=class{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{let r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{let r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new Pc(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,i,s,o){return this.rangedFilter_.matches(new P(n,r))||(r=N.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,i,s,o):this.fullLimitUpdateChild_(e,n,r,s,o)}updateFullNode(e,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=N.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=N.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){let a=s.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))i=i.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(N.EMPTY_NODE);let s;this.reverse_?s=i.getReverseIterator(this.index_):s=i.getIterator(this.index_);let o=0;for(;s.hasNext();){let a=s.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:i=i.updateImmediateChild(a.name,N.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,i,s){let o;if(this.reverse_){let d=this.index_.getCompare();o=(f,h)=>d(h,f)}else o=this.index_.getCompare();let a=e;g(a.numChildren()===this.limit_,"");let c=new P(n,r),l=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(c);if(a.hasChild(n)){let d=a.getImmediateChild(n),f=i.getChildAfterChild(this.index_,l,this.reverse_);for(;f!=null&&(f.name===n||a.hasChild(f.name));)f=i.getChildAfterChild(this.index_,f,this.reverse_);let h=f==null?1:o(f,c);if(u&&!r.isEmpty()&&h>=0)return s?.trackChildChange(qs(n,r,d)),a.updateImmediateChild(n,r);{s?.trackChildChange(zs(n,d));let y=a.updateImmediateChild(n,N.EMPTY_NODE);return f!=null&&this.rangedFilter_.matches(f)?(s?.trackChildChange(ii(f.name,f.node)),y.updateImmediateChild(f.name,f.node)):y}}else return r.isEmpty()?e:u&&o(l,c)>=0?(s!=null&&(s.trackChildChange(zs(l.name,l.node)),s.trackChildChange(ii(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(l.name,N.EMPTY_NODE)):e}};var Gh=class t{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ne}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return g(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return g(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ei}hasEnd(){return this.endSet_}getIndexEndValue(){return g(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return g(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:nr}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return g(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ne}copy(){let e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}};function DO(t){return t.loadsAllData()?new Gs(t.getIndex()):t.hasLimit()?new qh(t):new Pc(t)}function hI(t){let e={};if(t.isDefault())return e;let n;if(t.index_===ne?n="$priority":t.index_===EO?n="$value":t.index_===Xr?n="$key":(g(t.index_ instanceof Wh,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=ce(n),t.startSet_){let r=t.startAfterSet_?"startAfter":"startAt";e[r]=ce(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+ce(t.indexStartName_))}if(t.endSet_){let r=t.endBeforeSet_?"endBefore":"endAt";e[r]=ce(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+ce(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function pI(t){let e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==ne&&(e.i=t.index_.toString()),e}var Yh=class t extends Ac{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=to("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(g(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){let s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);let o=t.getListenId_(e,r),a={};this.listens_[o]=a;let c=hI(e._queryParams);this.restRequest_(s+".json",c,(l,u)=>{let d=u;if(l===404&&(d=null,l=null),l===null&&this.onDataUpdate_(s,d,!1,r),qn(this.listens_,o)===a){let f;l?l===401?f="permission_denied":f="rest_error:"+l:f="ok",i(f,null)}})}unlisten(e,n){let r=t.getListenId_(e,n);delete this.listens_[r]}get(e){let n=hI(e._queryParams),r=e._path.toString(),i=new zt;return this.restRequest_(r+".json",n,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);let o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+ys(n);this.log_("Sending REST request for "+o);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=zr(a.responseText)}catch{De("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&De("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}};var Kh=class{constructor(){this.rootNode_=N.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}};function Oc(){return{value:null,children:new Map}}function tE(t,e,n){if(O(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{let r=x(e);t.children.has(r)||t.children.set(r,Oc());let i=t.children.get(r);e=Z(e),tE(i,e,n)}}function Qh(t,e,n){t.value!==null?n(e,t.value):bO(t,(r,i)=>{let s=new q(e.toString()+"/"+r);Qh(i,s,n)})}function bO(t,e){t.children.forEach((n,r)=>{e(r,n)})}var Zh=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),n=Object.assign({},e);return this.last_&&_e(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}};var gI=10*1e3,TO=30*1e3,SO=5*60*1e3,Jh=class{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new Zh(e);let r=gI+(TO-gI)*Math.random();Us(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){let e=this.statsListener_.get(),n={},r=!1;_e(e,(i,s)=>{s>0&&ft(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),Us(this.reportStats_.bind(this),Math.floor(Math.random()*2*SO))}};var Ot=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}(Ot||{});function Ap(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Np(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Mp(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}var Xh=class t{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=Ot.ACK_USER_WRITE,this.source=Ap()}operationForChild(e){if(O(this.path)){if(this.affectedTree.value!=null)return g(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let n=this.affectedTree.subtree(new q(e));return new t(B(),n,this.revert)}}else return g(x(this.path)===e,"operationForChild called for unrelated child."),new t(Z(this.path),this.affectedTree,this.revert)}};var kc=class t{constructor(e,n){this.source=e,this.path=n,this.type=Ot.LISTEN_COMPLETE}operationForChild(e){return O(this.path)?new t(this.source,B()):new t(this.source,Z(this.path))}};var si=class t{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=Ot.OVERWRITE}operationForChild(e){return O(this.path)?new t(this.source,B(),this.snap.getImmediateChild(e)):new t(this.source,Z(this.path),this.snap)}};var Ys=class t{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=Ot.MERGE}operationForChild(e){if(O(this.path)){let n=this.children.subtree(new q(e));return n.isEmpty()?null:n.value?new si(this.source,B(),n.value):new t(this.source,B(),n)}else return g(x(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,Z(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var kt=class{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(O(e))return this.isFullyInitialized()&&!this.filtered_;let n=x(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}};var ep=class{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}};function AO(t,e,n,r){let i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(CO(o.childName,o.snapshotNode))}),js(t,i,"child_removed",e,r,n),js(t,i,"child_added",e,r,n),js(t,i,"child_moved",s,r,n),js(t,i,"child_changed",e,r,n),js(t,i,"value",e,r,n),i}function js(t,e,n,r,i,s){let o=r.filter(a=>a.type===n);o.sort((a,c)=>MO(t,a,c)),o.forEach(a=>{let c=NO(t,a,s);i.forEach(l=>{l.respondsTo(a.type)&&e.push(l.createEvent(c,t.query_))})})}function NO(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function MO(t,e,n){if(e.childName==null||n.childName==null)throw zn("Should only compare child_ events.");let r=new P(e.childName,e.snapshotNode),i=new P(n.childName,n.snapshotNode);return t.index_.compare(r,i)}function Kc(t,e){return{eventCache:t,serverCache:e}}function $s(t,e,n,r){return Kc(new kt(e,n,r),t.serverCache)}function nE(t,e,n,r){return Kc(t.eventCache,new kt(e,n,r))}function Lc(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function rr(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}var Eh,RO=()=>(Eh||(Eh=new et(RP)),Eh),be=class t{constructor(e,n=RO()){this.value=e,this.children=n}static fromObject(e){let n=new t(null);return _e(e,(r,i)=>{n=n.set(new q(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:B(),value:this.value};if(O(e))return null;{let r=x(e),i=this.children.get(r);if(i!==null){let s=i.findRootMostMatchingPathAndValue(Z(e),n);return s!=null?{path:te(new q(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(O(e))return this;{let n=x(e),r=this.children.get(n);return r!==null?r.subtree(Z(e)):new t(null)}}set(e,n){if(O(e))return new t(n,this.children);{let r=x(e),s=(this.children.get(r)||new t(null)).set(Z(e),n),o=this.children.insert(r,s);return new t(this.value,o)}}remove(e){if(O(e))return this.children.isEmpty()?new t(null):new t(null,this.children);{let n=x(e),r=this.children.get(n);if(r){let i=r.remove(Z(e)),s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new t(null):new t(this.value,s)}else return this}}get(e){if(O(e))return this.value;{let n=x(e),r=this.children.get(n);return r?r.get(Z(e)):null}}setTree(e,n){if(O(e))return n;{let r=x(e),s=(this.children.get(r)||new t(null)).setTree(Z(e),n),o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new t(this.value,o)}}fold(e){return this.fold_(B(),e)}fold_(e,n){let r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(te(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,B(),n)}findOnPath_(e,n,r){let i=this.value?r(n,this.value):!1;if(i)return i;if(O(e))return null;{let s=x(e),o=this.children.get(s);return o?o.findOnPath_(Z(e),te(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,B(),n)}foreachOnPath_(e,n,r){if(O(e))return this;{this.value&&r(n,this.value);let i=x(e),s=this.children.get(i);return s?s.foreachOnPath_(Z(e),te(n,i),r):new t(null)}}foreach(e){this.foreach_(B(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(te(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}};var pt=class t{constructor(e){this.writeTree_=e}static empty(){return new t(new be(null))}};function Bs(t,e,n){if(O(e))return new pt(new be(n));{let r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){let i=r.path,s=r.value,o=Ce(i,e);return s=s.updateChild(o,n),new pt(t.writeTree_.set(i,s))}else{let i=new be(n),s=t.writeTree_.setTree(e,i);return new pt(s)}}}function tp(t,e,n){let r=t;return _e(n,(i,s)=>{r=Bs(r,te(e,i),s)}),r}function mI(t,e){if(O(e))return pt.empty();{let n=t.writeTree_.setTree(e,new be(null));return new pt(n)}}function np(t,e){return sr(t,e)!=null}function sr(t,e){let n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Ce(n.path,e)):null}function vI(t){let e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(ne,(r,i)=>{e.push(new P(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new P(r,i.value))}),e}function _n(t,e){if(O(e))return t;{let n=sr(t,e);return n!=null?new pt(new be(n)):new pt(t.writeTree_.subtree(e))}}function rp(t){return t.writeTree_.isEmpty()}function oi(t,e){return rE(B(),t.writeTree_,e)}function rE(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(g(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=rE(te(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(te(t,".priority"),r)),n}}function Qc(t,e){return aE(e,t)}function xO(t,e,n,r,i){g(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=Bs(t.visibleWrites,e,n)),t.lastWriteId=r}function PO(t,e,n,r){g(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=tp(t.visibleWrites,e,n),t.lastWriteId=r}function OO(t,e){for(let n=0;n<t.allWrites.length;n++){let r=t.allWrites[n];if(r.writeId===e)return r}return null}function kO(t,e){let n=t.allWrites.findIndex(a=>a.writeId===e);g(n>=0,"removeWrite called with nonexistent writeId.");let r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){let a=t.allWrites[o];a.visible&&(o>=n&&LO(a,r.path)?i=!1:Xe(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return FO(t),!0;if(r.snap)t.visibleWrites=mI(t.visibleWrites,r.path);else{let a=r.children;_e(a,c=>{t.visibleWrites=mI(t.visibleWrites,te(r.path,c))})}return!0}else return!1}function LO(t,e){if(t.snap)return Xe(t.path,e);for(let n in t.children)if(t.children.hasOwnProperty(n)&&Xe(te(t.path,n),e))return!0;return!1}function FO(t){t.visibleWrites=iE(t.allWrites,jO,B()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function jO(t){return t.visible}function iE(t,e,n){let r=pt.empty();for(let i=0;i<t.length;++i){let s=t[i];if(e(s)){let o=s.path,a;if(s.snap)Xe(n,o)?(a=Ce(n,o),r=Bs(r,a,s.snap)):Xe(o,n)&&(a=Ce(o,n),r=Bs(r,B(),s.snap.getChild(a)));else if(s.children){if(Xe(n,o))a=Ce(n,o),r=tp(r,a,s.children);else if(Xe(o,n))if(a=Ce(o,n),O(a))r=tp(r,B(),s.children);else{let c=qn(s.children,x(a));if(c){let l=c.getChild(Z(a));r=Bs(r,B(),l)}}}else throw zn("WriteRecord should have .snap or .children")}}return r}function sE(t,e,n,r,i){if(!r&&!i){let s=sr(t.visibleWrites,e);if(s!=null)return s;{let o=_n(t.visibleWrites,e);if(rp(o))return n;if(n==null&&!np(o,B()))return null;{let a=n||N.EMPTY_NODE;return oi(o,a)}}}else{let s=_n(t.visibleWrites,e);if(!i&&rp(s))return n;if(!i&&n==null&&!np(s,B()))return null;{let o=function(l){return(l.visible||i)&&(!r||!~r.indexOf(l.writeId))&&(Xe(l.path,e)||Xe(e,l.path))},a=iE(t.allWrites,o,e),c=n||N.EMPTY_NODE;return oi(a,c)}}}function UO(t,e,n){let r=N.EMPTY_NODE,i=sr(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(ne,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){let s=_n(t.visibleWrites,e);return n.forEachChild(ne,(o,a)=>{let c=oi(_n(s,new q(o)),a);r=r.updateImmediateChild(o,c)}),vI(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{let s=_n(t.visibleWrites,e);return vI(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function VO(t,e,n,r,i){g(r||i,"Either existingEventSnap or existingServerSnap must exist");let s=te(e,n);if(np(t.visibleWrites,s))return null;{let o=_n(t.visibleWrites,s);return rp(o)?i.getChild(n):oi(o,i.getChild(n))}}function $O(t,e,n,r){let i=te(e,n),s=sr(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){let o=_n(t.visibleWrites,i);return oi(o,r.getNode().getImmediateChild(n))}else return null}function BO(t,e){return sr(t.visibleWrites,e)}function HO(t,e,n,r,i,s,o){let a,c=_n(t.visibleWrites,e),l=sr(c,B());if(l!=null)a=l;else if(n!=null)a=oi(c,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){let u=[],d=o.getCompare(),f=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o),h=f.getNext();for(;h&&u.length<i;)d(h,r)!==0&&u.push(h),h=f.getNext();return u}else return[]}function WO(){return{visibleWrites:pt.empty(),allWrites:[],lastWriteId:-1}}function Fc(t,e,n,r){return sE(t.writeTree,t.treePath,e,n,r)}function Rp(t,e){return UO(t.writeTree,t.treePath,e)}function yI(t,e,n,r){return VO(t.writeTree,t.treePath,e,n,r)}function jc(t,e){return BO(t.writeTree,te(t.treePath,e))}function zO(t,e,n,r,i,s){return HO(t.writeTree,t.treePath,e,n,r,i,s)}function xp(t,e,n){return $O(t.writeTree,t.treePath,e,n)}function oE(t,e){return aE(te(t.treePath,e),t.writeTree)}function aE(t,e){return{treePath:t,writeTree:e}}var ip=class{constructor(){this.changeMap=new Map}trackChildChange(e){let n=e.type,r=e.childName;g(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),g(r!==".priority","Only non-priority child changes can be tracked.");let i=this.changeMap.get(r);if(i){let s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,qs(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,zs(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,ii(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,qs(r,e.snapshotNode,i.oldSnap));else throw zn("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}};var sp=class{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}},cE=new sp,Ks=class{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){let n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{let r=this.optCompleteServerCache_!=null?new kt(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return xp(this.writes_,e,r)}}getChildAfterChild(e,n,r){let i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:rr(this.viewCache_),s=zO(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}};function qO(t){return{filter:t}}function GO(t,e){g(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),g(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function YO(t,e,n,r,i){let s=new ip,o,a;if(n.type===Ot.OVERWRITE){let l=n;l.source.fromUser?o=op(t,e,l.path,l.snap,r,i,s):(g(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered()&&!O(l.path),o=Uc(t,e,l.path,l.snap,r,i,a,s))}else if(n.type===Ot.MERGE){let l=n;l.source.fromUser?o=QO(t,e,l.path,l.children,r,i,s):(g(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),o=ap(t,e,l.path,l.children,r,i,a,s))}else if(n.type===Ot.ACK_USER_WRITE){let l=n;l.revert?o=XO(t,e,l.path,r,i,s):o=ZO(t,e,l.path,l.affectedTree,r,i,s)}else if(n.type===Ot.LISTEN_COMPLETE)o=JO(t,e,n.path,r,s);else throw zn("Unknown operation type: "+n.type);let c=s.getChanges();return KO(e,o,c),{viewCache:o,changes:c}}function KO(t,e,n){let r=e.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=Lc(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(eE(Lc(e)))}}function lE(t,e,n,r,i,s){let o=e.eventCache;if(jc(r,n)!=null)return e;{let a,c;if(O(n))if(g(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){let l=rr(e),u=l instanceof N?l:N.EMPTY_NODE,d=Rp(r,u);a=t.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{let l=Fc(r,rr(e));a=t.filter.updateFullNode(e.eventCache.getNode(),l,s)}else{let l=x(n);if(l===".priority"){g(In(n)===1,"Can't have a priority with additional path components");let u=o.getNode();c=e.serverCache.getNode();let d=yI(r,n,u,c);d!=null?a=t.filter.updatePriority(u,d):a=o.getNode()}else{let u=Z(n),d;if(o.isCompleteForChild(l)){c=e.serverCache.getNode();let f=yI(r,n,o.getNode(),c);f!=null?d=o.getNode().getImmediateChild(l).updateChild(u,f):d=o.getNode().getImmediateChild(l)}else d=xp(r,l,e.serverCache);d!=null?a=t.filter.updateChild(o.getNode(),l,d,u,i,s):a=o.getNode()}}return $s(e,a,o.isFullyInitialized()||O(n),t.filter.filtersNodes())}}function Uc(t,e,n,r,i,s,o,a){let c=e.serverCache,l,u=o?t.filter:t.filter.getIndexedFilter();if(O(n))l=u.updateFullNode(c.getNode(),r,null);else if(u.filtersNodes()&&!c.isFiltered()){let h=c.getNode().updateChild(n,r);l=u.updateFullNode(c.getNode(),h,null)}else{let h=x(n);if(!c.isCompleteForPath(n)&&In(n)>1)return e;let p=Z(n),w=c.getNode().getImmediateChild(h).updateChild(p,r);h===".priority"?l=u.updatePriority(c.getNode(),w):l=u.updateChild(c.getNode(),h,w,p,cE,null)}let d=nE(e,l,c.isFullyInitialized()||O(n),u.filtersNodes()),f=new Ks(i,d,s);return lE(t,d,n,i,f,a)}function op(t,e,n,r,i,s,o){let a=e.eventCache,c,l,u=new Ks(i,e,s);if(O(n))l=t.filter.updateFullNode(e.eventCache.getNode(),r,o),c=$s(e,l,!0,t.filter.filtersNodes());else{let d=x(n);if(d===".priority")l=t.filter.updatePriority(e.eventCache.getNode(),r),c=$s(e,l,a.isFullyInitialized(),a.isFiltered());else{let f=Z(n),h=a.getNode().getImmediateChild(d),p;if(O(f))p=r;else{let y=u.getCompleteChild(d);y!=null?Dp(f)===".priority"&&y.getChild(YI(f)).isEmpty()?p=y:p=y.updateChild(f,r):p=N.EMPTY_NODE}if(h.equals(p))c=e;else{let y=t.filter.updateChild(a.getNode(),d,p,f,u,o);c=$s(e,y,a.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function _I(t,e){return t.eventCache.isCompleteForChild(e)}function QO(t,e,n,r,i,s,o){let a=e;return r.foreach((c,l)=>{let u=te(n,c);_I(e,x(u))&&(a=op(t,a,u,l,i,s,o))}),r.foreach((c,l)=>{let u=te(n,c);_I(e,x(u))||(a=op(t,a,u,l,i,s,o))}),a}function wI(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function ap(t,e,n,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,l;O(n)?l=r:l=new be(null).setTree(n,r);let u=e.serverCache.getNode();return l.children.inorderTraversal((d,f)=>{if(u.hasChild(d)){let h=e.serverCache.getNode().getImmediateChild(d),p=wI(t,h,f);c=Uc(t,c,new q(d),p,i,s,o,a)}}),l.children.inorderTraversal((d,f)=>{let h=!e.serverCache.isCompleteForChild(d)&&f.value===null;if(!u.hasChild(d)&&!h){let p=e.serverCache.getNode().getImmediateChild(d),y=wI(t,p,f);c=Uc(t,c,new q(d),y,i,s,o,a)}}),c}function ZO(t,e,n,r,i,s,o){if(jc(i,n)!=null)return e;let a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(O(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return Uc(t,e,n,c.getNode().getChild(n),i,s,a,o);if(O(n)){let l=new be(null);return c.getNode().forEachChild(Xr,(u,d)=>{l=l.set(new q(u),d)}),ap(t,e,n,l,i,s,a,o)}else return e}else{let l=new be(null);return r.foreach((u,d)=>{let f=te(n,u);c.isCompleteForPath(f)&&(l=l.set(u,c.getNode().getChild(f)))}),ap(t,e,n,l,i,s,a,o)}}function JO(t,e,n,r,i){let s=e.serverCache,o=nE(e,s.getNode(),s.isFullyInitialized()||O(n),s.isFiltered());return lE(t,o,n,r,cE,i)}function XO(t,e,n,r,i,s){let o;if(jc(r,n)!=null)return e;{let a=new Ks(r,e,i),c=e.eventCache.getNode(),l;if(O(n)||x(n)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=Fc(r,rr(e));else{let d=e.serverCache.getNode();g(d instanceof N,"serverChildren would be complete if leaf node"),u=Rp(r,d)}u=u,l=t.filter.updateFullNode(c,u,s)}else{let u=x(n),d=xp(r,u,e.serverCache);d==null&&e.serverCache.isCompleteForChild(u)&&(d=c.getImmediateChild(u)),d!=null?l=t.filter.updateChild(c,u,d,Z(n),a,s):e.eventCache.getNode().hasChild(u)?l=t.filter.updateChild(c,u,N.EMPTY_NODE,Z(n),a,s):l=c,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Fc(r,rr(e)),o.isLeafNode()&&(l=t.filter.updateFullNode(l,o,s)))}return o=e.serverCache.isFullyInitialized()||jc(r,B())!=null,$s(e,l,o,t.filter.filtersNodes())}}var cp=class{constructor(e,n){this.query_=e,this.eventRegistrations_=[];let r=this.query_._queryParams,i=new Gs(r.getIndex()),s=DO(r);this.processor_=qO(s);let o=n.serverCache,a=n.eventCache,c=i.updateFullNode(N.EMPTY_NODE,o.getNode(),null),l=s.updateFullNode(N.EMPTY_NODE,a.getNode(),null),u=new kt(c,o.isFullyInitialized(),i.filtersNodes()),d=new kt(l,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=Kc(d,u),this.eventGenerator_=new ep(this.query_)}get query(){return this.query_}};function ek(t){return t.viewCache_.serverCache.getNode()}function tk(t){return Lc(t.viewCache_)}function nk(t,e){let n=rr(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!O(e)&&!n.getImmediateChild(x(e)).isEmpty())?n.getChild(e):null}function II(t){return t.eventRegistrations_.length===0}function rk(t,e){t.eventRegistrations_.push(e)}function EI(t,e,n){let r=[];if(n){g(e==null,"A cancel should cancel all event registrations.");let i=t.query._path;t.eventRegistrations_.forEach(s=>{let o=s.createCancelEvent(n,i);o&&r.push(o)})}if(e){let i=[];for(let s=0;s<t.eventRegistrations_.length;++s){let o=t.eventRegistrations_[s];if(!o.matches(e))i.push(o);else if(e.hasAnyCallback()){i=i.concat(t.eventRegistrations_.slice(s+1));break}}t.eventRegistrations_=i}else t.eventRegistrations_=[];return r}function CI(t,e,n,r){e.type===Ot.MERGE&&e.source.queryId!==null&&(g(rr(t.viewCache_),"We should always have a full cache before handling merges"),g(Lc(t.viewCache_),"Missing event cache, even though we have a server cache"));let i=t.viewCache_,s=YO(t.processor_,i,e,n,r);return GO(t.processor_,s.viewCache),g(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,uE(t,s.changes,s.viewCache.eventCache.getNode(),null)}function ik(t,e){let n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(ne,(s,o)=>{r.push(ii(s,o))}),n.isFullyInitialized()&&r.push(eE(n.getNode())),uE(t,r,n.getNode(),e)}function uE(t,e,n,r){let i=r?[r]:t.eventRegistrations_;return AO(t.eventGenerator_,e,n,i)}var Vc,$c=class{constructor(){this.views=new Map}};function sk(t){g(!Vc,"__referenceConstructor has already been defined"),Vc=t}function ok(){return g(Vc,"Reference.ts has not been loaded"),Vc}function ak(t){return t.views.size===0}function Pp(t,e,n,r){let i=e.source.queryId;if(i!==null){let s=t.views.get(i);return g(s!=null,"SyncTree gave us an op for an invalid query."),CI(s,e,n,r)}else{let s=[];for(let o of t.views.values())s=s.concat(CI(o,e,n,r));return s}}function dE(t,e,n,r,i){let s=e._queryIdentifier,o=t.views.get(s);if(!o){let a=Fc(n,i?r:null),c=!1;a?c=!0:r instanceof N?(a=Rp(n,r),c=!1):(a=N.EMPTY_NODE,c=!1);let l=Kc(new kt(a,c,!1),new kt(r,i,!1));return new cp(e,l)}return o}function ck(t,e,n,r,i,s){let o=dE(t,e,r,i,s);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),rk(o,n),ik(o,n)}function lk(t,e,n,r){let i=e._queryIdentifier,s=[],o=[],a=En(t);if(i==="default")for(let[c,l]of t.views.entries())o=o.concat(EI(l,n,r)),II(l)&&(t.views.delete(c),l.query._queryParams.loadsAllData()||s.push(l.query));else{let c=t.views.get(i);c&&(o=o.concat(EI(c,n,r)),II(c)&&(t.views.delete(i),c.query._queryParams.loadsAllData()||s.push(c.query)))}return a&&!En(t)&&s.push(new(ok())(e._repo,e._path)),{removed:s,events:o}}function fE(t){let e=[];for(let n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function wn(t,e){let n=null;for(let r of t.views.values())n=n||nk(r,e);return n}function hE(t,e){if(e._queryParams.loadsAllData())return Zc(t);{let r=e._queryIdentifier;return t.views.get(r)}}function pE(t,e){return hE(t,e)!=null}function En(t){return Zc(t)!=null}function Zc(t){for(let e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}var Bc;function uk(t){g(!Bc,"__referenceConstructor has already been defined"),Bc=t}function dk(){return g(Bc,"Reference.ts has not been loaded"),Bc}var fk=1,Hc=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new be(null),this.pendingWriteTree_=WO(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function gE(t,e,n,r,i){return xO(t.pendingWriteTree_,e,n,r,i),i?li(t,new si(Ap(),e,n)):[]}function hk(t,e,n,r){PO(t.pendingWriteTree_,e,n,r);let i=be.fromObject(n);return li(t,new Ys(Ap(),e,i))}function yn(t,e,n=!1){let r=OO(t.pendingWriteTree_,e);if(kO(t.pendingWriteTree_,e)){let s=new be(null);return r.snap!=null?s=s.set(B(),!0):_e(r.children,o=>{s=s.set(new q(o),!0)}),li(t,new Xh(r.path,s,n))}else return[]}function ro(t,e,n){return li(t,new si(Np(),e,n))}function pk(t,e,n){let r=be.fromObject(n);return li(t,new Ys(Np(),e,r))}function gk(t,e){return li(t,new kc(Np(),e))}function mk(t,e,n){let r=kp(t,n);if(r){let i=Lp(r),s=i.path,o=i.queryId,a=Ce(s,e),c=new kc(Mp(o),a);return Fp(t,s,c)}else return[]}function Wc(t,e,n,r,i=!1){let s=e._path,o=t.syncPointTree_.get(s),a=[];if(o&&(e._queryIdentifier==="default"||pE(o,e))){let c=lk(o,e,n,r);ak(o)&&(t.syncPointTree_=t.syncPointTree_.remove(s));let l=c.removed;if(a=c.events,!i){let u=l.findIndex(f=>f._queryParams.loadsAllData())!==-1,d=t.syncPointTree_.findOnPath(s,(f,h)=>En(h));if(u&&!d){let f=t.syncPointTree_.subtree(s);if(!f.isEmpty()){let h=_k(f);for(let p=0;p<h.length;++p){let y=h[p],w=y.query,A=_E(t,y);t.listenProvider_.startListening(Hs(w),Qs(t,w),A.hashFn,A.onComplete)}}}!d&&l.length>0&&!r&&(u?t.listenProvider_.stopListening(Hs(e),null):l.forEach(f=>{let h=t.queryToTagMap.get(Jc(f));t.listenProvider_.stopListening(Hs(f),h)}))}wk(t,l)}return a}function mE(t,e,n,r){let i=kp(t,r);if(i!=null){let s=Lp(i),o=s.path,a=s.queryId,c=Ce(o,e),l=new si(Mp(a),c,n);return Fp(t,o,l)}else return[]}function vk(t,e,n,r){let i=kp(t,r);if(i){let s=Lp(i),o=s.path,a=s.queryId,c=Ce(o,e),l=be.fromObject(n),u=new Ys(Mp(a),c,l);return Fp(t,o,u)}else return[]}function lp(t,e,n,r=!1){let i=e._path,s=null,o=!1;t.syncPointTree_.foreachOnPath(i,(f,h)=>{let p=Ce(f,i);s=s||wn(h,p),o=o||En(h)});let a=t.syncPointTree_.get(i);a?(o=o||En(a),s=s||wn(a,B())):(a=new $c,t.syncPointTree_=t.syncPointTree_.set(i,a));let c;s!=null?c=!0:(c=!1,s=N.EMPTY_NODE,t.syncPointTree_.subtree(i).foreachChild((h,p)=>{let y=wn(p,B());y&&(s=s.updateImmediateChild(h,y))}));let l=pE(a,e);if(!l&&!e._queryParams.loadsAllData()){let f=Jc(e);g(!t.queryToTagMap.has(f),"View does not exist, but we have a tag");let h=Ik();t.queryToTagMap.set(f,h),t.tagToQueryMap.set(h,f)}let u=Qc(t.pendingWriteTree_,i),d=ck(a,e,n,u,s,c);if(!l&&!o&&!r){let f=hE(a,e);d=d.concat(Ek(t,e,f))}return d}function Op(t,e,n){let i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{let c=Ce(o,e),l=wn(a,c);if(l)return l});return sE(i,e,s,n,!0)}function yk(t,e){let n=e._path,r=null;t.syncPointTree_.foreachOnPath(n,(l,u)=>{let d=Ce(l,n);r=r||wn(u,d)});let i=t.syncPointTree_.get(n);i?r=r||wn(i,B()):(i=new $c,t.syncPointTree_=t.syncPointTree_.set(n,i));let s=r!=null,o=s?new kt(r,!0,!1):null,a=Qc(t.pendingWriteTree_,e._path),c=dE(i,e,a,s?o.getNode():N.EMPTY_NODE,s);return tk(c)}function li(t,e){return vE(e,t.syncPointTree_,null,Qc(t.pendingWriteTree_,B()))}function vE(t,e,n,r){if(O(t.path))return yE(t,e,n,r);{let i=e.get(B());n==null&&i!=null&&(n=wn(i,B()));let s=[],o=x(t.path),a=t.operationForChild(o),c=e.children.get(o);if(c&&a){let l=n?n.getImmediateChild(o):null,u=oE(r,o);s=s.concat(vE(a,c,l,u))}return i&&(s=s.concat(Pp(i,t,r,n))),s}}function yE(t,e,n,r){let i=e.get(B());n==null&&i!=null&&(n=wn(i,B()));let s=[];return e.children.inorderTraversal((o,a)=>{let c=n?n.getImmediateChild(o):null,l=oE(r,o),u=t.operationForChild(o);u&&(s=s.concat(yE(u,a,c,l)))}),i&&(s=s.concat(Pp(i,t,r,n))),s}function _E(t,e){let n=e.query,r=Qs(t,n);return{hashFn:()=>(ek(e)||N.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?mk(t,n._path,r):gk(t,n._path);{let s=OP(i,n);return Wc(t,n,null,s)}}}}function Qs(t,e){let n=Jc(e);return t.queryToTagMap.get(n)}function Jc(t){return t._path.toString()+"$"+t._queryIdentifier}function kp(t,e){return t.tagToQueryMap.get(e)}function Lp(t){let e=t.indexOf("$");return g(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new q(t.substr(0,e))}}function Fp(t,e,n){let r=t.syncPointTree_.get(e);g(r,"Missing sync point for query tag that we're tracking");let i=Qc(t.pendingWriteTree_,e);return Pp(r,n,i,null)}function _k(t){return t.fold((e,n,r)=>{if(n&&En(n))return[Zc(n)];{let i=[];return n&&(i=fE(n)),_e(r,(s,o)=>{i=i.concat(o)}),i}})}function Hs(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(dk())(t._repo,t._path):t}function wk(t,e){for(let n=0;n<e.length;++n){let r=e[n];if(!r._queryParams.loadsAllData()){let i=Jc(r),s=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(s)}}}function Ik(){return fk++}function Ek(t,e,n){let r=e._path,i=Qs(t,e),s=_E(t,n),o=t.listenProvider_.startListening(Hs(e),i,s.hashFn,s.onComplete),a=t.syncPointTree_.subtree(r);if(i)g(!En(a.value),"If we're adding a query, it shouldn't be shadowed");else{let c=a.fold((l,u,d)=>{if(!O(l)&&u&&En(u))return[Zc(u).query];{let f=[];return u&&(f=f.concat(fE(u).map(h=>h.query))),_e(d,(h,p)=>{f=f.concat(p)}),f}});for(let l=0;l<c.length;++l){let u=c[l];t.listenProvider_.stopListening(Hs(u),Qs(t,u))}}return o}var up=class t{constructor(e){this.node_=e}getImmediateChild(e){let n=this.node_.getImmediateChild(e);return new t(n)}node(){return this.node_}},dp=class t{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){let n=te(this.path_,e);return new t(this.syncTree_,n)}node(){return Op(this.syncTree_,this.path_)}},Ck=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},DI=function(t,e,n){if(!t||typeof t!="object")return t;if(g(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return Dk(t[".sv"],e,n);if(typeof t[".sv"]=="object")return bk(t[".sv"],e);g(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},Dk=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:g(!1,"Unexpected server value: "+t)}},bk=function(t,e,n){t.hasOwnProperty("increment")||g(!1,"Unexpected server value: "+JSON.stringify(t,null,2));let r=t.increment;typeof r!="number"&&g(!1,"Unexpected increment value: "+r);let i=e.node();if(g(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;let o=i.getValue();return typeof o!="number"?r:o+r},wE=function(t,e,n,r){return jp(e,new dp(n,t),r)},IE=function(t,e,n){return jp(t,new up(e),n)};function jp(t,e,n){let r=t.getPriority().val(),i=DI(r,e.getImmediateChild(".priority"),n),s;if(t.isLeafNode()){let o=t,a=DI(o.getValue(),e,n);return a!==o.getValue()||i!==o.getPriority().val()?new ni(a,de(i)):t}else{let o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new ni(i))),o.forEachChild(ne,(a,c)=>{let l=jp(c,e.getImmediateChild(a),n);l!==c&&(s=s.updateImmediateChild(a,l))}),s}}var Zs=class{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}};function Up(t,e){let n=e instanceof q?e:new q(e),r=t,i=x(n);for(;i!==null;){let s=qn(r.node.children,i)||{children:{},childCount:0};r=new Zs(i,r,s),n=Z(n),i=x(n)}return r}function ui(t){return t.node.value}function EE(t,e){t.node.value=e,fp(t)}function CE(t){return t.node.childCount>0}function Tk(t){return ui(t)===void 0&&!CE(t)}function Xc(t,e){_e(t.node.children,(n,r)=>{e(new Zs(n,t,r))})}function DE(t,e,n,r){n&&!r&&e(t),Xc(t,i=>{DE(i,e,!0,r)}),n&&r&&e(t)}function Sk(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function io(t){return new q(t.parent===null?t.name:io(t.parent)+"/"+t.name)}function fp(t){t.parent!==null&&Ak(t.parent,t.name,t)}function Ak(t,e,n){let r=Tk(n),i=ft(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,fp(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,fp(t))}var Nk=/[\[\].#$\/\u0000-\u001F\u007F]/,Mk=/[\[\].#$\u0000-\u001F\u007F]/,Ch=10*1024*1024,Vp=function(t){return typeof t=="string"&&t.length!==0&&!Nk.test(t)},bE=function(t){return typeof t=="string"&&t.length!==0&&!Mk.test(t)},Rk=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),bE(t)},xk=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!Ip(t)||t&&typeof t=="object"&&ft(t,".sv")},Pk=function(t,e,n,r){r&&e===void 0||el(_s(t,"value"),e,n)},el=function(t,e,n){let r=n instanceof q?new Fh(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Xn(r));if(typeof e=="function")throw new Error(t+"contains a function "+Xn(r)+" with contents = "+e.toString());if(Ip(e))throw new Error(t+"contains "+e.toString()+" "+Xn(r));if(typeof e=="string"&&e.length>Ch/3&&ws(e)>Ch)throw new Error(t+"contains a string greater than "+Ch+" utf8 bytes "+Xn(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(_e(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!Vp(o)))throw new Error(t+" contains an invalid key ("+o+") "+Xn(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);uO(r,o),el(t,a,r),dO(r)}),i&&s)throw new Error(t+' contains ".value" child '+Xn(r)+" in addition to actual children.")}},Ok=function(t,e){let n,r;for(n=0;n<e.length;n++){r=e[n];let s=Ws(r);for(let o=0;o<s.length;o++)if(!(s[o]===".priority"&&o===s.length-1)){if(!Vp(s[o]))throw new Error(t+"contains an invalid key ("+s[o]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(lO);let i=null;for(n=0;n<e.length;n++){if(r=e[n],i!==null&&Xe(i,r))throw new Error(t+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}},kk=function(t,e,n,r){if(r&&e===void 0)return;let i=_s(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");let s=[];_e(e,(o,a)=>{let c=new q(o);if(el(i,a,te(n,c)),Dp(c)===".priority"&&!xk(a))throw new Error(i+"contains an invalid value for '"+c.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(c)}),Ok(i,s)};var TE=function(t,e,n,r){if(!(r&&n===void 0)&&!bE(n))throw new Error(_s(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},Lk=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),TE(t,e,n,r)},Fk=function(t,e){if(x(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},jk=function(t,e){let n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Vp(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!Rk(n))throw new Error(_s(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var hp=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function tl(t,e){let n=null;for(let r=0;r<e.length;r++){let i=e[r],s=i.getPath();n!==null&&!bp(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function SE(t,e,n){tl(t,n),AE(t,r=>bp(r,e))}function tt(t,e,n){tl(t,n),AE(t,r=>Xe(r,e)||Xe(e,r))}function AE(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){let i=t.eventLists_[r];if(i){let s=i.path;e(s)?(Uk(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function Uk(t){for(let e=0;e<t.events.length;e++){let n=t.events[e];if(n!==null){t.events[e]=null;let r=n.getEventRunner();tr&&ye("event: "+n.toString()),ci(r)}}}var Vk="repo_interrupt",$k=25,pp=class{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new hp,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Oc(),this.transactionQueueTree_=new Zs,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function Bk(t,e,n){if(t.stats_=Cp(t.repoInfo_),t.forceRestClient_||jP())t.server_=new Yh(t.repoInfo_,(r,i,s,o)=>{bI(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>TI(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{ce(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new Tp(t.repoInfo_,e,(r,i,s,o)=>{bI(t,r,i,s,o)},r=>{TI(t,r)},r=>{Wk(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=VP(t.repoInfo_,()=>new Jh(t.stats_,t.server_)),t.infoData_=new Kh,t.infoSyncTree_=new Hc({startListening:(r,i,s,o)=>{let a=[],c=t.infoData_.getNode(r._path);return c.isEmpty()||(a=ro(t.infoSyncTree_,r._path,c),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),$p(t,"connected",!1),t.serverSyncTree_=new Hc({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(a,c)=>{let l=o(a,c);tt(t.eventQueue_,r._path,l)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function Hk(t){let n=t.infoData_.getNode(new q(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function nl(t){return Ck({timestamp:Hk(t)})}function bI(t,e,n,r,i){t.dataUpdateCount++;let s=new q(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){let c=ms(n,l=>de(l));o=vk(t.serverSyncTree_,s,c,i)}else{let c=de(n);o=mE(t.serverSyncTree_,s,c,i)}else if(r){let c=ms(n,l=>de(l));o=pk(t.serverSyncTree_,s,c)}else{let c=de(n);o=ro(t.serverSyncTree_,s,c)}let a=s;o.length>0&&(a=ai(t,s)),tt(t.eventQueue_,a,o)}function TI(t,e){$p(t,"connected",e),e===!1&&Yk(t)}function Wk(t,e){_e(e,(n,r)=>{$p(t,n,r)})}function $p(t,e,n){let r=new q("/.info/"+e),i=de(n);t.infoData_.updateSnapshot(r,i);let s=ro(t.infoSyncTree_,r,i);tt(t.eventQueue_,r,s)}function Bp(t){return t.nextWriteId_++}function zk(t,e,n){let r=yk(t.serverSyncTree_,e);return r!=null?Promise.resolve(r):t.server_.get(e).then(i=>{let s=de(i).withIndex(e._queryParams.getIndex());lp(t.serverSyncTree_,e,n,!0);let o;if(e._queryParams.loadsAllData())o=ro(t.serverSyncTree_,e._path,s);else{let a=Qs(t.serverSyncTree_,e);o=mE(t.serverSyncTree_,e._path,s,a)}return tt(t.eventQueue_,e._path,o),Wc(t.serverSyncTree_,e,n,null,!0),s},i=>(so(t,"get for query "+ce(e)+" failed: "+i),Promise.reject(new Error(i))))}function qk(t,e,n,r,i){so(t,"set",{path:e.toString(),value:n,priority:r});let s=nl(t),o=de(n,r),a=Op(t.serverSyncTree_,e),c=IE(o,a,s),l=Bp(t),u=gE(t.serverSyncTree_,e,c,l,!0);tl(t.eventQueue_,u),t.server_.put(e.toString(),o.val(!0),(f,h)=>{let p=f==="ok";p||De("set at "+e+" failed: "+f);let y=yn(t.serverSyncTree_,l,!p);tt(t.eventQueue_,e,y),gp(t,i,f,h)});let d=Wp(t,e);ai(t,d),tt(t.eventQueue_,d,[])}function Gk(t,e,n,r){so(t,"update",{path:e.toString(),value:n});let i=!0,s=nl(t),o={};if(_e(n,(a,c)=>{i=!1,o[a]=wE(te(e,a),de(c),t.serverSyncTree_,s)}),i)ye("update() called with empty data.  Don't do anything."),gp(t,r,"ok",void 0);else{let a=Bp(t),c=hk(t.serverSyncTree_,e,o,a);tl(t.eventQueue_,c),t.server_.merge(e.toString(),n,(l,u)=>{let d=l==="ok";d||De("update at "+e+" failed: "+l);let f=yn(t.serverSyncTree_,a,!d),h=f.length>0?ai(t,e):e;tt(t.eventQueue_,h,f),gp(t,r,l,u)}),_e(n,l=>{let u=Wp(t,te(e,l));ai(t,u)}),tt(t.eventQueue_,e,[])}}function Yk(t){so(t,"onDisconnectEvents");let e=nl(t),n=Oc();Qh(t.onDisconnect_,B(),(i,s)=>{let o=wE(i,s,t.serverSyncTree_,e);tE(n,i,o)});let r=[];Qh(n,B(),(i,s)=>{r=r.concat(ro(t.serverSyncTree_,i,s));let o=Wp(t,i);ai(t,o)}),t.onDisconnect_=Oc(),tt(t.eventQueue_,B(),r)}function Kk(t,e,n){let r;x(e._path)===".info"?r=lp(t.infoSyncTree_,e,n):r=lp(t.serverSyncTree_,e,n),SE(t.eventQueue_,e._path,r)}function SI(t,e,n){let r;x(e._path)===".info"?r=Wc(t.infoSyncTree_,e,n):r=Wc(t.serverSyncTree_,e,n),SE(t.eventQueue_,e._path,r)}function Qk(t){t.persistentConnection_&&t.persistentConnection_.interrupt(Vk)}function so(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),ye(n,...e)}function gp(t,e,n,r){e&&ci(()=>{if(n==="ok")e(null);else{let i=(n||"error").toUpperCase(),s=i;r&&(s+=": "+r);let o=new Error(s);o.code=i,e(o)}})}function NE(t,e,n){return Op(t.serverSyncTree_,e,n)||N.EMPTY_NODE}function Hp(t,e=t.transactionQueueTree_){if(e||rl(t,e),ui(e)){let n=RE(t,e);g(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&Zk(t,io(e),n)}else CE(e)&&Xc(e,n=>{Hp(t,n)})}function Zk(t,e,n){let r=n.map(l=>l.currentWriteId),i=NE(t,e,r),s=i,o=i.hash();for(let l=0;l<n.length;l++){let u=n[l];g(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;let d=Ce(e,u.path);s=s.updateChild(d,u.currentOutputSnapshotRaw)}let a=s.val(!0),c=e;t.server_.put(c.toString(),a,l=>{so(t,"transaction put response",{path:c.toString(),status:l});let u=[];if(l==="ok"){let d=[];for(let f=0;f<n.length;f++)n[f].status=2,u=u.concat(yn(t.serverSyncTree_,n[f].currentWriteId)),n[f].onComplete&&d.push(()=>n[f].onComplete(null,!0,n[f].currentOutputSnapshotResolved)),n[f].unwatcher();rl(t,Up(t.transactionQueueTree_,e)),Hp(t,t.transactionQueueTree_),tt(t.eventQueue_,e,u);for(let f=0;f<d.length;f++)ci(d[f])}else{if(l==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{De("transaction at "+c.toString()+" failed: "+l);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=l}ai(t,e)}},o)}function ai(t,e){let n=ME(t,e),r=io(n),i=RE(t,n);return Jk(t,i,r),r}function Jk(t,e,n){if(e.length===0)return;let r=[],i=[],o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){let c=e[a],l=Ce(n,c.path),u=!1,d;if(g(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)u=!0,d=c.abortReason,i=i.concat(yn(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=$k)u=!0,d="maxretry",i=i.concat(yn(t.serverSyncTree_,c.currentWriteId,!0));else{let f=NE(t,c.path,o);c.currentInputSnapshot=f;let h=e[a].update(f.val());if(h!==void 0){el("transaction failed: Data returned ",h,c.path);let p=de(h);typeof h=="object"&&h!=null&&ft(h,".priority")||(p=p.updatePriority(f.getPriority()));let w=c.currentWriteId,A=nl(t),re=IE(p,f,A);c.currentOutputSnapshotRaw=p,c.currentOutputSnapshotResolved=re,c.currentWriteId=Bp(t),o.splice(o.indexOf(w),1),i=i.concat(gE(t.serverSyncTree_,c.path,re,c.currentWriteId,c.applyLocally)),i=i.concat(yn(t.serverSyncTree_,w,!0))}else u=!0,d="nodata",i=i.concat(yn(t.serverSyncTree_,c.currentWriteId,!0))}tt(t.eventQueue_,n,i),i=[],u&&(e[a].status=2,function(f){setTimeout(f,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(d),!1,null))))}rl(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)ci(r[a]);Hp(t,t.transactionQueueTree_)}function ME(t,e){let n,r=t.transactionQueueTree_;for(n=x(e);n!==null&&ui(r)===void 0;)r=Up(r,n),e=Z(e),n=x(e);return r}function RE(t,e){let n=[];return xE(t,e,n),n.sort((r,i)=>r.order-i.order),n}function xE(t,e,n){let r=ui(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);Xc(e,i=>{xE(t,i,n)})}function rl(t,e){let n=ui(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,EE(e,n.length>0?n:void 0)}Xc(e,r=>{rl(t,r)})}function Wp(t,e){let n=io(ME(t,e)),r=Up(t.transactionQueueTree_,e);return Sk(r,i=>{Dh(t,i)}),Dh(t,r),DE(r,i=>{Dh(t,i)}),n}function Dh(t,e){let n=ui(e);if(n){let r=[],i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(g(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(g(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(yn(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?EE(e,void 0):n.length=s+1,tt(t.eventQueue_,io(e),i);for(let o=0;o<r.length;o++)ci(r[o])}}function Xk(t){let e="",n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function eL(t){let e={};t.charAt(0)==="?"&&(t=t.substring(1));for(let n of t.split("&")){if(n.length===0)continue;let r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):De(`Invalid query segment '${n}' in query '${t}'`)}return e}var AI=function(t,e){let n=tL(t),r=n.namespace;n.domain==="firebase.com"&&Gt(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Gt("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||NP();let i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new Tc(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new q(n.pathString)}},tL=function(t){let e="",n="",r="",i="",s="",o=!0,a="https",c=443;if(typeof t=="string"){let l=t.indexOf("//");l>=0&&(a=t.substring(0,l-1),t=t.substring(l+2));let u=t.indexOf("/");u===-1&&(u=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(u,d)),u<d&&(i=Xk(t.substring(u,d)));let f=eL(t.substring(Math.min(t.length,d)));l=e.indexOf(":"),l>=0?(o=a==="https"||a==="wss",c=parseInt(e.substring(l+1),10)):l=e.length;let h=e.slice(0,l);if(h.toLowerCase()==="localhost")n="localhost";else if(h.split(".").length<=2)n=h;else{let p=e.indexOf(".");r=e.substring(0,p).toLowerCase(),n=e.substring(p+1),s=r}"ns"in f&&(s=f.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};var zc=class{constructor(e,n,r,i){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){let e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+ce(this.snapshot.exportVal())}},qc=class{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}};var Gc=class{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return g(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}};var mp=class t{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return O(this._path)?null:Dp(this._path)}get ref(){return new Lt(this._repo,this._path)}get _queryIdentifier(){let e=pI(this._queryParams),n=Ep(e);return n==="{}"?"default":n}get _queryObject(){return pI(this._queryParams)}isEqual(e){if(e=Ze(e),!(e instanceof t))return!1;let n=this._repo===e._repo,r=bp(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+cO(this._path)}};var Lt=class t extends mp{constructor(e,n){super(e,n,new Gh,!1)}get parent(){let e=YI(this._path);return e===null?null:new t(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}},Js=class t{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){let n=new q(e),r=Xs(this.ref,e);return new t(this._node.getChild(n),r,ne)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>e(new t(i,Xs(this.ref,r),ne)))}hasChild(e){let n=new q(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}};function PE(t,e){return t=Ze(t),t._checkNotDeleted("ref"),e!==void 0?Xs(t._root,e):t._root}function Xs(t,e){return t=Ze(t),x(t._path)===null?Lk("child","path",e,!1):TE("child","path",e,!1),new Lt(t._repo,te(t._path,e))}function OE(t,e){t=Ze(t),Fk("set",t._path),Pk("set",e,t._path,!1);let n=new zt;return qk(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function kE(t,e){kk("update",e,t._path,!1);let n=new zt;return Gk(t._repo,t._path,e,n.wrapCallback(()=>{})),n.promise}function LE(t){t=Ze(t);let e=new Gc(()=>{}),n=new Yc(e);return zk(t._repo,t,n).then(r=>new Js(r,new Lt(t._repo,t._path),t._queryParams.getIndex()))}var Yc=class t{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){let r=n._queryParams.getIndex();return new zc("value",this,new Js(e.snapshotNode,new Lt(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new qc(this,e,n):null}matches(e){return e instanceof t?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}},vp=class t{constructor(e,n){this.eventType=e,this.callbackContext=n}respondsTo(e){let n=e==="children_added"?"child_added":e;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new qc(this,e,n):null}createEvent(e,n){g(e.childName!=null,"Child events should have a childName.");let r=Xs(new Lt(n._repo,n._path),e.childName),i=n._queryParams.getIndex();return new zc(e.type,this,new Js(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof t?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}};function nL(t,e,n,r,i){let s;if(typeof r=="object"&&(s=void 0,i=r),typeof r=="function"&&(s=r),i&&i.onlyOnce){let c=n,l=(u,d)=>{SI(t._repo,t,a),c(u,d)};l.userCallback=n.userCallback,l.context=n.context,n=l}let o=new Gc(n,s||void 0),a=e==="value"?new Yc(o):new vp(e,o);return Kk(t._repo,t,a),()=>SI(t._repo,t,a)}function FE(t,e,n,r){return nL(t,"value",e,n,r)}sk(Lt);uk(Lt);var rL="FIREBASE_DATABASE_EMULATOR_HOST",yp={},iL=!1;function sL(t,e,n,r){t.repoInfo_=new Tc(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function oL(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||Gt("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),ye("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=AI(s,i),a=o.repoInfo,c,l;typeof process<"u"&&process.env&&(l=process.env[rL]),l?(c=!0,s=`http://${l}?ns=${a.namespace}`,o=AI(s,i),a=o.repoInfo):c=!o.repoInfo.secure;let u=i&&c?new Vs(Vs.OWNER):new Mh(t.name,t.options,e);jk("Invalid Firebase Database URL",o),O(o.path)||Gt("Database URL must point to the root of a Firebase Database (not including a child path).");let d=cL(a,t,u,new Nh(t.name,n));return new _p(d,t)}function aL(t,e){let n=yp[e];(!n||n[t.key]!==t)&&Gt(`Database ${e}(${t.repoInfo_}) has already been deleted.`),Qk(t),delete n[t.key]}function cL(t,e,n,r){let i=yp[e.name];i||(i={},yp[e.name]=i);let s=i[t.toURLString()];return s&&Gt("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new pp(t,iL,n,r),i[t.toURLString()]=s,s}var _p=class{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(Bk(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Lt(this._repo,B())),this._rootInternal}_delete(){return this._rootInternal!==null&&(aL(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Gt("Cannot call "+e+" on a deleted database.")}};function jE(t=Ds(),e){let n=Xf(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){let r=ow("database");r&&UE(n,...r)}return n}function UE(t,e,n,r={}){t=Ze(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&Gt("Cannot call useEmulator() after instance has already been initialized.");let i=t._repoInternal,s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Gt('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Vs(Vs.OWNER);else if(r.mockUserToken){let o=typeof r.mockUserToken=="string"?r.mockUserToken:cw(r.mockUserToken,t.app.options.projectId);s=new Vs(o)}sL(i,e,n,s)}function lL(t){TP(Gr),mn(new Je("database",(e,{instanceIdentifier:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return oL(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),pe(Zw,Jw,t),pe(Zw,Jw,"esm2017")}Tp.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Tp.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};lL();var Yt=class{constructor(e){return e}},VE="database",zp=class{constructor(){return Ts(VE)}};var qp=new S("angularfire2.database-instances");function uL(t,e){let n=nh(VE,t,e);return n&&new Yt(n)}function dL(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Yt(r)}}var fL={provide:zp,deps:[[new _t,qp]]},hL={provide:Yt,useFactory:uL,deps:[[new _t,qp],Qn]};function $E(t,...e){return pe("angularfire",Kr.full,"rtdb"),at([hL,fL,{provide:qp,useFactory:dL(t),multi:!0,deps:[Y,lt,Ss,As,[new _t,Cc],[new _t,bs],...e]}])}var BE=Pt(LE,!0),HE=Pt(jE,!0);var oo=Pt(FE,!0);var Kt=Pt(PE,!0);var WE=Pt(OE,!0);var Gp=Pt(kE,!0);var zE=[];var pL={apiKey:"AIzaSyB7kqf7xqbS8gWiyQvE7AZ2mSK1l7yfisc",authDomain:"paintbuddy-b3991.firebaseapp.com",projectId:"paintbuddy-b3991",storageBucket:"paintbuddy-b3991.appspot.com",messagingSenderId:"929033876153",appId:"1:929033876153:web:250eb23a98fedbf3c8a168",measurementId:"G-PKXJ0T6JRD"},qE={providers:[ew(zE),__(),Rw(()=>xw(pL)),$E(()=>HE())]};var il=(()=>{let e=class e{constructor(){}getColorInput(r){this.color=r.target.value}getWidthInput(r){this.width=r.target.value}sendInput(){return{color:this.color,width:this.width}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var di=(()=>{let e=class e{constructor(){this.db=m(Yt),this.name="",this.roomid=" ",this.chat=[],this.isJoined=!1,this.emiter=new Ae,this.data={id:" ",url:" ",chat:[]}}getNmame(r){this.name=r.target.parentNode.children[1].value,localStorage.setItem("chatname",this.name)}getChat(r){this.data.chat=r,Gp(Kt(this.db,this.roomid+"/"),{chat:this.data.chat})}getUrl(r){this.data.url=r}seturl(){this.roomid!==" "&&Gp(Kt(this.db,this.roomid+"/"),{url:this.data.url})}setToDatabase(r){this.roomid=r,this.data.id=this.roomid,WE(Kt(this.db,JSON.stringify(this.roomid)),this.data),this.change=oo(Kt(this.db,this.roomid+"/url"),i=>{this.displayUrl=i.val(),this.emiter.emit(this.displayUrl)}),this.changeChat=oo(Kt(this.db,this.roomid+"/chat"),i=>{this.chat=i.val(),console.log(this.chat)})}getData(r){this.roomid=r.target.parentNode.children[1].value,BE(Kt(this.db,this.roomid)).then(i=>{i.exists()&&(this.displayUrl=i.val().url,this.emiter.emit(this.displayUrl),this.isJoined=!0)}).catch(i=>{}),this.change=oo(Kt(this.db,this.roomid+"/url"),i=>{this.displayUrl=i.val(),this.emiter.emit(this.displayUrl)}),this.changeChat=oo(Kt(this.db,this.roomid+"/chat"),i=>{this.chat=i.val()})}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var YE=(()=>{let e=class e{constructor(r,i){this.inputServ=r,this.dbserv=i}createRoomId(){this.roomId=Math.floor(1e5+Math.random()*9e5),document.getElementById("uidBtn").style.display="none"}hide(){document.getElementById("nameInput").style.display="none"}};e.\u0275fac=function(i){return new(i||e)(ut(il),ut(di))},e.\u0275cmp=wt({type:e,selectors:[["app-toolbar"]],standalone:!0,features:[Tt],decls:16,vars:1,consts:[[1,"info"],["id","nameInput",1,"nameInput"],["for","name"],["type","text"],["type","button","value","Enter",3,"click"],[1,"uidInput"],["for","uid"],["type","button","value","create room id","id","uidBtn",3,"click"],[1,"roomidInput"]],template:function(i,s){i&1&&(Q(0,"div",0)(1,"div",1)(2,"label",2),Le(3,"Enter name "),H(),Ee(4,"input",3),Q(5,"input",4),ue("click",function(a){return s.dbserv.getNmame(a),s.hide()}),H()(),Q(6,"div",5)(7,"label",6),Le(8,"room id :"),H(),Q(9,"input",7),ue("click",function(){return s.createRoomId(),s.dbserv.setToDatabase(s.roomId)}),H(),Le(10),H(),Q(11,"div",8)(12,"label",2),Le(13,"Enter room id to join "),H(),Ee(14,"input",3),Q(15,"input",4),ue("click",function(a){return s.dbserv.getData(a)}),H()()()),i&2&&(bt(10),xa(" ",s.roomId," "))},styles:["*[_ngcontent-%COMP%]{font-size:20px}.info[_ngcontent-%COMP%]{background-color:#fff;display:flex;flex-direction:column;align-items:start}.uidInput[_ngcontent-%COMP%]{margin:10px 0}.uidInput[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-left:20px}.toolbar[_ngcontent-%COMP%]{font-size:30px;display:flex;justify-content:center;background-color:#fff}.toolbar[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .toolbar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin:10px}"]});let t=e;return t})();function gL(t,e){if(t&1&&(Q(0,"p")(1,"span"),Le(2),H(),Le(3),H()),t&2){let n=e.$implicit;bt(2),Ra(n.sender),bt(),Ra(n.msg)}}var KE=(()=>{let e=class e{constructor(r){this.dbserv=r,this.chatarray=[],this.diabled=!0}check(r){r.target.value===" "?this.diabled=!0:this.diabled=!1}getChat(r){this.dbserv.chat!==null&&(this.chatarray=this.dbserv.chat),this.chatarray.push({msg:r.target.parentNode.parentNode.children[0].value,sender:localStorage.getItem("chatname")}),r.target.parentNode.parentNode.children[0].value=" "}};e.\u0275fac=function(i){return new(i||e)(ut(di))},e.\u0275cmp=wt({type:e,selectors:[["app-chatside"]],standalone:!0,features:[Tt],decls:8,vars:0,consts:[[1,"chat"],[1,"chatCon"],[1,"chatInput"],["type","text",3,"input"],[3,"click"],[1,"fa-solid","fa-paper-plane"]],template:function(i,s){i&1&&(Q(0,"div",0)(1,"div",1),Ay(2,gL,4,2,"p",null,Sy),H(),Q(4,"div",2)(5,"input",3),ue("input",function(a){return s.check(a)}),H(),Q(6,"button",4),ue("click",function(a){return s.getChat(a),s.dbserv.getChat(s.chatarray)}),Ee(7,"i",5),H()()()),i&2&&(bt(2),Ny(s.dbserv.chat))},styles:[".chat[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100vh;border:1px solid black}.chatInput[_ngcontent-%COMP%]{display:flex;align-self:flex-end;justify-content:center;width:100%}.chatCon[_ngcontent-%COMP%]{margin-top:10px;margin-left:10px;height:90%;width:90%;overflow-y:auto;text-align:justify}p[_ngcontent-%COMP%]{font-size:18px;margin-bottom:10px;background-color:#fff;padding:7px}span[_ngcontent-%COMP%]{margin-right:20px;font-size:26px}input[_ngcontent-%COMP%]{height:30px;width:65%}button[_ngcontent-%COMP%]{position:absolute;font-size:25px;right:5.2%;border:none;background-color:transparent}"]});let t=e;return t})();var mL=["canvas"];function vL(t,e){t&1&&Ee(0,"div",18)}var QE=(()=>{let e=class e{constructor(r,i){this.inputServ=r,this.dbserv=i,this.db=m(Yt),this.isDrawing=!1,this.lastX=0,this.lastY=0,this.showToolbar=!1,this.showChat=!1,this.hasNewMessage=!1,this.currentTool="brush",this.currentColor="#000000",this.brushSize=2}ngOnInit(){this.savedData=new Image}ngAfterViewInit(){this.setupCanvas(),this.dbserv.emiter.subscribe(r=>{let i=new Image;i.src=r,i.onload=()=>this.ctx.drawImage(i,0,0)})}onResize(){this.setupCanvas()}setupCanvas(){let r=this.canvasRef.nativeElement,i=r.parentElement;r.width=window.innerWidth,r.height=window.innerHeight,this.ctx=r.getContext("2d"),this.ctx.lineCap="round",this.ctx.lineJoin="round",this.ctx.lineWidth=this.brushSize,this.ctx.strokeStyle=this.currentColor}toggleToolbar(){this.showToolbar=!this.showToolbar,this.showToolbar&&(this.showChat=!1)}toggleChat(){this.showChat=!this.showChat,this.showChat&&(this.showToolbar=!1,this.hasNewMessage=!1)}showContextMenu(r){r.preventDefault(),this.toggleChat()}setTool(r){this.currentTool=r,r==="eraser"?this.ctx.strokeStyle="#ffffff":this.ctx.strokeStyle=this.currentColor}setColor(r){this.currentColor=r.target.value,this.currentTool!=="eraser"&&(this.ctx.strokeStyle=this.currentColor)}setBrushSize(r){this.brushSize=r.target.value,this.ctx.lineWidth=this.brushSize}getMousePos(r,i){let s=r.getBoundingClientRect(),o=r.width/s.width,a=r.height/s.height;return{x:(i.clientX-s.left)*o,y:(i.clientY-s.top)*a}}mouseDown(r){if(r.button===2)return;this.isDrawing=!0;let i=this.getMousePos(this.canvasRef.nativeElement,r);this.lastX=i.x,this.lastY=i.y}mouseUp(){this.isDrawing=!1,this.dbserv.getUrl(this.canvasRef.nativeElement.toDataURL("image/png")),this.dbserv.seturl()}mouseMove(r){if(!this.isDrawing)return;let i=this.getMousePos(this.canvasRef.nativeElement,r);this.ctx.beginPath(),this.ctx.moveTo(this.lastX,this.lastY),this.ctx.lineTo(i.x,i.y),this.ctx.stroke(),this.lastX=i.x,this.lastY=i.y}onNewMessage(){console.log("New message received"),this.showChat||(this.hasNewMessage=!0,console.log("Notification dot should be visible"))}testNewMessage(){this.onNewMessage()}};e.\u0275fac=function(i){return new(i||e)(ut(il),ut(di))},e.\u0275cmp=wt({type:e,selectors:[["app-canvas"]],viewQuery:function(i,s){if(i&1&&Py(mL,5),i&2){let o;Rd(o=xd())&&(s.canvasRef=o.first)}},hostBindings:function(i,s){i&1&&ue("resize",function(){return s.onResize()},!1,jv)},standalone:!0,features:[Tt],decls:26,vars:5,consts:[["canvas",""],[1,"canvas-container"],[1,"menu-button","left-menu",3,"click"],[1,"fas","fa-bars"],[1,"right-menu-container"],[1,"menu-button","right-menu",3,"click"],[1,"fas","fa-comments"],["class","notification-dot",4,"ngIf"],[2,"cursor","crosshair",3,"mousedown","mouseup","mousemove","contextmenu"],[1,"toolbar"],[1,"toolbar-content"],[3,"click"],[1,"color-picker"],["type","color",3,"change"],[1,"brush-size"],["type","range","min","1","max","50",3,"change"],[1,"chat-sidebar"],[3,"newMessage"],[1,"notification-dot"]],template:function(i,s){if(i&1){let o=Ry();Q(0,"div",1)(1,"button",2),ue("click",function(){return Ge(o),Ye(s.toggleToolbar())}),Ee(2,"i",3),H(),Q(3,"div",4)(4,"button",5),ue("click",function(){return Ge(o),Ye(s.toggleChat())}),Ee(5,"i",6),H(),xi(6,vL,1,0,"div",7),H(),Q(7,"canvas",8,0),ue("mousedown",function(c){return Ge(o),Ye(s.mouseDown(c))})("mouseup",function(){return Ge(o),Ye(s.mouseUp())})("mousemove",function(c){return Ge(o),Ye(s.mouseMove(c))})("contextmenu",function(c){return Ge(o),Ye(s.showContextMenu(c))}),H(),Q(9,"div",9)(10,"div",10)(11,"h3"),Le(12,"Tools"),H(),Q(13,"button",11),ue("click",function(){return Ge(o),Ye(s.setTool("brush"))}),Le(14,"Brush"),H(),Q(15,"button",11),ue("click",function(){return Ge(o),Ye(s.setTool("eraser"))}),Le(16,"Eraser"),H(),Q(17,"div",12)(18,"input",13),ue("change",function(c){return Ge(o),Ye(s.setColor(c))}),H()(),Q(19,"div",14)(20,"label"),Le(21,"Size:"),H(),Q(22,"input",15),ue("change",function(c){return Ge(o),Ye(s.setBrushSize(c))}),H()()(),Ee(23,"app-toolbar"),H(),Q(24,"div",16)(25,"app-chatside",17),ue("newMessage",function(){return Ge(o),Ye(s.onNewMessage())}),H()()()}i&2&&(bt(6),Md("ngIf",s.hasNewMessage),bt(3),Ma("show",s.showToolbar),bt(15),Ma("show",s.showChat))},dependencies:[YE,KE],styles:["canvas[_ngcontent-%COMP%]{border:1px solid black;width:100%;height:100%}.canvas-container[_ngcontent-%COMP%]{position:relative;width:100vw;height:100vh;overflow:hidden}canvas[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background:#fff}.menu-button[_ngcontent-%COMP%]{position:fixed;top:5px;z-index:1000;background:#fff;border:none;border-radius:50%;width:40px;height:40px;box-shadow:0 2px 5px #0003;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .3s ease}.menu-button[_ngcontent-%COMP%]:hover{background:#f0f0f0;transform:scale(1.1)}.left-menu[_ngcontent-%COMP%]{left:20px}.right-menu-container[_ngcontent-%COMP%]{position:fixed;top:5px;right:20px;z-index:1000}.right-menu[_ngcontent-%COMP%]{position:relative;background:#fff;border:none;border-radius:50%;width:40px;height:40px;box-shadow:0 2px 5px #0003;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .3s ease}.notification-dot[_ngcontent-%COMP%]{position:absolute;top:-5px;right:-5px;width:15px;height:15px;background-color:red;border-radius:50%;border:2px solid white;animation:_ngcontent-%COMP%_pulse 2s infinite;z-index:1001;box-shadow:0 0 5px #0000004d}@keyframes _ngcontent-%COMP%_pulse{0%{transform:scale(1);opacity:1}50%{transform:scale(1.2);opacity:.8}to{transform:scale(1);opacity:1}}.toolbar[_ngcontent-%COMP%]{position:fixed;left:-300px;top:0;width:300px;height:100vh;background:#fff;box-shadow:2px 0 5px #0000001a;transition:left .3s ease;z-index:999}.toolbar.show[_ngcontent-%COMP%]{left:0}.toolbar-content[_ngcontent-%COMP%]{padding:20px}.toolbar-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:block;width:100%;padding:10px;margin:5px 0;border:none;background:#f0f0f0;border-radius:5px;cursor:pointer}.toolbar-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#e0e0e0}.color-picker[_ngcontent-%COMP%], .brush-size[_ngcontent-%COMP%]{margin:15px 0}.brush-size[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.chat-sidebar[_ngcontent-%COMP%]{position:fixed;right:-300px;top:0;width:300px;height:100vh;background:#fff;box-shadow:-2px 0 5px #0000001a;transition:right .3s ease;z-index:999}.chat-sidebar.show[_ngcontent-%COMP%]{right:0}.chat-content[_ngcontent-%COMP%]{padding:20px}"]});let t=e;return t})();var ZE=(()=>{let e=class e{constructor(){this.title="paint_buddy"}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=wt({type:e,selectors:[["app-root"]],standalone:!0,features:[Tt],decls:3,vars:0,consts:[[1,"header"]],template:function(i,s){i&1&&(Q(0,"div",0)(1,"div"),Ee(2,"app-canvas"),H()())},dependencies:[QE],styles:[".header[_ngcontent-%COMP%]{display:flex}.header[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:70%;height:100vh}app-canvas[_ngcontent-%COMP%]{width:70%}app-chatside[_ngcontent-%COMP%]{width:30%;height:100vh;background-color:#fff}"]});let t=e;return t})();v_(ZE,qE).catch(t=>console.error(t));
